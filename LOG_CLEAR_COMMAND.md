# Команда очистки логов

## Описание

Команда `log:clear` позволяет очищать файлы логов Laravel из директории `storage/logs/`.

## Использование

### Базовое использование (очистка laravel.log)

По умолчанию команда очищает основной файл лога `laravel.log`:

```bash
php artisan log:clear
```

### Очистка всех файлов логов

Очистить все файлы в директории `storage/logs/`:

```bash
php artisan log:clear --all
```

### Очистка конкретного файла

Очистить конкретный файл лога:

```bash
php artisan log:clear --file=laravel.log
php artisan log:clear --file=error.log
```

### Удаление пустых файлов

Удалить все пустые файлы логов:

```bash
php artisan log:clear --empty
```

### Удаление старых логов

Удалить логи старше указанного количества дней:

```bash
# Удалить логи старше 7 дней
php artisan log:clear --days=7

# Удалить логи старше 30 дней
php artisan log:clear --days=30
```

### Пропуск подтверждения

Использовать в автоматических скриптах без интерактивного подтверждения:

```bash
php artisan log:clear --all --confirm
```

### Подробный вывод

Получить подробную информацию о файлах:

```bash
php artisan log:clear --all --verbose
```

## Опции

| Опция | Описание |
|-------|----------|
| `--all` | Очистить все файлы логов |
| `--file=FILE` | Очистить конкретный файл лога (например: laravel.log) |
| `--empty` | Очистить только пустые файлы логов |
| `--days=DAYS` | Удалить логи старше указанного количества дней |
| `--confirm` | Пропустить подтверждение |
| `--verbose` | Показать подробную информацию |

## Примеры использования

### Очистка основного лога

```bash
php artisan log:clear
```

### Очистка всех логов перед деплоем

```bash
php artisan log:clear --all --confirm
```

### Удаление старых логов (ротация)

```bash
# Удалить логи старше 14 дней
php artisan log:clear --days=14 --confirm
```

### Очистка конкретного файла без подтверждения

```bash
php artisan log:clear --file=laravel.log --confirm
```

## Безопасность

- Команда работает только с файлами в директории `storage/logs/`
- Нельзя указать путь вне директории логов (защита от path traversal)
- Все операции требуют подтверждения (кроме опции `--confirm`)

## Интеграция с cron

Пример cron задачи для автоматической очистки старых логов:

```cron
# Очистка логов старше 30 дней каждую ночь в 2:00
0 2 * * * cd /path/to/project && php artisan log:clear --days=30 --confirm
```

## Примечания

- Очистка файла не удаляет его, а просто очищает содержимое (файл становится пустым)
- Удаление файлов (опции `--empty` и `--days`) физически удаляет файлы
- Размеры файлов отображаются в удобочитаемом формате (B, KB, MB, GB)

