import{_ as L,c as r,e as P,d as y,b as a,a as C,t as h,w as D,h as v,j as H,i as n,r as w,D as T,G as A,o as s,f as B}from"./app-Bij6eeV3.js";import{S as N}from"./SEOHead-NxdzwFEZ.js";const R={name:"Page",components:{SEOHead:N},setup(){const p=T(),o=A(),e=v(null),t=v(!0),l=v(null),_=async()=>{t.value=!0,l.value=null;try{const i=p.path;if(["/admin","/login","/register","/forgot-password","/reset-password","/403","/404","/500"].some(m=>i.startsWith(m))){o.replace("/404");return}const E=p.params.slug,f=await fetch(`/api/public/pages/${E}`);if(f.ok){const m=await f.json();if(m.data){e.value=m.data,e.value.seo_title?document.title=e.value.seo_title:document.title=e.value.title;let c=document.querySelector('meta[name="description"]');if(c||(c=document.createElement("meta"),c.setAttribute("name","description"),document.head.appendChild(c)),e.value.seo_description&&c.setAttribute("content",e.value.seo_description),e.value.seo_keywords){let d=document.querySelector('meta[name="keywords"]');d||(d=document.createElement("meta"),d.setAttribute("name","keywords"),document.head.appendChild(d)),d.setAttribute("content",e.value.seo_keywords)}}else{o.replace("/404");return}}else if(f.status===404){o.replace("/404");return}else l.value="Ошибка загрузки страницы"}catch(i){if(console.error("Error fetching page:",i),i.message&&i.message.includes("404")){o.replace("/404");return}l.value="Ошибка загрузки страницы"}finally{t.value=!1}};H(()=>{_()});const u=n(()=>e.value?window.location.origin+"/"+e.value.slug:""),g=n(()=>e.value?e.value.seo_title?e.value.seo_title:`${e.value.title} - Lagom`:"Страница - Lagom"),x=n(()=>e.value?e.value.seo_description?e.value.seo_description:`${e.value.title} - подробная информация на сайте Lagom. Профессиональные услуги по подбору и оформлению земельных участков.`:"Информационная страница сайта Lagom."),k=n(()=>e.value?e.value.seo_keywords?e.value.seo_keywords:`${e.value.title}, информация, услуги, земельные участки, Lagom`:"страница, информация"),b=n(()=>""),S=n(()=>e.value?{"@context":"https://schema.org","@type":"WebPage",name:e.value.title,description:x.value,url:u.value}:null);return{page:e,loading:t,error:l,canonicalUrl:u,ogImage:b,pageSchema:S,pageTitle:g,pageDescription:x,pageKeywords:k}}},V={class:"page-content"},j={key:1,class:"flex items-center justify-center py-12"},I={key:2,class:"w-full max-w-[1200px] mx-auto px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},K={class:"text-center"},M={class:"text-muted-foreground mb-6"},O={key:3,class:"w-full max-w-[1200px] mx-auto px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},q={class:"mb-8"},U={class:"text-3xl sm:text-4xl md:text-5xl font-semibold text-foreground mb-4"},W=["innerHTML"],G={key:1,class:"text-muted-foreground"};function z(p,o,e,t,l,_){const u=w("SEOHead"),g=w("router-link");return s(),r("div",V,[t.page?(s(),P(u,{key:0,title:t.pageTitle,description:t.pageDescription,keywords:t.pageKeywords,"og-image":t.ogImage,canonical:t.canonicalUrl,schema:t.pageSchema},null,8,["title","description","keywords","og-image","canonical","schema"])):y("",!0),t.loading?(s(),r("div",j,[...o[0]||(o[0]=[a("div",{class:"text-muted-foreground"},"Загрузка...",-1)])])):t.error?(s(),r("div",I,[a("div",K,[o[2]||(o[2]=a("h1",{class:"text-3xl font-semibold text-foreground mb-4"},"Страница не найдена",-1)),a("p",M,h(t.error),1),C(g,{to:"/",class:"inline-block px-6 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors"},{default:D(()=>[...o[1]||(o[1]=[B(" Вернуться на главную ",-1)])]),_:1})])])):t.page?(s(),r("article",O,[a("header",q,[a("h1",U,h(t.page.title),1)]),t.page.content?(s(),r("div",{key:0,class:"prose prose-lg max-w-none",innerHTML:t.page.content},null,8,W)):(s(),r("div",G,[...o[3]||(o[3]=[a("p",null,"Содержимое страницы пока не добавлено.",-1)])]))])):y("",!0)])}const Y=L(R,[["render",z],["__scopeId","data-v-8576967c"]]);export{Y as default};
