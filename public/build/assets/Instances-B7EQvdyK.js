import{_ as v,c as r,b as e,d as c,a as x,w as p,t as l,F as _,k as b,h as f,j as h,r as w,o as a,f as y}from"./app-FjcLdKxM.js";import{a as k,d as B}from"./api-V9GPpd21.js";import{S as m}from"./sweetalert2.esm.all-C0u8rGqG.js";const C={name:"DecisionInstances",setup(){const d=f(!1),t=f(null),u=f([]),s=async()=>{d.value=!0,t.value=null;try{const o=await k("/instances");if(!o.ok)throw new Error("Ошибка загрузки экземпляров");const i=await o.json();u.value=i.data||[]}catch(o){t.value=o.message||"Ошибка загрузки экземпляров",console.error("Error fetching instances:",o)}finally{d.value=!1}},g=async o=>{if((await m.fire({title:"Удалить экземпляр?",text:`Вы уверены, что хотите удалить экземпляр "${o.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Да, удалить",cancelButtonText:"Отмена",confirmButtonColor:"#dc2626"})).isConfirmed)try{if(!(await B(`/instances/${o.id}`)).ok)throw new Error("Ошибка удаления экземпляра");await m.fire({title:"Экземпляр удален",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await s()}catch(n){await m.fire({title:"Ошибка",text:n.message||"Ошибка удаления экземпляра",icon:"error",confirmButtonText:"ОК"})}};return h(()=>{s()}),{loading:d,error:t,instances:u,fetchInstances:s,deleteInstance:g}}},j={class:"instances-page space-y-6"},I={class:"flex items-center justify-between"},E={class:"flex items-center gap-3"},N={key:0,class:"flex items-center justify-center py-12"},T={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},V={class:"text-destructive"},D={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},S={class:"divide-y divide-border"},F={class:"flex-1"},G={class:"font-medium text-foreground"},L={class:"text-sm text-muted-foreground"},M={class:"flex items-center gap-2"},q=["onClick"],z={key:3,class:"text-center py-12 bg-card rounded-lg border border-border"};function A(d,t,u,s,g,o){const i=w("router-link");return a(),r("div",j,[e("div",I,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Экземпляры"),e("p",{class:"text-muted-foreground mt-1"},"Управление экземплярами для услуг")],-1)),e("div",E,[x(i,{to:{name:"admin.decisions.instances.create"},class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"},{default:p(()=>[...t[0]||(t[0]=[e("span",null,"+",-1),e("span",null,"Создать экземпляр",-1)])]),_:1})])]),s.loading?(a(),r("div",N,[...t[2]||(t[2]=[e("p",{class:"text-muted-foreground"},"Загрузка экземпляров...",-1)])])):c("",!0),s.error?(a(),r("div",T,[e("p",V,l(s.error),1)])):c("",!0),!s.loading&&s.instances.length>0?(a(),r("div",D,[e("div",S,[(a(!0),r(_,null,b(s.instances,n=>(a(),r("div",{key:n.id,class:"p-4 hover:bg-muted/10 transition-colors flex items-center justify-between"},[e("div",F,[e("h3",G,l(n.name),1),e("p",L," Порядок: "+l(n.order)+" | "+l(n.is_active?"Активен":"Неактивен"),1)]),e("div",M,[x(i,{to:{name:"admin.decisions.instances.edit",params:{id:n.id}},class:"px-3 py-1.5 text-sm bg-muted hover:bg-muted/80 rounded-lg transition-colors inline-block"},{default:p(()=>[...t[3]||(t[3]=[y(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:H=>s.deleteInstance(n),class:"px-3 py-1.5 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-lg transition-colors"}," Удалить ",8,q)])]))),128))])])):c("",!0),!s.loading&&s.instances.length===0?(a(),r("div",z,[...t[4]||(t[4]=[e("p",{class:"text-muted-foreground"},"Экземпляры не найдены",-1)])])):c("",!0)])}const P=v(C,[["render",A]]);export{P as default};
