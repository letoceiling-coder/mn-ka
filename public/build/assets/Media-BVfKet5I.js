import{h as j,o as p,J as ze,r as K,a as O,w as be,F as X,l as ee,i as ot,p as Y,H as Gt,K as Kt,g as R,s as I,_ as Jt,d as z,e as Ee,y as so,c as w,b as c,t as M,L as He,v as _e,C as vt,f as ro,M as ao,m as se,j as Wt,n as Lt,q as lo,x as co,z as dt}from"./app-DGcwVKox.js";import{b as $t,c as tt,a as ye,d as Qe}from"./api-DccBIR6h.js";import{F as ho}from"./index-dtDirOr8.js";import{S as D}from"./sweetalert2.esm.all-C0u8rGqG.js";/* empty css                        */const uo=()=>({getAuthHeader:()=>{const t=localStorage.getItem("token"),o={};return t&&(o.Authorization=`Bearer ${t}`),o}});function Ot(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,i)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(o),!0).forEach((function(i){G(e,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ot(Object(o)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i))}))}return e}function G(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function go(e,t){if(e==null)return{};var o,i,r=(function(a,l){if(a==null)return{};var n,h,m={},g=Object.keys(a);for(h=0;h<g.length;h++)n=g[h],l.indexOf(n)>=0||(m[n]=a[n]);return m})(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function Me(e){return(function(t){if(Array.isArray(t))return ht(t)})(e)||(function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)})(e)||(function(t,o){if(t){if(typeof t=="string")return ht(t,o);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ht(t,o)}})(e)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function ht(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var Ht,mo,Ge,P=(Ht=function(e){(function(){var t={}.hasOwnProperty;function o(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var a=typeof s;if(a==="string"||a==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var l=o.apply(null,s);l&&i.push(l)}}else if(a==="object")if(s.toString===Object.prototype.toString)for(var n in s)t.call(s,n)&&s[n]&&i.push(n);else i.push(s.toString())}}return i.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o})()},Ht(Ge={path:mo,exports:{},require:function(e,t){return(function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")})(t==null&&Ge.path)}},Ge.exports),Ge.exports),te=function(e){return function(t,o){if(!t)return e;var i;typeof t=="string"?i=t:o=t;var r=e;return i&&(r+="__"+i),r+(o?Object.keys(o).reduce((function(s,a){var l=o[a];return l&&(s+=" "+(typeof l=="boolean"?r+"--"+a:r+"--"+a+"_"+l)),s}),""):"")}};function bt(e,t,o){var i,r,s,a,l;function n(){var m=Date.now()-a;m<t&&m>=0?i=setTimeout(n,t-m):(i=null,o||(l=e.apply(s,r),s=r=null))}t==null&&(t=100);var h=function(){s=this,r=arguments,a=Date.now();var m=o&&!i;return i||(i=setTimeout(n,t)),m&&(l=e.apply(s,r),s=r=null),l};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(l=e.apply(s,r),s=r=null,clearTimeout(i),i=null)},h}bt.debounce=bt;var wt=bt,C=function(){return C=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},C.apply(this,arguments)};function ei(e,t){var o,i;return e&&t?(o=""+e+t[0].toUpperCase()+t.slice(1),i=e+"-"+t):(o=e||t,i=e||t),{name:o,classname:i}}function ti(e){return/^blob:/.test(e)}function Ut(e){return ti(e)||(function(t){return/^data:/.test(t)})(e)}function Se(e){return!!(e&&e.constructor&&e.call&&e.apply)}function W(e){return e===void 0}function it(e){return typeof e=="object"&&e!==null}function xt(e,t,o){var i={};return it(e)?(Object.keys(t).forEach((function(r){W(e[r])?i[r]=t[r]:it(t[r])?it(e[r])?i[r]=xt(e[r],t[r],o[r]):i[r]=e[r]?t[r]:o[r]:t[r]===!0||t[r]===!1?i[r]=!!e[r]:i[r]=e[r]})),i):e?t:o}function Ke(e){var t=Number(e);return Number.isNaN(t)?e:t}function Xt(e){return typeof(e=="number"||(function(t){return typeof t=="object"&&t!==null})(e)&&toString.call(e)=="[object Number]")&&!ii(e)}function ii(e){return e!=e}function oi(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var Ue=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},fo=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},Ct=function(e){this.type="move",this.directions=e},po=(function(){function e(t,o,i,r,s){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=r,this.element=o,this.anchor=s}return e.prototype.shift=function(){var t=this,o=t.element,i=t.anchor,r=t.position;if(o){var s=o.getBoundingClientRect(),a=s.left,l=s.top;return{left:r.left-a-i.left,top:r.top-l-i.top}}return{left:0,top:0}},e})(),At={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=Me(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce((function(t,o){return{clientX:t.clientX+o.clientX/e.touches.length,clientY:t.clientY+o.clientY/e.touches.length}}),{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),o=t.left,i=t.right,r=t.bottom,s=t.top;this.anchor={left:e.clientX-o,top:e.clientY-s,bottom:r-e.clientY,right:i-e.clientX}},processMove:function(e,t){var o=Me(t);if(this.touches.length){if(this.touches.length===1&&o.length===1){var i=this.$refs.draggable;this.$emit("drag",new po(e,i,{left:o[0].clientX,top:o[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=o}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};At.render=function(e,t,o,i,r,s){return p(),j("div",{ref:"draggable",class:o.classname,onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:t[3]||(t[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:t[4]||(t[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[ze(e.$slots,"default")],34)};var ut=te("vue-handler-wrapper"),ni={name:"HandlerWrapper",components:{DraggableElement:At},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,o=ei(this.horizontalPosition,this.verticalPosition);e=ut((G(t={},o.classname,!0),G(t,"disabled",this.disabled),t))}else e=ut({disabled:this.disabled});return{root:e,draggable:ut("draggable")}}},emits:["leave","enter","drag","drag-end"]};ni.render=function(e,t,o,i,r,s){var a=K("DraggableElement");return p(),j("div",{class:s.classes.root},[O(a,{class:s.classes.draggable,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:be((function(){return[ze(e.$slots,"default")]})),_:3},8,["class"])],2)};var vo=te("vue-line-wrapper"),si={name:"LineWrapper",components:{DraggableElement:At},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return vo((G(e={},this.position,!0),G(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};si.render=function(e,t,o,i,r,s){var a=K("DraggableElement");return p(),j(a,{class:s.classname,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:be((function(){return[ze(e.$slots,"default")]})),_:3},8,["class"])};var ae=["left","right","top","bottom"],bo=["left","right"],wo=["top","bottom"],xo=["left","top"],yo=["fill-area","fit-area","stencil","none"],Yt={left:0,top:0,width:0,height:0};function Nt(e,t,o){return!(o=o||["width","height","left","top"]).some((function(i){return e[i]!==t[i]}))}function le(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function Fe(e,t){return{left:e.left-t.left,top:e.top-t.top}}function H(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function Xe(e,t){var o={left:0,top:0,right:0,bottom:0};return ae.forEach((function(i){var r=t[i],s=le(e)[i];o[i]=r!==void 0&&s!==void 0?i==="left"||i==="top"?Math.max(0,r-s):Math.max(0,s-r):0})),o}function re(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function nt(e){return{left:-e.left,top:-e.top}}function q(e,t){return C(C({},e),{left:e.left+t.left,top:e.top+t.top})}function J(e,t,o,i){if(t!==1){if(o){var r=H(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(o.left-r.left)*(1-t),top:e.top+e.height*(1-t)/2+(o.top-r.top)*(1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function _(e){return e.width/e.height}function Te(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function De(e,t){var o={left:0,top:0},i=Xe(e,t);return i.left&&i.left>0?o.left=i.left:i.right&&i.right>0&&(o.left=-i.right),i.top&&i.top>0?o.top=i.top:i.bottom&&i.bottom>0&&(o.top=-i.bottom),o}function gt(e,t){var o;return t.minimum&&e<t.minimum?o=t.minimum:t.maximum&&e>t.maximum&&(o=t.maximum),o}function ri(e,t){var o=_(e),i=_(t);return t.width<1/0&&t.height<1/0?o>i?{width:t.width,height:t.width/o}:{width:t.height*o,height:t.height}:t.width<1/0?{width:t.width,height:t.width/o}:t.height<1/0?{width:t.height*o,height:t.height}:e}function ai(e,t){var o=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(o))+Math.abs(e.height*Math.sin(o)),height:Math.abs(e.width*Math.sin(o))+Math.abs(e.height*Math.cos(o))}}function ve(e,t){var o=t*Math.PI/180;return{left:e.left*Math.cos(o)-e.top*Math.sin(o),top:e.left*Math.sin(o)+e.top*Math.cos(o)}}function st(e,t){var o=Xe(U(e,t),t);return o.left+o.right+o.top+o.bottom?o.left+o.right>o.top+o.bottom?Math.min((e.width+o.left+o.right)/e.width,Te(e,t)):Math.min((e.height+o.top+o.bottom)/e.height,Te(e,t)):1}function U(e,t,o){o===void 0&&(o=!1);var i=De(e,t);return q(e,o?nt(i):i)}function yt(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function Mo(e,t){return C(C({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function li(e,t,o){o===void 0&&(o=!0);var i={};return ae.forEach((function(r){var s=e[r],a=t[r];s!==void 0&&a!==void 0?i[r]=r==="left"||r==="top"?o?Math.max(s,a):Math.min(s,a):o?Math.min(s,a):Math.max(s,a):a!==void 0?i[r]=a:s!==void 0&&(i[r]=s)})),i}function rt(e,t){return li(e,t,!0)}function Vt(e){var t=e.size,o=e.aspectRatio,i=e.ignoreMinimum,r=e.sizeRestrictions;return!!((t.correctRatio||_(t)>=o.minimum&&_(t)<=o.maximum)&&t.height<=r.maxHeight&&t.width<=r.maxWidth&&t.width&&t.height&&(i||t.height>=r.minHeight&&t.width>=r.minWidth))}function qt(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function me(e){var t=e.width,o=e.height,i=e.sizeRestrictions,r={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},s={width:Math.max(i.minWidth,Math.min(i.maxWidth,t)),height:Math.max(i.minHeight,Math.min(i.maxHeight,o))};function a(h,m){return m===void 0&&(m=!1),h.reduce((function(g,b){return Vt({size:b,aspectRatio:r,sizeRestrictions:i,ignoreMinimum:m})&&(!g||qt(b,{width:t,height:o})<qt(g,{width:t,height:o}))?b:g}),null)}var l=[];r&&[r.minimum,r.maximum].forEach((function(h){h&&l.push({width:s.width,height:s.width/h,correctRatio:!0},{width:s.height*h,height:s.height,correctRatio:!0})})),Vt({size:s,aspectRatio:r,sizeRestrictions:i})&&l.push(s);var n=a(l)||a(l,!0);return n&&{width:n.width,height:n.height}}function Mt(e){var t=e.event,o=e.coordinates,i=e.positionRestrictions,r=i===void 0?{}:i,s=q(o,t.directions);return q(s,De(s,r))}function zo(e){var t=e.coordinates,o=e.transform,i=e.imageSize,r=e.sizeRestrictions,s=e.positionRestrictions,a=e.aspectRatio,l=e.visibleArea,n=function(m,g){return Mt({coordinates:m,positionRestrictions:s,event:new Ct({left:g.left-m.left,top:g.top-m.top})})},h=C({},t);return(Array.isArray(o)?o:[o]).forEach((function(m){var g={};W((g=typeof m=="function"?m({coordinates:h,imageSize:i,visibleArea:l}):m).width)&&W(g.height)||(h=(function(b,x){var k=C(C(C({},b),me({width:x.width,height:x.height,sizeRestrictions:r,aspectRatio:a})),{left:0,top:0});return n(k,{left:b.left,top:b.top})})(h,C(C({},h),g))),W(g.left)&&W(g.top)||(h=n(h,C(C({},h),g)))})),h}function Co(e){e.event;var t=e.getAreaRestrictions,o=e.boundaries,i=e.coordinates,r=e.visibleArea;e.aspectRatio;var s=e.stencilSize,a=e.sizeRestrictions,l=e.positionRestrictions;e.stencilReference;var n,h,m,g=C({},i),b=C({},r),x=C({},s);n=_(x),h=_(g),m===void 0&&(m=.001),(n===0||h===0?Math.abs(h-n)<m:Math.abs(h/n)<1+m&&Math.abs(h/n)>1-m)||(g=C(C({},g),me({sizeRestrictions:a,width:g.width,height:g.height,aspectRatio:{minimum:_(x),maximum:_(x)}})));var k=st(b=J(b,g.width*o.width/(b.width*x.width)),t({visibleArea:b,type:"resize"}));return k!==1&&(b=J(b,k),g=J(g,k)),b=U(b=q(b,Fe(H(g),H(b))),t({visibleArea:b,type:"move"})),{coordinates:g=U(g,rt(le(b),l)),visibleArea:b}}function Ao(e){var t=e.event,o=e.getAreaRestrictions,i=e.boundaries,r=e.coordinates,s=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var a=e.positionRestrictions;e.stencilReference;var l=C({},r),n=C({},s);if(r&&s&&t.type!=="manipulateImage"){var h={width:0,height:0};n.width,i.width,_(i)>_(l)?(h.height=.8*i.height,h.width=h.height*_(l)):(h.width=.8*i.width,h.height=h.width*_(l));var m=st(n=J(n,l.width*i.width/(n.width*h.width)),o({visibleArea:n,type:"resize"}));n=J(n,m),m!==1&&(h.height/=m,h.width/=m),n=U(n=q(n,Fe(H(l),H(n))),o({visibleArea:n,type:"move"})),l=U(l,rt(le(n),a))}return{coordinates:l,visibleArea:n}}function Ro(e){var t=e.event,o=e.coordinates,i=e.visibleArea,r=e.getAreaRestrictions,s=C({},i),a=C({},o);if(t.type==="setCoordinates"){var l=Math.max(0,a.width-s.width),n=Math.max(0,a.height-s.height);l>n?s=J(s,Math.min(a.width/s.width,Te(s,r({visibleArea:s,type:"resize"})))):n>l&&(s=J(s,Math.min(a.height/s.height,Te(s,r({visibleArea:s,type:"resize"}))))),s=U(s=q(s,nt(De(a,le(s)))),r({visibleArea:s,type:"move"}))}return{visibleArea:s,coordinates:a}}function ko(e){var t=e.imageSize,o=e.visibleArea,i=e.coordinates,r=o||t;return{left:(o?o.left:0)+r.width/2-i.width/2,top:(o?o.top:0)+r.height/2-i.height/2}}function So(e){var t=e.imageSize,o=e.visibleArea,i=e.aspectRatio,r=e.sizeRestrictions,s=o||t,a=Math.min(i.maximum||1/0,Math.max(i.minimum||0,_(s))),l=s.width<s.height?{width:.8*s.width,height:.8*s.width/a}:{height:.8*s.height,width:.8*s.height*a};return me(C(C({},l),{aspectRatio:i,sizeRestrictions:r}))}function Eo(e){var t,o,i=e.imageSize,r=e.visibleArea,s=e.boundaries,a=e.aspectRatio,l=e.sizeRestrictions,n=e.stencilSize,h=r||i;return _(h)>_(s)?o=(t=n.height*h.height/s.height)*_(n):t=(o=n.width*h.width/s.width)/_(n),me({width:o,height:t,aspectRatio:a,sizeRestrictions:l})}function _o(e){var t=e.getAreaRestrictions,o=e.coordinates,i=e.imageSize,r=_(e.boundaries);if(o){var s={height:Math.max(o.height,i.height),width:Math.max(o.width,i.width)},a=ri({width:_(s)>r?s.width:s.height*r,height:_(s)>r?s.width/r:s.height},yt(t())),l={left:o.left+o.width/2-a.width/2,top:o.top+o.height/2-a.height/2,width:a.width,height:a.height},n=Xe(o,le(C({left:0,top:0},i))),h={};return!n.left&&!n.right&&l.width<=i.width&&(h.left=0,h.right=i.width),!n.top&&!n.bottom&&l.height<=i.height&&(h.top=0,h.bottom=i.height),U(l,h)}var m=_(i);return a={height:m>r?i.height:i.width/r,width:m>r?i.height*r:i.width},{left:i.width/2-a.width/2,top:i.height/2-a.height/2,width:a.width,height:a.height}}function Je(e,t){return li(e,le(t))}function Fo(e){var t=e.event,o=e.coordinates,i=e.visibleArea,r=e.sizeRestrictions,s=e.getAreaRestrictions,a=e.positionRestrictions,l=e.adjustStencil,n=t.scale,h=t.move,m=C({},i),g=C({},o),b=1,x=1,k=n.factor&&Math.abs(n.factor-1)>.001;m=q(m,{left:h.left||0,top:h.top||0});var S={stencil:{minimum:Math.max(r.minWidth?r.minWidth/g.width:0,r.minHeight?r.minHeight/g.height:0),maximum:Math.min(r.maxWidth?r.maxWidth/g.width:1/0,r.maxHeight?r.maxHeight/g.height:1/0,Te(g,a))},area:{maximum:Te(m,s({visibleArea:m,type:"resize"}))}};n.factor&&k&&(n.factor<1?(x=Math.max(n.factor,S.stencil.minimum))>1&&(x=1):n.factor>1&&(x=Math.min(n.factor,Math.min(S.area.maximum,S.stencil.maximum)))<1&&(x=1)),x&&(m=J(m,x,n.center));var T=o.left-i.left,N=i.width+i.left-(o.width+o.left),ie=o.top-i.top,ce=i.height+i.top-(o.height+o.top);return m=U(m=q(m,De(m,{left:a.left!==void 0?a.left-T*x:void 0,top:a.top!==void 0?a.top-ie*x:void 0,bottom:a.bottom!==void 0?a.bottom+ce*x:void 0,right:a.right!==void 0?a.right+N*x:void 0})),s({visibleArea:m,type:"move"})),g.width=g.width*x,g.height=g.height*x,g.left=m.left+T*x,g.top=m.top+ie*x,g=U(g,rt(le(m),a)),n.factor&&k&&l&&(n.factor>1?b=Math.min(S.area.maximum,n.factor)/x:n.factor<1&&(b=Math.max(g.height/m.height,g.width/m.width,n.factor/x)),b!==1&&(m=q(m=U(m=J(m,b,n.factor>1?n.center:H(g)),s({visibleArea:m,type:"move"})),nt(De(g,le(m)))))),{coordinates:g,visibleArea:m}}function To(e){var t=e.aspectRatio,o=e.getAreaRestrictions,i=e.coordinates,r=e.visibleArea,s=e.sizeRestrictions,a=e.positionRestrictions,l=e.imageSize,n=e.previousImageSize,h=e.angle,m=C({},i),g=C({},r),b=ve(H(C({left:0,top:0},n)),h);return(m=C(C({},me({sizeRestrictions:s,aspectRatio:t,width:m.width,height:m.height})),ve(H(m),h))).left-=b.left-l.width/2+m.width/2,m.top-=b.top-l.height/2+m.height/2,g=J(g,st(g,o({visibleArea:g,type:"resize"}))),{coordinates:m=U(m,a),visibleArea:g=U(g=q(g,Fe(H(m),H(i))),o({visibleArea:g,type:"move"}))}}function Do(e){var t=e.flip,o=e.previousFlip,i=e.rotate,r=e.getAreaRestrictions,s=e.coordinates,a=e.visibleArea,l=e.imageSize,n=C({},s),h=C({},a),m=o.horizontal!==t.horizontal,g=o.vertical!==t.vertical;if(m||g){var b=ve({left:l.width/2,top:l.height/2},-i),x=ve(H(n),-i),k=ve({left:m?b.left-(x.left-b.left):x.left,top:g?b.top-(x.top-b.top):x.top},i);n=q(n,Fe(k,H(n))),x=ve(H(h),-i),h=U(h=q(h,Fe(k=ve({left:m?b.left-(x.left-b.left):x.left,top:g?b.top-(x.top-b.top):x.top},i),H(h))),r({visibleArea:h,type:"move"}))}return{coordinates:n,visibleArea:h}}function Zt(e){var t=e.directions,o=e.coordinates,i=e.positionRestrictions,r=i===void 0?{}:i,s=e.sizeRestrictions,a=e.preserveRatio,l=e.compensate,n=C({},t),h=re(o,n).width,m=re(o,n).height;h<0&&(n.left<0&&n.right<0?(n.left=-(o.width-s.minWidth)/(n.left/n.right),n.right=-(o.width-s.minWidth)/(n.right/n.left)):n.left<0?n.left=-(o.width-s.minWidth):n.right<0&&(n.right=-(o.width-s.minWidth))),m<0&&(n.top<0&&n.bottom<0?(n.top=-(o.height-s.minHeight)/(n.top/n.bottom),n.bottom=-(o.height-s.minHeight)/(n.bottom/n.top)):n.top<0?n.top=-(o.height-s.minHeight):n.bottom<0&&(n.bottom=-(o.height-s.minHeight)));var g=Xe(re(o,n),r);l&&(g.left&&g.left>0&&g.right===0?(n.right+=g.left,n.left-=g.left):g.right&&g.right>0&&g.left===0&&(n.left+=g.right,n.right-=g.right),g.top&&g.top>0&&g.bottom===0?(n.bottom+=g.top,n.top-=g.top):g.bottom&&g.bottom>0&&g.top===0&&(n.top+=g.bottom,n.bottom-=g.bottom),g=Xe(re(o,n),r));var b={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(ae.forEach((function(S){var T=g[S];T&&n[S]&&(b[S]=Math.max(0,1-T/n[S]))})),a){var x=Math.min.apply(null,ae.map((function(S){return b[S]})));x!==1/0&&ae.forEach((function(S){n[S]*=x}))}else ae.forEach((function(S){b[S]!==1/0&&(n[S]*=b[S])}));if(h=re(o,n).width,m=re(o,n).height,n.right+n.left&&(h>s.maxWidth?b.width=(s.maxWidth-o.width)/(n.right+n.left):h<s.minWidth&&(b.width=(s.minWidth-o.width)/(n.right+n.left))),n.bottom+n.top&&(m>s.maxHeight?b.height=(s.maxHeight-o.height)/(n.bottom+n.top):m<s.minHeight&&(b.height=(s.minHeight-o.height)/(n.bottom+n.top))),a){var k=Math.min(b.width,b.height);k!==1/0&&ae.forEach((function(S){n[S]*=k}))}else b.width!==1/0&&bo.forEach((function(S){n[S]*=b.width})),b.height!==1/0&&wo.forEach((function(S){n[S]*=b.height}));return n}function $e(e,t,o){return t==0&&o==0?e/2:t==0?0:o==0?e:e*Math.abs(t/(t+o))}var jo=te("vue-simple-handler"),Bo=te("vue-simple-handler-wrapper"),Rt={name:"SimpleHandler",components:{HandlerWrapper:ni},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(G(e={},this.horizontalPosition,!!this.horizontalPosition),G(e,this.verticalPosition,!!this.verticalPosition),G(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),G(e,"hover",this.hover),e);return{default:P(jo(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:P(Bo(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Rt.render=function(e,t,o,i,r,s){var a=K("HandlerWrapper");return p(),j(a,{class:s.classes.wrapper,"vertical-position":o.verticalPosition,"horizontal-position":o.horizontalPosition,disabled:o.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:be((function(){return[O("div",{class:s.classes.default},null,2)]})),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Po=te("vue-simple-line"),Io=te("vue-simple-line-wrapper"),kt={name:"SimpleLine",components:{LineWrapper:si},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:P(Po(G({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:P(Io(G({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};kt.render=function(e,t,o,i,r,s){var a=K("LineWrapper");return p(),j(a,{class:s.classes.wrapper,position:o.position,disabled:o.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:be((function(){return[O("div",{class:s.classes.root},null,2)]})),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var mt=te("vue-bounding-box"),Wo=["east","west",null],Lo=["south","north",null],ci={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Rt}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return kt}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return Wo.forEach((function(t){Lo.forEach((function(o){if(t!==o){var i=ei(t,o),r=i.name,s=i.classname;e.push({name:r,classname:s,verticalDirection:o,horizontalDirection:t})}}))})),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,o=this.linesClasses,i=this.linesWrappersClasses;return{root:mt(),handlers:e,handlersWrappers:t,lines:o,linesWrappers:i}},lineNodes:function(){var e=this,t=[];return this.points.forEach((function(o){o.horizontalDirection&&o.verticalDirection||!e.lines[o.name]||t.push({name:o.name,component:e.linesComponent,class:P(e.classes.lines.default,e.classes.lines[o.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:P(e.classes.linesWrappers.default,e.classes.linesWrappers[o.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:o.verticalDirection,horizontalDirection:o.horizontalDirection,disabled:!e.resizable})})),t},handlerNodes:function(){var e=this,t=[],o=this.width,i=this.height;return this.points.forEach((function(r){if(e.handlers[r.name]){var s={name:r.name,component:e.handlersComponent,class:P(e.classes.handlers.default,e.classes.handlers[r.name]),wrapperClass:P(e.classes.handlersWrappers.default,e.classes.handlersWrappers[r.name]),hoverClass:e.classes.handlers.hover,verticalDirection:r.verticalDirection,horizontalDirection:r.horizontalDirection,disabled:!e.resizable};if(o&&i){var a=r.horizontalDirection,l=r.verticalDirection,n=a==="east"?o:a==="west"?0:o/2,h=l==="south"?i:l==="north"?0:i/2;s.wrapperClass=mt("handler"),s.wrapperStyle={transform:"translate(".concat(n,"px, ").concat(h,"px)")},e.transitions&&e.transitions.enabled&&(s.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else s.wrapperClass=mt("handler",G({},r.classname,!0));t.push(s)}})),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,o){var i,r=e.shift(),s=r.left,a=r.top,l={left:0,right:0,top:0,bottom:0};t==="west"?l.left-=s:t==="east"&&(l.right+=s),o==="north"?l.top-=a:o==="south"&&(l.bottom+=a),!o&&t?i="width":o&&!t&&(i="height"),this.resizable&&this.$emit("resize",new fo(l,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:o==="south"||!o,top:o==="north"||!o},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"]};ci.render=function(e,t,o,i,r,s){return p(),j("div",{ref:"box",class:s.classes.root,style:s.style},[ze(e.$slots,"default"),O("div",null,[(p(!0),j(X,null,ee(s.lineNodes,(function(a){return p(),j(ot(a.component),{key:a.name,"default-class":a.class,"hover-class":a.hoverClass,"wrapper-class":a.wrapperClass,position:a.name,disabled:a.disabled,onDrag:function(l){return s.onHandlerDrag(l,a.horizontalDirection,a.verticalDirection)},onDragEnd:t[1]||(t[1]=function(l){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])})),128))]),(p(!0),j(X,null,ee(s.handlerNodes,(function(a){return p(),j("div",{key:a.name,style:a.wrapperStyle,class:a.wrapperClass},[(p(),j(ot(a.component),{"default-class":a.class,"hover-class":a.hoverClass,"wrapper-class":a.wrapperClass,"horizontal-position":a.horizontalDirection,"vertical-position":a.verticalDirection,disabled:a.disabled,onDrag:function(l){return s.onHandlerDrag(l,a.horizontalDirection,a.verticalDirection)},onDragEnd:t[2]||(t[2]=function(l){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)})),128))],6)};var Oo=te("vue-draggable-area"),di={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Oo()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=Me(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):oi({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),o=t.left,i=t.top;this.anchor={x:e.clientX-o,y:e.clientY-i}},processMove:function(e,t){var o=Me(t);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),r=i.left,s=i.top;this.touches.length===1&&o.length===1&&this.$emit("move",new Ct({left:o[0].clientX-(r+this.anchor.x),top:o[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};di.render=function(e,t,o,i,r,s){return p(),j("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[ze(e.$slots,"default")],544)};function ft(e){var t,o;return{rotate:e.rotate||0,flip:{horizontal:((t=e?.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((o=e?.flip)===null||o===void 0?void 0:o.vertical)||!1}}}function Ho(e){return new Promise((function(t,o){try{if(e)if(/^data:/i.test(e))t((function(n){n=n.replace(/^data:([^;]+);base64,/gim,"");for(var h=atob(n),m=h.length,g=new ArrayBuffer(m),b=new Uint8Array(g),x=0;x<m;x++)b[x]=h.charCodeAt(x);return g})(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(n){t(n.target.result)},s=e,a=function(n){i.readAsArrayBuffer(n)},(l=new XMLHttpRequest).open("GET",s,!0),l.responseType="blob",l.onload=function(){this.status!=200&&this.status!==0||a(this.response)},l.send()}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===4&&(r.status===200||r.status===0?t(r.response):o("Warning: could not load an image to parse its orientation"),r=null)},r.onprogress=function(){r.getResponseHeader("content-type")!=="image/jpeg"&&r.abort()},r.withCredentials=!1,r.open("GET",e,!0),r.responseType="arraybuffer",r.send(null)}else o("Error: the image is empty")}catch(n){o(n)}var s,a,l}))}function hi(e){var t=e.rotate,o=e.flip,i=e.scaleX,r=e.scaleY,s="";return s+=" rotate("+t+"deg) ",s+=" scaleX("+i*(o.horizontal?-1:1)+") ",s+=" scaleY("+r*(o.vertical?-1:1)+") "}function Uo(e){try{var t,o=new DataView(e),i=void 0,r=void 0,s=void 0,a=void 0;if(o.getUint8(0)===255&&o.getUint8(1)===216)for(var l=o.byteLength,n=2;n+1<l;){if(o.getUint8(n)===255&&o.getUint8(n+1)===225){s=n;break}n++}if(s&&(i=s+10,(function(x,k,S){var T,N="";for(T=k,S+=k;T<S;T++)N+=String.fromCharCode(x.getUint8(T));return N})(o,s+4,4)==="Exif")){var h=o.getUint16(i);if(((r=h===18761)||h===19789)&&o.getUint16(i+2,r)===42){var m=o.getUint32(i+4,r);m>=8&&(a=i+m)}}if(a){for(var g=o.getUint16(a,r),b=0;b<g;b++)if(n=a+12*b+2,o.getUint16(n,r)===274){n+=8,t=o.getUint16(n,r),o.setUint16(n,1,r);break}}return t}catch{return null}}function Qt(e,t){var o=t.getBoundingClientRect(),i=o.left,r=o.top,s={left:0,top:0},a=0;return e.forEach((function(l){s.left+=(l.clientX-i)/e.length,s.top+=(l.clientY-r)/e.length})),e.forEach((function(l){a+=oi({x:s.left,y:s.top},{x:l.clientX-i,y:l.clientY-r})})),{centerMass:s,spread:a,count:e.length}}var ui={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=wt(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new Ue({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var o=Qt(t,this.$refs.container),i=this.oldGeometricProperties;i.count===o.count&&i.count>1&&this.$emit("resize",new Ue({left:i.centerMass.left-o.centerMass.left,top:i.centerMass.top-o.centerMass.top},{factor:i.spread/o.spread,center:o.centerMass})),this.oldGeometricProperties=o}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,o=t.getBoundingClientRect(),i=o.left,r=o.top,s=o.bottom,a=o.right;this.touches=Me(e.touches).filter((function(l){return l.clientX>i&&l.clientX<a&&l.clientY>r&&l.clientY<s})),this.oldGeometricProperties=Qt(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var o=Me(e.touches).filter((function(i){return!i.identifier||t.touches.find((function(r){return r.identifier===i.identifier}))}));this.processEvent(e)&&(this.processMove(e,o),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),o=t.left,i=t.top,r=1+this.wheelResize.ratio*(a=e.deltaY||e.detail||e.wheelDelta,(l=+a)==0||ii(l)?l:l>0?1:-1),s={left:e.clientX-o,top:e.clientY-i};this.$emit("resize",new Ue({},{factor:r,center:s})),this.touches.length||this.debouncedProcessEnd()}var a,l}},emits:["resize","move","transform-end"]};ui.render=function(e,t,o,i,r,s){return p(),j("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:t[3]||(t[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[ze(e.$slots,"default")],544)};var zt={components:{TransformableImage:ui},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};zt.render=function(e,t,o,i,r,s){var a=K("transformable-image");return p(),j(a,{"touch-move":o.touchMove,"touch-resize":o.touchResize,"mouse-move":o.mouseMove,"wheel-resize":o.wheelResize,onMove:t[1]||(t[1]=function(l){return e.$emit("move",l)}),onResize:t[2]||(t[2]=function(l){return e.$emit("resize",l)})},{default:be((function(){return[ze(e.$slots,"default")]})),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var et=te("vue-preview"),gi={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:et({fill:this.fill}),wrapper:et("wrapper"),imageWrapper:et("image-wrapper"),image:P(et("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=E(E({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),o=this.imageSize.width,i=this.imageSize.height,r=ai({width:o,height:i},t.rotate),s={width:"".concat(o,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},a={rotate:{left:(o-r.width)*t.scaleX/2,top:(i-r.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*o/2,top:(1-t.scaleY)*i/2}};return s.transform=`translate(
				`.concat(-this.coordinates.left/e-a.rotate.left-a.scale.left,"px,").concat(-this.coordinates.top/e-a.rotate.top-a.scale.top,"px) ")+hi(t),this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){e.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};gi.render=function(e,t,o,i,r,s){return p(),j("div",{ref:"root",class:s.classes.root,style:s.style},[O("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[Y(O("img",{ref:"image",src:o.image&&o.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[Gt,o.image&&o.image.src]])],6)],6)};var mi={components:{Preview:gi},inheritAttrs:!1};mi.render=function(e,t,o,i,r,s){var a=K("preview");return p(),j(a,Kt(e.$attrs,{fill:!0}),null,16)};var pt=te("vue-rectangle-stencil"),fi={name:"RectangleStencil",components:{StencilPreview:mi,BoundingBox:ci,DraggableArea:di},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Rt}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return kt}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:P(pt({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:P(pt("preview"),this.previewClass),boundingBox:P(pt("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,o=e.width,i=e.left,r=e.top,s={width:"".concat(o,"px"),height:"".concat(t,"px"),transform:"translate(".concat(i,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};fi.render=function(e,t,o,i,r,s){var a=K("stencil-preview"),l=K("draggable-area"),n=K("bounding-box");return p(),j("div",{class:s.classes.stencil,style:s.style},[O(n,{width:o.stencilCoordinates.width,height:o.stencilCoordinates.height,transitions:o.transitions,class:s.classes.boundingBox,handlers:o.handlers,"handlers-component":o.handlersComponent,"handlers-classes":o.handlersClasses,"handlers-wrappers-classes":o.handlersWrappersClasses,lines:o.lines,"lines-component":o.linesComponent,"lines-classes":o.linesClasses,"lines-wrappers-classes":o.linesWrappersClasses,resizable:o.resizable,onResize:s.onResize,onResizeEnd:s.onResizeEnd},{default:be((function(){return[O(l,{movable:o.movable,onMove:s.onMove,onMoveEnd:s.onMoveEnd},{default:be((function(){return[O(a,{image:o.image,coordinates:o.coordinates,width:o.stencilCoordinates.width,height:o.stencilCoordinates.height,class:s.classes.preview,transitions:o.transitions},null,8,["image","coordinates","width","height","class","transitions"])]})),_:1},8,["movable","onMove","onMoveEnd"])]})),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Xo=["transitions"],ge=te("vue-advanced-cropper"),pi={name:"Cropper",components:{BackgroundWrapper:zt},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return fi}},backgroundWrapperComponent:{type:[Object,String],default:function(){return zt}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return yo.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,o=e.coordinates,i=e.aspectRatio,r=e.positionRestrictions,s=e.sizeRestrictions,a=C(C({},o),{right:o.left+o.width,bottom:o.top+o.height}),l=t.params||{},n=C({},t.directions),h=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};s.widthFrozen&&(n.left=0,n.right=0),s.heightFrozen&&(n.top=0,n.bottom=0),ae.forEach((function(Q){h[Q]||(n[Q]=0)}));var m=re(a,n=Zt({coordinates:a,directions:n,sizeRestrictions:s,positionRestrictions:r})).width,g=re(a,n).height,b=l.preserveRatio?_(a):gt(m/g,i);if(b){var x=l.respectDirection;if(x||(x=a.width>=a.height||b===1?"width":"height"),x==="width"){var k=m/b-a.height;if(h.top&&h.bottom){var S=n.top,T=n.bottom;n.bottom=$e(k,T,S),n.top=$e(k,S,T)}else h.bottom?n.bottom=k:h.top?n.top=k:h.right?n.right=0:h.left&&(n.left=0)}else if(x==="height"){var N=a.width-g*b;if(h.left&&h.right){var ie=n.left,ce=n.right;n.left=-$e(N,ie,ce),n.right=-$e(N,ce,ie)}else h.left?n.left=-N:h.right?n.right=-N:h.top?n.top=0:h.bottom&&(n.bottom=0)}n=Zt({directions:n,coordinates:a,sizeRestrictions:s,positionRestrictions:r,preserveRatio:!0,compensate:l.compensate})}return m=re(a,n).width,g=re(a,n).height,(b=l.preserveRatio?_(a):gt(m/g,i))&&Math.abs(b-m/g)>.001&&ae.forEach((function(Q){h[Q]||(n[Q]=0)})),Mt({event:new Ct({left:-n.left,top:-n.top}),coordinates:{width:o.width+n.right+n.left,height:o.height+n.top+n.bottom,left:o.left,top:o.top},positionRestrictions:r})}},moveAlgorithm:{type:Function,default:Mt},initStretcher:{type:Function,default:function(e){var t=e.stretcher,o=e.imageSize,i=_(o);t.style.width=o.width+"px",t.style.height=t.clientWidth/i+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,o=e.coordinates,i=e.aspectRatio,r=e.sizeRestrictions,s=e.positionRestrictions,a=C(C({},o),me({width:o.width,height:o.height,aspectRatio:i,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,r.minHeight),minWidth:Math.min(t.width,r.minWidth)}}));return a=U(a=q(a,Fe(H(o),H(a))),rt(le(t),s))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,o=e.boundaries,i=e.getAreaRestrictions,r=e.coordinates,s=C({},t);s.height=s.width/_(o),s.top+=(t.height-s.height)/2,(r.height-s.height>0||r.width-s.width>0)&&(s=J(s,Math.max(r.height/s.height,r.width/s.width)));var a=nt(De(r,le(s=J(s,st(s,i({visibleArea:s,type:"resize"}))))));return s.width<r.width&&(a.left=0),s.height<r.height&&(a.top=0),s=U(s=q(s,a),i({visibleArea:s,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,o=e.boundaries,i=e.imageSize,r=e.imageRestriction,s=e.type,a={};return r==="fill-area"?a={left:0,top:0,right:i.width,bottom:i.height}:r==="fit-area"&&(_(o)>_(i)?(a={top:0,bottom:i.height},t&&s==="move"&&(t.width>i.width?(a.left=-(t.width-i.width)/2,a.right=i.width-a.left):(a.left=0,a.right=i.width))):(a={left:0,right:i.width},t&&s==="move"&&(t.height>i.height?(a.top=-(t.height-i.height)/2,a.bottom=i.height-a.top):(a.top=0,a.bottom=i.height)))),a}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,o={};return e.imageRestriction!=="none"&&(o={left:0,top:0,right:t.width,bottom:t.height}),o}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:E({},Yt)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=(function(t){return t*Math.PI/180})(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=xt(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:xt(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:W(this.minWidth)?0:Ke(this.minWidth),minHeight:W(this.minHeight)?0:Ke(this.minHeight),maxWidth:W(this.maxWidth)?1/0:Ke(this.maxWidth),maxHeight:W(this.maxHeight)?1/0:Ke(this.maxHeight)});if(e=(function(i){var r=i.areaRestrictions,s=i.sizeRestrictions,a=i.boundaries,l=i.positionRestrictions,n=C(C({},s),{minWidth:s.minWidth!==void 0?s.minWidth:0,minHeight:s.minHeight!==void 0?s.minHeight:0,maxWidth:s.maxWidth!==void 0?s.maxWidth:1/0,maxHeight:s.maxHeight!==void 0?s.maxHeight:1/0});l.left!==void 0&&l.right!==void 0&&(n.maxWidth=Math.min(n.maxWidth,l.right-l.left)),l.bottom!==void 0&&l.top!==void 0&&(n.maxHeight=Math.min(n.maxHeight,l.bottom-l.top));var h=yt(r),m=ri(a,h);return h.width<1/0&&(!n.maxWidth||n.maxWidth>m.width)&&(n.maxWidth=Math.min(n.maxWidth,m.width)),h.height<1/0&&(!n.maxHeight||n.maxHeight>m.height)&&(n.maxHeight=Math.min(n.maxHeight,m.height)),n.minWidth>n.maxWidth&&(n.minWidth=n.maxWidth,n.widthFrozen=!0),n.minHeight>n.maxHeight&&(n.minHeight=n.maxHeight,n.heightFrozen=!0),n})({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),o=yt(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,o.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,o.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:ge(),image:P(ge("image"),this.imageClass),stencil:ge("stencil"),boundaries:P(ge("boundaries"),this.boundariesClass),stretcher:P(ge("stretcher")),background:P(ge("background"),this.backgroundClass),foreground:P(ge("foreground"),this.foregroundClass),imageWrapper:P(ge("image-wrapper")),cropperWrapper:P(ge("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,o=e.height,i=e.left,r=e.top;return{width:t/this.coefficient,height:o/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(r-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},o={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},i=E(E({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),r={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-o.left-this.imageTransforms.translateX,"px, ").concat(-t.top-o.top-this.imageTransforms.translateY,"px)")+hi(i)};return this.transitionsOptions.enabled&&(r.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),r}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick((function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(o){return e[o]!==t[o]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=wt(this.update,this.debounce),this.debouncedDisableTransitions=wt(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(E({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:E({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var o=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?E({},this.visibleArea):null,imageTransforms:t,get canvas(){return o.canvas?o.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?E({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.transitions,r=i===void 0||i;this.onManipulateImage(new Ue({},{factor:1/e,center:t}),{normalize:!1,transitions:r})},move:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.transitions,r=i===void 0||i;this.onManipulateImage(new Ue({left:e||0,top:t||0}),{normalize:!1,transitions:r})},setCoordinates:function(e){var t=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.autoZoom,r=i===void 0||i,s=o.transitions,a=s===void 0||s;this.$nextTick((function(){t.imageLoaded?(t.transitionsActive||(a&&t.enableTransitions(),t.coordinates=t.applyTransform(e),r&&t.runAutoZoom("setCoordinates"),a&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e}))},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then((function(){e.onChange()})):this.resetVisibleArea().then((function(){e.onChange()}))},reset:function(){var e=this;return this.resetVisibleArea().then((function(){e.onChange(!1)}))},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){e(),t.awaiting=!1})))},prepareResult:function(e){return this.roundResult?(function(t){var o=t.coordinates,i=t.sizeRestrictions,r=t.positionRestrictions,s={width:Math.round(o.width),height:Math.round(o.height),left:Math.round(o.left),top:Math.round(o.top)};return s.width>i.maxWidth?s.width=Math.floor(o.width):s.width<i.minWidth&&(s.width=Math.ceil(o.width)),s.height>i.maxHeight?s.height=Math.floor(o.height):s.height<i.minHeight&&(s.height=Math.ceil(o.height)),U(s,r)})(E(E({},this.getPublicProperties()),{},{positionRestrictions:Je(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,o,i){var r=this.autoZoomAlgorithm;r||(r=this.stencilSize?Co:this.autoZoom?Ao:Ro);var s=r({event:{type:e,params:i},visibleArea:t,coordinates:o,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return E(E({},s),{},{changed:!Nt(s.visibleArea,t)||!Nt(s.coordinates,o)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.transitions,i=o!==void 0&&o,r=go(t,Xo),s=this.processAutoZoom(e,this.visibleArea,this.coordinates,r),a=s.visibleArea,l=s.coordinates,n=s.changed;i&&n&&this.enableTransitions(),this.visibleArea=a,this.coordinates=l,i&&n&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return(function(t){var o=t.event,i=t.visibleArea,r=t.coefficient;if(o.type==="manipulateImage")return C(C({},o),{move:{left:o.move&&o.move.left?r*o.move.left:0,top:o.move&&o.move.top?r*o.move.top:0},scale:{factor:o.scale&&o.scale.factor?o.scale.factor:1,center:o.scale&&o.scale.center?{left:o.scale.center.left*r+i.left,top:o.scale.center.top*r+i.top}:null}});if(o.type==="resize"){var s=C(C({},o),{directions:C({},o.directions)});return ae.forEach((function(l){s.directions[l]*=r})),s}if(o.type==="move"){var a=C(C({},o),{directions:C({},o.directions)});return xo.forEach((function(l){a.directions[l]*=r})),a}return o})(E(E({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,o=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?(function(l,n,h){var m=h.rotate,g=h.flip,b={width:n.naturalWidth,height:n.naturalHeight},x=ai(b,m),k=l.getContext("2d");l.height=x.height,l.width=x.width,k.save();var S=ve(H(C({left:0,top:0},b)),m);return k.translate(-(S.left-x.width/2),-(S.top-x.height/2)),k.rotate(m*Math.PI/180),k.translate(g.horizontal?b.width:0,g.vertical?b.height:0),k.scale(g.horizontal?-1:1,g.vertical?-1:1),k.drawImage(n,0,0,b.width,b.height),k.restore(),l})(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=E({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),r=function(l){return l.find((function(n){return h=n,!Number.isNaN(parseFloat(h))&&isFinite(h);var h}))},s=me({sizeRestrictions:{minWidth:r([i.width,i.minWidth])||0,minHeight:r([i.height,i.minHeight])||0,maxWidth:r([i.width,i.maxWidth])||1/0,maxHeight:r([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&s.width*s.height>i.maxArea){var a=Math.sqrt(i.maxArea/(s.width*s.height));s={width:Math.round(a*s.width),height:Math.round(a*s.height)}}return(function(l,n,h,m,g){l.width=m?m.width:h.width,l.height=m?m.height:h.height;var b=l.getContext("2d");b.clearRect(0,0,l.width,l.height),g&&(g.imageSmoothingEnabled&&(b.imageSmoothingEnabled=g.imageSmoothingEnabled),g.imageSmoothingQuality&&(b.imageSmoothingQuality=g.imageSmoothingQuality),g.fillColor&&(b.fillStyle=g.fillColor,b.fillRect(0,0,l.width,l.height),b.save()));var x=h.left<0?-h.left:0,k=h.top<0?-h.top:0;b.drawImage(n,h.left+x,h.top+k,h.width,h.height,x*(l.width/h.width),k*(l.height/h.height),l.width,l.height)})(e,o,this.coordinates,s,i),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=this.visibleArea&&t?Mo(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&t?Je(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return zo({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:o,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?Eo:So);var o=this.sizeRestrictions;o.minWidth,o.minHeight,o.maxWidth,o.maxHeight;var i=Se(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,r=this.defaultPosition||ko,s=[i,function(a){var l=a.coordinates;return E({},Se(r)?r({coordinates:l,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,Me(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout((function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,o=this.$refs.cropper;return this.initStretcher({cropper:o,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then((function(){var i={cropper:o,imageSize:e.imageSize};if(Se(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(i):e.defaultBoundaries==="fit"?e.boundaries=(function(r){var s=r.cropper,a=r.imageSize,l=s.clientHeight,n=s.clientWidth,h=l,m=a.width*l/a.height;return m>n&&(m=n,h=a.height*n/a.width),{width:m,height:h}})(i):e.boundaries=(function(r){var s=r.cropper;return{width:s.clientWidth,height:s.clientHeight}})(i),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=E(E({},this.defaultImageTransforms),{},{flip:E({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then((function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,o,i,r,s,a,l=e.defaultVisibleArea||_o;e.visibleArea=Se(l)?l({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},o=t.visibleArea,i=t.boundaries,r=t.getAreaRestrictions,s=C({},o),a=_(i),s.width/s.height!==a&&(s.height=s.width/a),U(s,r({visibleArea:s,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")})).catch((function(){e.visibleArea=null}))},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then((function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")})).catch((function(){e.visibleArea=null}))},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if((function(r){if(Ut(r))return!1;var s=window.location,a=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(r)||[],l={protocol:a[1]||"",host:a[2]||"",port:a[3]||""},n=function(h){return h.port||((h.protocol||s.protocol)==="http"?80:433)};return!(!l.protocol&&!l.host&&!l.port||l.protocol&&l.protocol==s.protocol&&l.host&&l.host==s.host&&l.host&&n(l)==n(s))})(this.src)){var o=W(this.crossOrigin)?this.canvas:this.crossOrigin;o===!0&&(o="anonymous"),this.imageAttributes.crossOrigin=o||null}if(this.checkOrientation){var i=(e=this.src,new Promise((function(r){Ho(e).then((function(s){var a=Uo(s);r(s?{source:e,arrayBuffer:s,orientation:a}:{source:e,arrayBuffer:null,orientation:null})})).catch((function(s){console.warn(s),r({source:e,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){i.then(t.onParseImage)}),this.transitionTime)}else setTimeout((function(){t.onParseImage({source:t.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then((function(){e.$emit("ready"),e.onChange(!1)})))},onParseImage:function(e){var t=this,o=e.source,i=e.arrayBuffer,r=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&r&&r>1?ti(o)||!Ut(o)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=(function(s){for(var a=[],l=new Uint8Array(s);l.length>0;){var n=l.subarray(0,8192);a.push(String.fromCharCode.apply(null,Array.from?Array.from(n):n.slice())),l=l.subarray(8192)}return"data:image/jpeg;base64,"+btoa(a.join(""))})(i):this.imageAttributes.src=o,Se(this.defaultTransforms)?this.appliedImageTransforms=ft(this.defaultTransforms()):it(this.defaultTransforms)?this.appliedImageTransforms=ft(this.defaultTransforms):this.appliedImageTransforms=(function(s){var a=ft({});if(s)switch(s){case 2:a.flip.horizontal=!0;break;case 3:a.rotate=-180;break;case 4:a.flip.vertical=!0;break;case 5:a.rotate=90,a.flip.vertical=!0;break;case 6:a.rotate=90;break;case 7:a.rotate=90,a.flip.horizontal=!0;break;case 8:a.rotate=-90}return a})(r),this.defaultImageTransforms=E(E({},this.appliedImageTransforms),{},{flip:E({},this.appliedImageTransforms.flip)}),this.$nextTick((function(){var s=t.$refs.image;s&&s.complete&&((function(a){return!!a.naturalWidth})(s)?t.onSuccessLoadImage():t.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender((function(){t.coordinates=t.moveAlgorithm(E(E({},t.getPublicProperties()),{},{positionRestrictions:Je(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()}))},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var o=t.sizeRestrictions,i=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(E(E({},t.getPublicProperties()),{},{positionRestrictions:Je(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(o.maxWidth,t.visibleArea.width),maxHeight:Math.min(o.maxHeight,t.visibleArea.height),minWidth:Math.max(o.minWidth,i),minHeight:Math.max(o.minHeight,i)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1}))},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var o=t.transitions,i=o!==void 0&&o,r=t.normalize,s=r===void 0||r;i&&this.enableTransitions();var a=Fo(E(E({},this.getPublicProperties()),{},{event:s?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=a.visibleArea,n=a.coordinates;this.visibleArea=l,this.coordinates=n,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,o=e.type,i=o===void 0?"move":o;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:i})},getAspectRatio:function(e){var t,o,i=this.stencilProps,r=i.aspectRatio,s=i.minAspectRatio,a=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var l=this.$refs.stencil.aspectRatios();t=l.minimum,o=l.maximum}if(W(t)&&(t=W(r)?s:r),W(o)&&(o=W(r)?a:r),!e&&(W(t)||W(o))){var n=this.getStencilSize(),h=n?_(n):null;W(t)&&(t=Xt(h)?h:void 0),W(o)&&(o=Xt(h)?h:void 0)}return{minimum:t,maximum:o}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,o=e.stencilSize,i=e.aspectRatio,gt(_(r=Se(o)?o({boundaries:t,aspectRatio:i}):o),i)&&(r=me({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(r.width>t.width||r.height>t.height)&&(r=me({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:_(r),maximum:_(r)}})),r;var e,t,o,i,r},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return E({},Yt)},flip:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.transitions,r=i===void 0||i;if(!this.transitionsActive){r&&this.enableTransitions();var s=E({},this.imageTransforms.flip),a=Do({flip:{horizontal:e?!s.horizontal:s.horizontal,vertical:t?!s.vertical:s.vertical},previousFlip:s,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=a.visibleArea,n=a.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=l,this.coordinates=n,this.onChange(),r&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.transitions,i=o===void 0||o;if(!this.transitionsActive){i&&this.enableTransitions();var r=E({},this.imageSize);this.appliedImageTransforms.rotate+=e;var s=To({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:r,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=s.visibleArea,l=s.coordinates,n=this.processAutoZoom("rotateImage",a,l);a=n.visibleArea,l=n.coordinates,this.visibleArea=a,this.coordinates=l,this.onChange(),i&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Yo={key:0,ref:"canvas",style:{display:"none"}},No={key:1,ref:"sourceCanvas",style:{display:"none"}};pi.render=function(e,t,o,i,r,s){return p(),j("div",{ref:"cropper",class:s.classes.cropper},[O("div",{ref:"stretcher",class:s.classes.stretcher},null,2),O("div",{class:s.classes.boundaries,style:s.boundariesStyle},[(p(),j(ot(o.backgroundWrapperComponent),{class:s.classes.cropperWrapper,"wheel-resize":s.settings.resizeImage.wheel,"touch-resize":s.settings.resizeImage.touch,"touch-move":s.settings.moveImage.touch,"mouse-move":s.settings.moveImage.mouse,onMove:s.onManipulateImage,onResize:s.onManipulateImage},{default:be((function(){return[O("div",{class:s.classes.background,style:s.boundariesStyle},null,6),O("div",{class:s.classes.imageWrapper},[O("img",{ref:"image",crossorigin:r.imageAttributes.crossOrigin,src:r.imageAttributes.src,class:s.classes.image,style:s.imageStyle,onMousedown:t[1]||(t[1]=I((function(){}),["prevent"]))},null,46,["crossorigin","src"])],2),O("div",{class:s.classes.foreground,style:s.boundariesStyle},null,6),Y((p(),j(ot(o.stencilComponent),Kt({ref:"stencil",image:s.image,coordinates:r.coordinates,"stencil-coordinates":s.stencilCoordinates,transitions:s.transitionsOptions},o.stencilProps,{onResize:s.onResize,onResizeEnd:s.onResizeEnd,onMove:s.onMove,onMoveEnd:s.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[Gt,r.imageLoaded]]),o.canvas?(p(),j("canvas",Yo,null,512)):R("",!0),o.canvas?(p(),j("canvas",No,null,512)):R("",!0)]})),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const Vo={name:"ImageEditor",components:{Cropper:pi},props:{show:{type:Boolean,default:!1},file:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const o=z(null),i=z(""),r=z(null),s=z(1),a=z(800),l=z(600),n=z(90),h=z("image/jpeg"),m=z(!1),g=z(!1),b=z(0),x=z(0),k=z(0),S=z(0),T=z(null),N=Ee(()=>e.file?.width||800),ie=Ee(()=>e.file?.height||600);so(()=>e.file,F=>{F&&F.url&&(i.value=F.url.startsWith("http")?F.url:window.location.origin+F.url,a.value=F.width||800,l.value=F.height||600,b.value=F.width||0,x.value=F.height||0,F.extension==="png"?h.value="image/png":F.extension==="webp"?h.value="image/webp":h.value="image/jpeg")},{immediate:!0});const ce=({coordinates:F,canvas:B})=>{T.value=F,B&&(k.value=Math.round(B.width),S.value=Math.round(B.height))},Q=()=>{o.value&&o.value.zoom(s.value)},Ye=()=>{s.value=Math.min(3,s.value+.1),Q()},Ce=()=>{s.value=Math.max(.1,s.value-.1),Q()},fe=F=>{o.value&&o.value.rotate(F)},pe=(F,B)=>{o.value&&o.value.flip(F,B)},Ne=()=>{s.value=1,r.value=null,o.value&&o.value.reset()},je=()=>{o.value&&e.file&&o.value.setCoordinates({left:0,top:0,width:e.file.width||800,height:e.file.height||600})},Be=async F=>{if(!(!o.value||!e.file)){m.value=!0,g.value=!1;try{const{canvas:B}=o.value.getResult();if(!B)throw new Error("    ");let L=B;if(a.value&&l.value&&(B.width!==a.value||B.height!==l.value)){const Z=document.createElement("canvas");Z.width=a.value,Z.height=l.value,Z.getContext("2d").drawImage(B,0,0,a.value,l.value),L=Z}const Ae=await new Promise(Z=>{L.toBlob(Z,h.value,n.value/100)}),Re=new FormData;Re.append("file",Ae,e.file.original_name),Re.append("folder_id",e.file.folder_id);let oe;if(F?oe=await $t(`/media/${e.file.id}`,Re):oe=await tt("/media",Re),!oe.ok){const Z=await oe.json();throw new Error(Z.message||"  ")}t("saved",await oe.json()),$()}catch(B){console.error("[ImageEditor] Error saving image:",B),alert(B.message||"  ")}finally{m.value=!1}}},$=()=>{t("close")};return{cropperRef:o,imageUrl:i,aspectRatio:r,zoom:s,outputWidth:a,outputHeight:l,quality:n,outputFormat:h,saving:m,showSaveOptions:g,originalWidth:b,originalHeight:x,croppedWidth:k,croppedHeight:S,defaultWidth:N,defaultHeight:ie,onChange:ce,handleZoomChange:Q,zoomIn:Ye,zoomOut:Ce,rotate:fe,flip:pe,reset:Ne,fitToImage:je,saveImage:Be,handleClose:$}}},qo={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm"},Zo={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},Qo={class:"flex items-center justify-between p-4 border-b border-border"},Go={class:"flex items-center gap-3"},Ko={key:0,class:"text-sm text-muted-foreground"},Jo={class:"flex gap-2"},$o=["disabled"],en={class:"flex-1 overflow-auto p-4"},tn={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},on={class:"lg:col-span-2"},nn={class:"bg-muted/30 rounded-lg p-4"},sn={class:"mt-4 p-3 bg-muted/30 rounded-lg"},rn={class:"grid grid-cols-2 gap-4 text-sm"},an={class:"ml-2 font-medium"},ln={class:"ml-2 font-medium"},cn={class:"space-y-4"},dn={class:"bg-muted/30 rounded-lg p-4"},hn={class:"space-y-2"},un={class:"flex items-center gap-2"},gn={class:"flex items-center gap-2"},mn={class:"flex items-center gap-2"},fn={class:"flex items-center gap-2"},pn={class:"flex items-center gap-2"},vn={class:"bg-muted/30 rounded-lg p-4"},bn={class:"space-y-2"},wn={class:"flex items-center gap-2"},xn={class:"text-center text-xs text-muted-foreground"},yn={class:"bg-muted/30 rounded-lg p-4"},Mn={class:"grid grid-cols-2 gap-2"},zn={class:"bg-muted/30 rounded-lg p-4"},Cn={class:"grid grid-cols-2 gap-2"},An={class:"bg-muted/30 rounded-lg p-4"},Rn={class:"space-y-3"},kn={class:"text-center text-xs text-muted-foreground mt-1"},Sn={class:"bg-muted/30 rounded-lg p-4"},En={class:"space-y-2"},_n={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm"},Fn={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md p-6"},Tn={class:"space-y-3"},Dn=["disabled"],jn=["disabled"];function Bn(e,t,o,i,r,s){const a=K("Cropper");return o.show?(p(),w("div",qo,[c("div",Zo,[c("div",Qo,[c("div",Go,[c("button",{onClick:t[0]||(t[0]=(...l)=>i.handleClose&&i.handleClose(...l)),class:"h-10 w-10 flex items-center justify-center rounded-lg hover:bg-accent/10 hover:text-accent transition-colors"},"  "),t[27]||(t[27]=c("h2",{class:"text-xl font-semibold"}," ",-1)),o.file?(p(),w("span",Ko,M(o.file.original_name),1)):R("",!0)]),c("div",Jo,[c("button",{onClick:t[1]||(t[1]=(...l)=>i.handleClose&&i.handleClose(...l)),class:"px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},"  "),c("button",{onClick:t[2]||(t[2]=l=>i.showSaveOptions=!0),disabled:i.saving,class:"px-4 py-2 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},M(i.saving?"...":""),9,$o)])]),c("div",en,[c("div",tn,[c("div",on,[c("div",nn,[O(a,{ref:"cropperRef",src:i.imageUrl,"stencil-props":{aspectRatio:i.aspectRatio,resizable:!0,movable:!0},"default-size":{width:i.defaultWidth,height:i.defaultHeight},"image-restriction":"stencil",class:"cropper",onChange:i.onChange},null,8,["src","stencil-props","default-size","onChange"])]),c("div",sn,[c("div",rn,[c("div",null,[t[28]||(t[28]=c("span",{class:"text-muted-foreground"}," :",-1)),c("span",an,M(i.originalWidth)+"  "+M(i.originalHeight)+" px",1)]),c("div",null,[t[29]||(t[29]=c("span",{class:"text-muted-foreground"}," :",-1)),c("span",ln,M(i.croppedWidth)+"  "+M(i.croppedHeight)+" px",1)])])])]),c("div",cn,[c("div",dn,[t[35]||(t[35]=c("h3",{class:"text-sm font-semibold mb-3"}," ",-1)),c("div",hn,[c("label",un,[Y(c("input",{type:"radio",value:null,"onUpdate:modelValue":t[3]||(t[3]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[He,i.aspectRatio]]),t[30]||(t[30]=c("span",{class:"text-sm"},"",-1))]),c("label",gn,[Y(c("input",{type:"radio",value:1,"onUpdate:modelValue":t[4]||(t[4]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[He,i.aspectRatio]]),t[31]||(t[31]=c("span",{class:"text-sm"},"1:1 ()",-1))]),c("label",mn,[Y(c("input",{type:"radio",value:16/9,"onUpdate:modelValue":t[5]||(t[5]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[He,i.aspectRatio]]),t[32]||(t[32]=c("span",{class:"text-sm"},"16:9",-1))]),c("label",fn,[Y(c("input",{type:"radio",value:4/3,"onUpdate:modelValue":t[6]||(t[6]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[He,i.aspectRatio]]),t[33]||(t[33]=c("span",{class:"text-sm"},"4:3",-1))]),c("label",pn,[Y(c("input",{type:"radio",value:3/2,"onUpdate:modelValue":t[7]||(t[7]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[He,i.aspectRatio]]),t[34]||(t[34]=c("span",{class:"text-sm"},"3:2",-1))])])]),c("div",vn,[t[36]||(t[36]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",bn,[c("div",wn,[c("button",{onClick:t[8]||(t[8]=(...l)=>i.zoomOut&&i.zoomOut(...l)),class:"h-8 w-8 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  "),Y(c("input",{type:"range","onUpdate:modelValue":t[9]||(t[9]=l=>i.zoom=l),min:"0.1",max:"3",step:"0.1",onInput:t[10]||(t[10]=(...l)=>i.handleZoomChange&&i.handleZoomChange(...l)),class:"flex-1"},null,544),[[_e,i.zoom,void 0,{number:!0}]]),c("button",{onClick:t[11]||(t[11]=(...l)=>i.zoomIn&&i.zoomIn(...l)),class:"h-8 w-8 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"}," + ")]),c("div",xn,M(Math.round(i.zoom*100))+"% ",1)])]),c("div",yn,[t[37]||(t[37]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",Mn,[c("button",{onClick:t[12]||(t[12]=l=>i.rotate(-90)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  -90 "),c("button",{onClick:t[13]||(t[13]=l=>i.rotate(90)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  +90 "),c("button",{onClick:t[14]||(t[14]=l=>i.rotate(-180)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  -180 "),c("button",{onClick:t[15]||(t[15]=l=>i.rotate(180)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  +180 ")])]),c("div",zn,[t[38]||(t[38]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",Cn,[c("button",{onClick:t[16]||(t[16]=l=>i.flip(!0,!1)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"   "),c("button",{onClick:t[17]||(t[17]=l=>i.flip(!1,!0)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"   ")])]),c("div",An,[t[44]||(t[44]=c("h3",{class:"text-sm font-semibold mb-3"}," ",-1)),c("div",Rn,[c("div",null,[t[39]||(t[39]=c("label",{class:"text-xs text-muted-foreground mb-1 block"}," (px)",-1)),Y(c("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=l=>i.outputWidth=l),min:"1",class:"w-full h-9 px-3 border border-border rounded bg-background"},null,512),[[_e,i.outputWidth,void 0,{number:!0}]])]),c("div",null,[t[40]||(t[40]=c("label",{class:"text-xs text-muted-foreground mb-1 block"}," (px)",-1)),Y(c("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>i.outputHeight=l),min:"1",class:"w-full h-9 px-3 border border-border rounded bg-background"},null,512),[[_e,i.outputHeight,void 0,{number:!0}]])]),c("div",null,[t[41]||(t[41]=c("label",{class:"text-xs text-muted-foreground mb-1 block"},"",-1)),Y(c("input",{type:"range","onUpdate:modelValue":t[20]||(t[20]=l=>i.quality=l),min:"1",max:"100",class:"w-full"},null,512),[[_e,i.quality,void 0,{number:!0}]]),c("div",kn,M(i.quality)+"% ",1)]),c("div",null,[t[43]||(t[43]=c("label",{class:"text-xs text-muted-foreground mb-1 block"},"",-1)),Y(c("select",{"onUpdate:modelValue":t[21]||(t[21]=l=>i.outputFormat=l),class:"w-full h-9 px-3 border border-border rounded bg-background"},[...t[42]||(t[42]=[c("option",{value:"image/jpeg"},"JPEG",-1),c("option",{value:"image/png"},"PNG",-1),c("option",{value:"image/webp"},"WebP",-1)])],512),[[vt,i.outputFormat]])])])]),c("div",Sn,[t[45]||(t[45]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",En,[c("button",{onClick:t[22]||(t[22]=(...l)=>i.reset&&i.reset(...l)),class:"w-full h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  "),c("button",{onClick:t[23]||(t[23]=(...l)=>i.fitToImage&&i.fitToImage(...l)),class:"w-full h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"    ")])])])])])]),i.showSaveOptions?(p(),w("div",_n,[c("div",Fn,[t[46]||(t[46]=c("h3",{class:"text-lg font-semibold mb-4"}," ",-1)),c("div",Tn,[c("button",{onClick:t[24]||(t[24]=l=>i.saveImage(!0)),disabled:i.saving,class:"w-full h-12 flex items-center justify-center bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},"    ",8,Dn),c("button",{onClick:t[25]||(t[25]=l=>i.saveImage(!1)),disabled:i.saving,class:"w-full h-12 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors disabled:opacity-50"},"    ",8,jn),c("button",{onClick:t[26]||(t[26]=l=>i.showSaveOptions=!1),class:"w-full h-12 flex items-center justify-center border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},"  ")])])])):R("",!0)])):R("",!0)}const Pn=Jt(Vo,[["render",Bn],["__scopeId","data-v-484fb785"]]),In={name:"Media",components:{FsLightbox:ho,ImageEditor:Pn},props:{selectionMode:{type:Boolean,default:!1},countFile:{type:Number,default:1},selectedFiles:{type:Array,default:()=>[]}},emits:["file-selected"],setup(e,{emit:t}){console.log("[Media] setup() ");const o=z(!1),i=z(!1),r=z(!1),s=z(null),a=z(""),l=z([]),n=z(null),h=z(""),m=z(!1),g=z([]),b=z([]),x=z(!1),k=z(!1),S=z(null),T=z({total:0,completed:0}),N=z(!1),ie=z([]),ce=z(1),Q=z(!1),Ye=z(null),Ce=z(!1),fe=z(null),pe=z(null),Ne=z([]),je=z(!1),Be=z(!1),$=z([]),F=z([]),B="media_selected_folder_id",L=z(1),Ae=z(20),Re=[10,20,30,40,50,100],oe=z(0),Z=z(1),Pe=z(""),Ve=z(""),Ie=z("created_at"),We=z("desc"),we=z(null),xe=z(null),St=[{value:"created_at",order:"desc",label:""},{value:"created_at",order:"asc",label:""},{value:"created_at",order:"asc",label:"  (.)"},{value:"created_at",order:"desc",label:"  (.)"},{value:"original_name",order:"asc",label:"  (-)"},{value:"original_name",order:"desc",label:"  (-)"},{value:"size",order:"asc",label:"  (.)"},{value:"size",order:"desc",label:"  (.)"}],vi=Ee(()=>{const d=St.find(u=>u.value===Ie.value&&u.order===We.value);return d?d.label:""}),bi=Ee(()=>a.value?l.value.filter(d=>d.name.toLowerCase().includes(a.value.toLowerCase())):l.value),de=Ee(()=>n.value?.is_trash===!0||n.value?.id===4),wi=Ee(()=>{const d=g.value.length>0,u=!!n.value,f=!r.value,v=d&&u&&f;return console.log("[Media] canUpload check:",{hasFiles:d,hasFolder:u,notUploading:f,result:v,filesCount:g.value.length}),v}),ne=async()=>{o.value=!0,s.value=null;try{const d=await ye("/folders");if(!d.ok){let f=`HTTP error! status: ${d.status}`;try{const v=await d.json();f=v.message||v.error||f,console.error("[Media] API Error Data:",v)}catch{const y=await d.text();console.error("[Media] API Error Response (text):",y)}throw new Error(f)}const u=await d.json();console.log("[Media] API Response:",u),Array.isArray(u)?l.value=u:u.data&&Array.isArray(u.data)?l.value=u.data:l.value=[],console.log("[Media] Folders loaded:",l.value.length)}catch(d){console.error("[Media] Error fetching folders:",d),s.value="  : "+(d.message||" ")}finally{o.value=!1}},V=async(d,u=1,f=null)=>{i.value=!0,s.value=null;try{const v=new URLSearchParams;v.append("folder_id",d),v.append("page",u),v.append("per_page",Ae.value),f&&v.append("original_folder_id",f),Pe.value.trim()&&v.append("search",Pe.value.trim()),Ve.value&&v.append("type",Ve.value),v.append("sort_by",Ie.value),v.append("sort_order",We.value);const y=await ye(`/media?${v.toString()}`);if(!y.ok){let Le=`HTTP error! status: ${y.status}`;try{const Oe=await y.json();Le=Oe.message||Oe.error||Le,console.error("[Media] API Error Data:",Oe)}catch{const Ze=await y.text();console.error("[Media] API Error Response (text):",Ze)}throw new Error(Le)}const A=await y.json();console.log("[Media] Media API Response:",A),console.log("[Media] Response structure:",{hasData:!!A.data,isArray:Array.isArray(A.data),hasMeta:!!A.meta,hasLinks:!!A.links,keys:Object.keys(A)});let he=[];A.data&&Array.isArray(A.data)?(he=A.data,A.meta?(we.value={current_page:A.meta.current_page||u,last_page:A.meta.last_page||1,per_page:A.meta.per_page||Ae.value,total:A.meta.total||0,from:A.meta.from||0,to:A.meta.to||0},L.value=A.meta.current_page||u,Z.value=A.meta.last_page||1,oe.value=A.meta.total||0):A.current_page!==void 0?(we.value={current_page:A.current_page||u,last_page:A.last_page||1,per_page:A.per_page||Ae.value,total:A.total||0,from:A.from||0,to:A.to||0},L.value=A.current_page||u,Z.value=A.last_page||1,oe.value=A.total||0):we.value=null):Array.isArray(A)?(he=A,we.value=null):(he=[],we.value=null),console.log("[Media] Parsed pagination:",we.value),console.log("[Media] Parsed files:",he.length,"Total:",oe.value,"Page:",L.value,"of",Z.value),await dt(),b.value=[...he],await dt()}catch(v){console.error("[Media] Error fetching media files:",v),s.value="  : "+(v.message||" ")}finally{i.value=!1}},xi=d=>{n.value&&V(n.value.id,d)},yi=()=>{L.value=1,n.value&&V(n.value.id,1)},Mi=(d=!1)=>{xe.value&&(clearTimeout(xe.value),xe.value=null),d?(L.value=1,n.value&&V(n.value.id,1)):xe.value=setTimeout(()=>{L.value=1,n.value&&V(n.value.id,1),xe.value=null},500)},zi=()=>{L.value=1,n.value&&V(n.value.id,1)},Ci=(d,u)=>{Ie.value=d,We.value=u,L.value=1,n.value&&V(n.value.id,1)},Ai=(d,u)=>{const f=[];if(u<=5)for(let y=1;y<=u;y++)f.push(y);else if(d<=3)for(let y=1;y<=5;y++)f.push(y);else if(d>=u-2)for(let y=u-4;y<=u;y++)f.push(y);else for(let y=d-2;y<=d+2;y++)f.push(y);return f},Et=async()=>{const d=n.value?n.value.id:null,u=n.value?`  "${n.value.name}"`:" ",{value:f}=await D.fire({title:"  ",html:`  ${u}`,input:"text",inputPlaceholder:"  ",inputValidator:v=>{if(!v||!v.trim())return"     ";if(v.trim().length<2)return"     2 ";if(v.trim().length>100)return"     100 "},showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!(!f||!f.trim())){o.value=!0,s.value=null;try{const v=await tt("/folders",{name:f.trim(),parent_id:d});if(!v.ok){const A=await v.json();throw new Error(A.message||"  ")}const y=await v.json();D.fire({title:" ",html:` <strong>"${f.trim()}"</strong>   ${u}.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await ne(),n.value&&await ke(n.value.id),console.log("[Media] Folder created successfully")}catch(v){console.error("[Media] Error creating folder:",v),D.fire({title:"",text:v.message||"  ",icon:"error",confirmButtonText:""}),s.value=v.message||"  "}finally{o.value=!1}}},ke=async d=>{try{let u;de.value?u="/folders?trash=1":u=`/folders?parent_id=${d}`;const f=await ye(u);if(!f.ok){console.error("[Media] Error fetching nested folders:",f.status),$.value=[];return}const v=await f.json();Array.isArray(v)?$.value=v:v.data&&Array.isArray(v.data)?$.value=v.data:$.value=[],console.log("[Media] Nested folders loaded:",$.value.length,de.value?"(trash)":"")}catch(u){console.error("[Media] Error fetching nested folders:",u),$.value=[]}},Ri=async d=>{if(!d){F.value=[];return}const u=[];let f=d;for(;f;)if(u.unshift({id:f.id,name:f.name,folder:f}),f.parent&&f.parent.id)f=f.parent;else if(f.parent_id)try{const v=await ye(`/folders/${f.parent_id}`);if(v.ok){const y=await v.json();f=y.data||y}else break}catch(v){console.error("[Media] Error loading parent folder:",v);break}else break;u.unshift({id:null,name:" ",folder:null}),F.value=u},_t=d=>{try{d?localStorage.setItem(B,d.toString()):localStorage.removeItem(B)}catch(u){console.error("[Media] Error saving folder to localStorage:",u)}},ki=async()=>{try{const d=localStorage.getItem(B);if(d){const u=parseInt(d);if(isNaN(u))localStorage.removeItem(B);else{const f=await ye(`/folders/${u}`);if(f.ok){const v=await f.json(),y=v.data||v;if(y)return await at(y,!1),!0}else if(f.status===404)return console.log("[Media] Folder from localStorage not found (deleted), clearing storage"),localStorage.removeItem(B),!1}}}catch(d){console.error("[Media] Error loading folder from localStorage:",d),localStorage.removeItem(B)}return!1},at=async(d,u=!0)=>{if(console.log("[Media] Folder clicked:",d),d.deleted_at||de.value&&d.id!==4)try{const f=await ye(`/folders/${d.id}`);if(f.ok){const v=await f.json();d=v.data||v}}catch(f){console.error("[Media] Error loading deleted folder:",f)}n.value=d,L.value=1,Pe.value="",Ve.value="",Ie.value="created_at",We.value="desc",u&&!de.value&&_t(d.id),await Ri(d),d.deleted_at?await Promise.all([V(4,1,d.id),ke(d.id)]):await Promise.all([V(d.id,1),ke(d.id)])},Si=()=>{S.value&&S.value.click()},Ei=d=>{if(d.target.files){const u=Array.from(d.target.files),f=10*1024*1024,v=u.filter(y=>y.size>f?(console.warn(`[Media]  ${y.name}  10    `),!1):!0);v.forEach(y=>{y.uploadProgress=void 0,y.uploadError=void 0}),g.value=v,r.value=!1,T.value={total:0,completed:0},v.length<u.length&&(s.value="   10     "),console.log("[Media] Files selected:",v.length,"selectedFiles.value.length:",g.value.length),d.target&&(d.target.value="")}},Ft=d=>{if(x.value=!1,k.value=!1,d.dataTransfer.files&&d.dataTransfer.files.length>0){const u=Array.from(d.dataTransfer.files),f=u.filter(v=>v.size>10485760?(console.warn(`[Media]  ${v.name}  10    `),!1):!0);f.forEach(v=>{v.uploadProgress=void 0,v.uploadError=void 0}),g.value=f,r.value=!1,T.value={total:0,completed:0},f.length<u.length&&(s.value="   10     "),console.log("[Media] Files dropped:",f.length,"selectedFiles.value.length:",g.value.length)}},_i=d=>{x.value=!1,k.value=!1,Ft(d)},Fi=(d,u)=>{d.target.style.display="none",u.src&&(u.imageError=!0)},lt=z(new Set),Tt=()=>`${window.location.origin}/system/folder.png`,Ti=d=>!d||!d.src?Tt():`${window.location.origin}/system/${d.src}.png`,Di=d=>{const u=d.target,f=u.parentElement;if(f&&!f.querySelector("span.folder-fallback")){u.style.display="none";const v=document.createElement("span");f.classList.contains("aspect-square")||u.classList.contains("w-full")?v.className="text-4xl folder-fallback":v.className="text-sm folder-fallback",v.textContent="",f.appendChild(v)}},Dt=d=>{const u=d.extension?.toLowerCase()||"",f=d.type?.toLowerCase()||"";return f==="photo"||f==="video"?null:u==="pdf"||f==="document"&&u==="pdf"?"":["doc","docx"].includes(u)?"":["xls","xlsx"].includes(u)?"":["ppt","pptx"].includes(u)?"":["zip","rar","7z","tar","gz"].includes(u)?"":["txt","rtf"].includes(u)?"":["js","ts","php","py","java","cpp","html","css","scss","json","xml"].includes(u)?"":["mp3","wav","ogg","m4a","flac","aac"].includes(u)?"":""},ji=d=>{if(!d)return"0 B";const u=1024,f=["B","KB","MB","GB"],v=Math.floor(Math.log(d)/Math.log(u));return Math.round(d/Math.pow(u,v)*100)/100+" "+f[v]},Bi=d=>{if(d.type)return d.type.startsWith("image/");const u=qe(d.name);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(u)},Pi=d=>{if(d.type)return d.type.startsWith("video/");const u=qe(d.name);return["mp4","avi","mov","webm","mkv","wmv","flv"].includes(u)},qe=d=>{if(!d)return"";const u=d.split(".");return u.length>1?u[u.length-1].toLowerCase():""},Ii=d=>{if(d instanceof File){const u=URL.createObjectURL(d);return lt.value.add(u),u}return d.url||""},ct=()=>{lt.value.forEach(d=>{URL.revokeObjectURL(d)}),lt.value.clear()},Wi=d=>{const u=qe(d.name);return Dt({extension:u,type:d.type})},Li=(d,u,f)=>new Promise((v,y)=>{const A=new XMLHttpRequest,he=new FormData;he.append("file",d),he.append("folder_id",u),A.upload.addEventListener("progress",ue=>{if(ue.lengthComputable){const no=Math.round(ue.loaded/ue.total*100);f(no)}}),A.addEventListener("load",()=>{if(A.status>=200&&A.status<300)try{const ue=JSON.parse(A.responseText);v(ue)}catch{v(A.responseText)}else try{const ue=JSON.parse(A.responseText);y(new Error(ue.message||`HTTP error! status: ${A.status}`))}catch{y(new Error(`HTTP error! status: ${A.status}`))}}),A.addEventListener("error",()=>{y(new Error("    "))}),A.addEventListener("abort",()=>{y(new Error("   "))});const{getAuthHeader:Le}=uo(),Ze=Le().Authorization?.replace("Bearer ","");A.open("POST","/api/v1/media"),Ze&&A.setRequestHeader("Authorization",`Bearer ${Ze}`),A.setRequestHeader("Accept","application/json"),A.send(he)}),Oi=async()=>{if(g.value.length===0){s.value="   ";return}if(!n.value){s.value="   ";return}r.value=!0,s.value=null,T.value={total:g.value.length,completed:0},g.value.forEach(d=>{d.uploadProgress=0});try{const d=g.value.map(async(u,f)=>{try{const v=await Li(u,n.value.id,y=>{u.uploadProgress=y});return T.value.completed++,u.uploadProgress=100,v}catch(v){throw T.value.completed++,u.uploadProgress=0,u.uploadError=v.message,v}});await Promise.all(d),ct(),await V(n.value.id),await ne(),g.value=[],T.value={total:0,completed:0},console.log("[Media] Files uploaded successfully")}catch(d){console.error("[Media] Error uploading files:",d),s.value=d.message||"  "}finally{r.value=!1}},Hi=()=>{ct(),g.value=[],s.value=null,r.value=!1,T.value={total:0,completed:0},console.log("[Media] Upload cancelled")},jt=()=>{n.value=null,b.value=[],$.value=[],F.value=[],_t(null),console.log("[Media] Back to folders list")},Ui=async d=>{d.id===null?jt():await at(d.folder)},Xi=()=>{Et()},Bt=d=>d.type==="photo"||d.type==="video"?!0:["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"].includes(d.extension?.toLowerCase()),Pt=d=>{const u=b.value.filter(y=>y.type==="photo"||y.type==="video"),f=u.findIndex(y=>y.id===d.id);if(f===-1){console.error("[Media] File not found in mediaFiles:",d);return}const v=u.map(y=>y.url);console.log("[Media] Opening lightbox:",{currentIndex:f,slide:f+1,totalSources:v.length,file:d.original_name}),ie.value=v,ce.value=f+1,dt(()=>{N.value=!N.value})},Yi=d=>!e.selectedFiles||!Array.isArray(e.selectedFiles)?!1:e.selectedFiles.some(u=>u.id===d.id),Ni=(d,u)=>{if(console.log("[Media] handleFileClick called:",{file:d,selectionMode:e.selectionMode,fileType:d?.type}),e.selectionMode&&d&&(d.type==="photo"||d.type==="video")){console.log("[Media] Selection mode: selecting file:",d),u?.stopPropagation(),t("file-selected",d);return}!e.selectionMode&&d&&It(d)},It=d=>{if(e.selectionMode){console.log("[Media] Selection mode: emitting file-selected event for file:",d),t("file-selected",d);return}if(d.type==="photo"||d.type==="video"){Pt(d);return}if(Bt(d)){const u=window.location.origin+d.url;(d.extension?.toLowerCase()==="pdf"||["doc","docx","xls","xlsx","ppt","pptx"].includes(d.extension?.toLowerCase())||d.extension?.toLowerCase()==="txt")&&window.open(u,"_blank")}},Vi=d=>{const u=window.location.origin+d.url,f=document.createElement("a");f.href=u,f.download=d.original_name,document.body.appendChild(f),f.click(),document.body.removeChild(f)},qi=d=>{d.type==="photo"&&(Ye.value=d,Q.value=!0)},Zi=async d=>{console.log("[Media] Image saved:",d),n.value&&(await V(n.value.id),await ne())},Qi=async()=>{try{const d=await ye("/folders?paginate=0");if(!d.ok)throw new Error("  ");const u=await d.json();let f=[];Array.isArray(u)?f=u:u.data&&Array.isArray(u.data)&&(f=u.data);const v=fe.value?.folder_id;Ne.value=f.filter(y=>!(y.id===v||y.id===4||y.is_trash===!0))}catch(d){console.error("[Media] Error fetching all folders:",d),s.value="   "}},Gi=async d=>{fe.value=d,pe.value=d.folder_id,await Qi(),Ce.value=!0},Ki=d=>{pe.value=d},Ji=async()=>{if(fe.value){if(pe.value===fe.value.folder_id){Ce.value=!1;return}je.value=!0,s.value=null;try{const d={folder_id:pe.value===null?null:pe.value},u=await $t(`/media/${fe.value.id}`,d);if(!u.ok){const f=await u.json();throw new Error(f.message||"  ")}n.value&&await V(n.value.id,L.value),await ne(),Ce.value=!1,console.log("[Media] File moved successfully")}catch(d){console.error("[Media] Error moving file:",d),s.value=d.message||"  "}finally{je.value=!1}}},$i=async d=>{if((await D.fire({title:" ?",html:` <strong>"${d.original_name}"</strong>     .`,icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)try{const f=await tt(`/media/${d.id}/restore`);if(!f.ok){const v=await f.json();throw new Error(v.message||"  ")}D.fire({title:" ",html:` <strong>"${d.original_name}"</strong>  .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),n.value&&await V(n.value.id,L.value),await ne(),console.log("[Media] File restored successfully")}catch(f){console.error("[Media] Error restoring file:",f),D.fire({title:"",text:f.message||"  ",icon:"error",confirmButtonText:""}),s.value=f.message||"  "}},eo=async d=>{if(de.value){if(!(await D.fire({title:"  ?",html:` <strong>"${d.original_name}"</strong>        .`,icon:"warning",showCancelButton:!0,confirmButtonText:",  ",cancelButtonText:"",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"swal2-confirm-danger",cancelButton:"swal2-cancel"}})).isConfirmed)return}else if(!(await D.fire({title:" ?",html:` <strong>"${d.original_name}"</strong>    .`,icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)return;try{const u=await Qe(`/media/${d.id}`);if(!u.ok){const f=await u.json();throw new Error(f.message||"  ")}D.fire({title:de.value?" ":"   ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),n.value&&await V(n.value.id,L.value),await ne(),console.log("[Media] File deleted successfully")}catch(u){console.error("[Media] Error deleting file:",u),D.fire({title:"",text:u.message||"  ",icon:"error",confirmButtonText:""}),s.value=u.message||"  "}},to=async()=>{if(!de.value||b.value.length===0)return;const d=b.value.length;if((await D.fire({title:"  ?",html:` <strong> </strong>   (${d} .)  .<br><br>   !`,icon:"warning",showCancelButton:!0,confirmButtonText:`,   (${d})`,cancelButtonText:"",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"swal2-confirm-danger",cancelButton:"swal2-cancel"}})).isConfirmed){Be.value=!0,s.value=null;try{let f=0,v=0;for(const y of b.value)try{(await Qe(`/media/${y.id}`)).ok?f++:v++}catch(A){console.error(`[Media] Error deleting file ${y.id}:`,A),v++}v===0?D.fire({title:" ",html:`  : <strong>${f}</strong>`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}):D.fire({title:" ",html:`: <strong>${f}</strong><br>: <strong>${v}</strong>`,icon:"warning",confirmButtonText:""}),n.value&&await V(n.value.id,L.value),await ne(),console.log("[Media] Trash cleared:",{deletedCount:f,errorCount:v})}catch(f){console.error("[Media] Error clearing trash:",f),D.fire({title:"",text:f.message||"  ",icon:"error",confirmButtonText:""}),s.value=f.message||"  "}finally{Be.value=!1}}},io=async d=>{if(d.protected){D.fire({title:"",text:"   ",icon:"error",confirmButtonText:""});return}if(de.value){if(!(await D.fire({title:" ?",html:` ,   <strong> </strong>  <strong>"${d.name}"</strong>    ?<br><br>   !`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:",  ",cancelButtonText:""})).isConfirmed)return;o.value=!0,s.value=null;try{const v=await Qe(`/folders/${d.id}?force=1`);if(!v.ok){const y=await v.json();throw new Error(y.message||"  ")}n.value&&await ke(n.value.id),D.fire({title:" ",html:` <strong>"${d.name}"</strong>  .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder permanently deleted")}catch(v){console.error("[Media] Error deleting folder:",v),D.fire({title:"",text:v.message||"  ",icon:"error",confirmButtonText:""}),s.value=v.message||"  "}finally{o.value=!1}return}if((await D.fire({title:" ?",html:` ,     <strong>"${d.name}"</strong>    ?<br><br>    .`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:", ",cancelButtonText:""})).isConfirmed){o.value=!0,s.value=null;try{const f=await Qe(`/folders/${d.id}`);if(!f.ok){const v=await f.json();throw new Error(v.message||"  ")}await ne(),n.value&&await ke(n.value.id),D.fire({title:" ",html:` <strong>"${d.name}"</strong>   .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder deleted successfully")}catch(f){console.error("[Media] Error deleting folder:",f),D.fire({title:"",text:f.message||"  ",icon:"error",confirmButtonText:""}),s.value=f.message||"  "}finally{o.value=!1}}},oo=async d=>{if((await D.fire({title:" ?",html:` ,     <strong>"${d.name}"</strong>    ?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:", ",cancelButtonText:""})).isConfirmed){o.value=!0,s.value=null;try{const f=await tt(`/folders/${d.id}/restore`);if(!f.ok){const v=await f.json();throw new Error(v.message||"  ")}n.value&&await ke(n.value.id),await ne(),D.fire({title:" ",html:` <strong>"${d.name}"</strong>  .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder restored successfully")}catch(f){console.error("[Media] Error restoring folder:",f),D.fire({title:"",text:f.message||"  ",icon:"error",confirmButtonText:""}),s.value=f.message||"  "}finally{o.value=!1}}};return ro(async()=>{console.log("[Media] onMounted() "),await ne(),await ki()||(n.value=null,F.value=[])}),ao(()=>{ct(),xe.value&&clearTimeout(xe.value)}),{selectionMode:e.selectionMode,isFileSelected:Yi,loading:o,loadingMedia:i,uploading:r,error:s,searchQuery:a,folders:l,selectedFolder:n,newFolderName:h,isCreateFolderOpen:m,selectedFiles:g,mediaFiles:b,nestedFolders:$,breadcrumbs:F,filteredFolders:bi,isTrashFolder:de,canUpload:wi,uploadProgress:T,isDragging:x,isDraggingButton:k,lightboxToggler:N,lightboxSources:ie,lightboxSlide:ce,isPreviewable:Bt,openLightbox:Pt,handleFileClick:Ni,openFilePreview:It,handleDownloadFile:Vi,handleEditFile:qi,handleMoveFile:Gi,handleRestoreFile:$i,showImageEditor:Q,selectedFileForEdit:Ye,handleImageSaved:Zi,showMoveModal:Ce,selectedFileForMove:fe,selectedMoveFolderId:pe,allFolders:Ne,moving:je,clearingTrash:Be,selectMoveFolder:Ki,confirmMoveFile:Ji,handleBack:jt,handleBreadcrumbClick:Ui,handleToggleCreateFolder:Xi,handleCreateFolder:Et,handleFolderClick:at,fileInput:S,handleFileButtonClick:Si,handleFileSelect:Ei,handleDrop:Ft,handleDropOnButton:_i,handleImageError:Fi,getDefaultFolderIcon:Tt,getFolderIcon:Ti,handleFolderImageError:Di,getFileIcon:Dt,formatFileSize:ji,isImageFile:Bi,isVideoFile:Pi,getFileExtension:qe,getFilePreview:Ii,getFileIconFromFile:Wi,handleUpload:Oi,handleCancel:Hi,handleDeleteFile:eo,handleClearTrash:to,handleDeleteFolder:io,handleRestoreFolder:oo,currentPage:L,perPage:Ae,perPageOptions:Re,totalFiles:oe,lastPage:Z,fileSearchQuery:Pe,fileTypeFilter:Ve,fileSortBy:Ie,fileSortOrder:We,sortOptions:St,currentSortLabel:vi,paginationData:we,handlePageChange:xi,handlePerPageChange:yi,handleFileSearch:Mi,handleTypeFilter:zi,handleSortChange:Ci,getPageNumbers:Ai}}},Wn={class:"space-y-6 bg-transparent"},Ln={class:"flex items-center justify-between"},On={class:"flex items-center gap-4"},Hn={class:"text-3xl font-semibold text-foreground"},Un={class:"text-muted-foreground mt-1"},Xn={class:"flex gap-2"},Yn={key:0},Nn=["disabled"],Vn={key:0,class:"flex items-center justify-center py-12"},qn={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},Zn={class:"text-destructive"},Qn={key:2,class:"relative"},Gn={key:3,class:"grid gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},Kn=["onClick"],Jn={class:"relative aspect-square mb-2 bg-transparent rounded-lg overflow-hidden flex items-center justify-center"},$n=["src","alt"],es={class:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded z-10"},ts={class:"text-sm font-medium text-center text-foreground truncate"},is={class:"text-xs text-muted-foreground text-center"},os=["onClick"],ns={key:1,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-accent/20 text-accent rounded text-xs",title:" "},ss={key:4,class:"rounded-xl shadow-sm p-6 bg-card border border-border"},rs={class:"w-full"},as={class:"mb-4 flex items-center gap-2 text-sm flex-wrap"},ls={key:0,class:"text-muted-foreground"},cs=["onClick"],ds={class:"flex gap-2 mb-6 items-center justify-between"},hs=["disabled"],us={key:0,class:"space-y-6 pt-6"},gs={class:"text-center text-muted-foreground mb-4"},ms={class:"flex gap-2 max-w-3xl mx-auto"},fs={class:"flex-1"},ps=["disabled"],vs={key:0,class:"mt-6"},bs={class:"text-sm text-muted-foreground mb-4"},ws={key:0,class:"ml-2"},xs={key:0,class:"mb-4"},ys={class:"flex items-center justify-between mb-1"},Ms={class:"text-xs text-muted-foreground"},zs={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},Cs={class:"grid gap-3 md:grid-cols-4 lg:grid-cols-6 max-h-96 overflow-y-auto"},As=["src","alt"],Rs=["src"],ks={key:2,class:"w-full h-full flex flex-col items-center justify-center bg-muted/50 p-4"},Ss={class:"text-5xl mb-2"},Es={class:"text-xs text-muted-foreground text-center truncate w-full px-2"},_s={class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-1 p-2"},Fs=["title"],Ts={class:"text-white/80 text-xs"},Ds={key:3,class:"absolute bottom-0 left-0 right-0 bg-black/80 p-1"},js={class:"flex items-center justify-between mb-1"},Bs={class:"text-xs text-white truncate flex-1 mr-2"},Ps={key:0,class:"text-xs text-white/80 whitespace-nowrap"},Is={key:1,class:"text-xs text-red-400 whitespace-nowrap",title:" "},Ws={key:0,class:"w-full h-1 bg-muted/50 rounded-full overflow-hidden"},Ls={key:1,class:"w-full h-1 bg-red-500/50 rounded-full"},Os={key:1,class:"flex items-center justify-center py-8"},Hs={key:2,class:"pt-6"},Us={class:"text-lg font-semibold mb-4"},Xs={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},Ys=["onClick"],Ns={class:"relative aspect-square mb-2 bg-transparent rounded-lg overflow-hidden flex items-center justify-center hover:bg-accent/5 transition-colors"},Vs=["src","alt"],qs={class:"text-center"},Zs=["title"],Qs={key:0,class:"flex items-center justify-center gap-1 mt-1"},Gs=["onClick"],Ks={key:1,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-accent/20 text-accent rounded text-xs z-10",title:" "},Js=["onClick"],$s=["onClick"],er={key:3,class:"pt-6 space-y-4"},tr={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},ir={class:"flex-1 w-full sm:w-auto"},or={class:"relative"},nr=["value"],sr=["value"],rr={class:"flex items-center gap-2"},ar=["value"],lr={key:4,class:"pt-6"},cr={class:"flex items-center justify-between mb-4"},dr={class:"text-lg font-semibold"},hr={key:0},ur={key:1},gr={key:2,class:"text-sm text-muted-foreground ml-2"},mr=["disabled"],fr={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},pr=["onClick"],vr={class:"relative aspect-video bg-muted/30 overflow-hidden flex-shrink-0"},br=["src","alt"],wr=["src"],xr={key:2,class:"w-full h-full flex flex-col items-center justify-center bg-muted/50 p-4 pointer-events-none"},yr={class:"text-5xl mb-2"},Mr={class:"text-xs text-muted-foreground text-center truncate w-full px-2"},zr={key:3,class:"absolute top-2 left-2 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center text-xs font-bold z-10 pointer-events-none"},Cr=["onClick"],Ar=["title"],Rr={class:"flex items-center gap-2 text-xs text-muted-foreground"},kr={key:0,class:"text-blue-600 font-medium"},Sr={key:0,class:"text-xs text-muted-foreground"},Er={key:0,class:"px-3 pb-3 flex gap-2 mt-auto"},_r=["onClick"],Fr=["onClick"],Tr=["onClick"],Dr=["onClick"],jr=["onClick"],Br=["onClick"],Pr={key:5,class:"flex flex-col sm:flex-row items-center justify-between pt-6 border-t border-border gap-4"},Ir={class:"text-sm text-muted-foreground"},Wr={key:0},Lr={key:1},Or={key:0,class:"flex gap-2 items-center"},Hr=["disabled"],Ur={class:"flex gap-1"},Xr=["onClick"],Yr=["disabled"],Nr={key:6,class:"text-center py-12"},Vr={class:"text-muted-foreground"},qr={key:0,class:"text-xs text-muted-foreground mt-2"},Zr={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm"},Qr={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md p-6"},Gr={key:0,class:"text-sm text-muted-foreground mb-4"},Kr={class:"mb-4"},Jr={class:"border border-border rounded-lg max-h-96 overflow-y-auto bg-muted/30"},$r={class:"p-2"},ea=["src"],ta=["onClick"],ia=["src","alt"],oa={class:"flex-1"},na={key:0,class:"text-xs text-muted-foreground"},sa={class:"flex gap-2"},ra=["disabled"];function aa(e,t,o,i,r,s){const a=K("FsLightbox"),l=K("ImageEditor");return p(),w(X,null,[c("div",Wn,[c("div",Ln,[c("div",On,[i.selectedFolder?(p(),w("button",{key:0,onClick:t[0]||(t[0]=(...n)=>i.handleBack&&i.handleBack(...n)),class:"h-10 w-10 flex items-center justify-center rounded-lg hover:bg-accent/10 hover:text-accent transition-colors"},"  ")):R("",!0),c("div",null,[c("h1",Hn,M(i.selectedFolder?`  - ${i.selectedFolder.name}`:"  -  "),1),c("p",Un,M(i.selectedFolder?" ":"  "),1)])]),c("div",Xn,[!i.selectedFolder&&!i.selectionMode?(p(),w("div",Yn,[c("button",{onClick:t[1]||(t[1]=(...n)=>i.handleToggleCreateFolder&&i.handleToggleCreateFolder(...n)),disabled:i.loading,class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[t[39]||(t[39]=c("span",null,"+",-1)),c("span",null,M(i.loading?"...":" "),1)],8,Nn)])):R("",!0)])]),i.loading&&i.folders.length===0?(p(),w("div",Vn,[...t[40]||(t[40]=[c("p",{class:"text-muted-foreground"}," ...",-1)])])):R("",!0),i.error?(p(),w("div",qn,[c("p",Zn,M(i.error),1)])):R("",!0),!i.selectedFolder&&!i.loading?(p(),w("div",Qn,[t[41]||(t[41]=c("span",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"},"",-1)),Y(c("input",{type:"text",placeholder:" ...","onUpdate:modelValue":t[2]||(t[2]=n=>i.searchQuery=n),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-9 text-sm"},null,512),[[_e,i.searchQuery]])])):R("",!0),!i.selectedFolder&&!i.loading?(p(),w("div",Gn,[(p(!0),w(X,null,ee(i.filteredFolders,n=>(p(),w("div",{key:n.id,class:"group relative"},[c("div",{class:"cursor-pointer",onClick:h=>i.handleFolderClick(n)},[c("div",Jn,[c("img",{src:i.getFolderIcon(n),alt:n.name,class:"w-full h-full object-contain max-w-[66.67%] max-h-[66.67%]",onError:t[3]||(t[3]=(...h)=>i.handleFolderImageError&&i.handleFolderImageError(...h))},null,40,$n),c("div",es,M(n.count||0),1)]),c("p",ts,M(n.name),1),c("p",is,M(n.count||0)+" ",1)],8,Kn),!n.protected&&!i.selectionMode?(p(),w("button",{key:0,onClick:I(h=>i.handleDeleteFolder(n),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90",title:" "},"  ",8,os)):R("",!0),n.protected?(p(),w("div",ns,"  ")):R("",!0)]))),128))])):R("",!0),i.selectedFolder?(p(),w("div",ss,[c("div",rs,[c("div",as,[c("button",{onClick:t[4]||(t[4]=(...n)=>i.handleBack&&i.handleBack(...n)),class:"px-2 py-1 rounded-md text-sm font-medium hover:bg-accent/10 text-muted-foreground hover:text-foreground transition-colors",title:"  "},"  "),i.breadcrumbs.length>0?(p(),w("span",ls,"/")):R("",!0),(p(!0),w(X,null,ee(i.breadcrumbs,(n,h)=>(p(),w("button",{key:n.id||"root",onClick:m=>i.handleBreadcrumbClick(n),class:se(["px-2 py-1 rounded-md text-sm transition-colors",h===i.breadcrumbs.length-1?"font-semibold text-foreground cursor-default":"text-muted-foreground hover:text-foreground hover:bg-accent/10 cursor-pointer"])},M(n.name),11,cs))),128))]),c("div",ds,[c("button",{onClick:t[5]||(t[5]=(...n)=>i.handleBack&&i.handleBack(...n)),class:"px-4 py-2 rounded-md text-sm font-medium hover:bg-accent/10"},"  "),!i.isTrashFolder&&!i.selectionMode?(p(),w("button",{key:0,onClick:t[6]||(t[6]=(...n)=>i.handleCreateFolder&&i.handleCreateFolder(...n)),disabled:i.loading,class:"px-4 py-2 rounded-md text-sm font-medium bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2"},[t[42]||(t[42]=c("span",null,"",-1)),c("span",null,M(i.loading?"...":" "),1)],8,hs)):R("",!0)]),i.isTrashFolder?R("",!0):(p(),w("div",us,[c("div",{class:se(["border-2 border-dashed border-border rounded-lg p-8 transition-colors",{"border-accent bg-accent/5":i.isDragging}]),onDrop:t[15]||(t[15]=I((...n)=>i.handleDrop&&i.handleDrop(...n),["prevent"])),onDragover:t[16]||(t[16]=I(n=>i.isDragging=!0,["prevent"])),onDragleave:t[17]||(t[17]=I(n=>i.isDragging=!1,["prevent"]))},[c("p",gs,M(i.isDragging?"   ":'      "".      10 '),1),c("div",ms,[c("label",fs,[c("input",{ref:"fileInput",type:"file",multiple:"",class:"hidden",onChange:t[7]||(t[7]=(...n)=>i.handleFileSelect&&i.handleFileSelect(...n))},null,544),c("button",{type:"button",onClick:t[8]||(t[8]=(...n)=>i.handleFileButtonClick&&i.handleFileButtonClick(...n)),onDrop:t[9]||(t[9]=I((...n)=>i.handleDropOnButton&&i.handleDropOnButton(...n),["prevent"])),onDragover:t[10]||(t[10]=I(n=>i.isDraggingButton=!0,["prevent"])),onDragleave:t[11]||(t[11]=I(n=>i.isDraggingButton=!1,["prevent"])),class:se(["w-full h-11 px-4 border border-border bg-background/50 hover:bg-accent/10 hover:text-accent hover:border-accent rounded-lg inline-flex items-center justify-center transition-colors",{"border-accent bg-accent/10":i.isDraggingButton}])},M(i.isDraggingButton?" ":"+ "),35)]),c("button",{onClick:t[12]||(t[12]=(...n)=>i.handleUpload&&i.handleUpload(...n)),disabled:!i.canUpload,class:"flex-1 h-11 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center"},M(i.uploading?"...":" "),9,ps),c("button",{onClick:t[13]||(t[13]=(...n)=>i.handleCancel&&i.handleCancel(...n)),class:"flex-1 h-11 px-4 border border-border bg-background/50 hover:bg-accent/10 hover:text-accent hover:border-accent rounded-lg inline-flex items-center justify-center"},"   ")]),i.selectedFiles.length>0?(p(),w("div",vs,[c("p",bs,[Wt("  : "+M(i.selectedFiles.length)+" ",1),i.uploadProgress.total>0?(p(),w("span",ws," ("+M(i.uploadProgress.completed)+"/"+M(i.uploadProgress.total)+" ) ",1)):R("",!0)]),i.uploading&&i.uploadProgress.total>0?(p(),w("div",xs,[c("div",ys,[t[43]||(t[43]=c("span",{class:"text-xs text-muted-foreground"}," ",-1)),c("span",Ms,M(Math.round(i.uploadProgress.completed/i.uploadProgress.total*100))+"%",1)]),c("div",zs,[c("div",{class:"h-full bg-accent transition-all duration-300",style:Lt({width:`${i.uploadProgress.completed/i.uploadProgress.total*100}%`})},null,4)])])):R("",!0),c("div",Cs,[(p(!0),w(X,null,ee(i.selectedFiles,(n,h)=>(p(),w("div",{key:h,class:"group relative aspect-square rounded-lg overflow-hidden border border-border bg-muted/30"},[i.isImageFile(n)?(p(),w("img",{key:0,src:i.getFilePreview(n),alt:n.name,class:"w-full h-full object-cover"},null,8,As)):i.isVideoFile(n)?(p(),w("video",{key:1,src:i.getFilePreview(n),class:"w-full h-full object-cover",muted:"",onError:t[14]||(t[14]=m=>{m.target.style.display="none"})},null,40,Rs)):(p(),w("div",ks,[c("div",Ss,M(i.getFileIconFromFile(n)),1),c("p",Es,M(i.getFileExtension(n.name)?.toUpperCase()||"FILE"),1)])),c("div",_s,[c("p",{class:"text-white text-xs text-center truncate w-full px-2",title:n.name},M(n.name),9,Fs),c("p",Ts,M(i.formatFileSize(n.size)),1)]),n.uploadProgress!==void 0?(p(),w("div",Ds,[c("div",js,[c("span",Bs,M(n.name),1),n.uploadError?(p(),w("span",Is,"   ")):(p(),w("span",Ps,M(n.uploadProgress)+"% ",1))]),n.uploadError?(p(),w("div",Ls)):(p(),w("div",Ws,[c("div",{class:se(["h-full transition-all duration-300",n.uploadProgress===100?"bg-green-500":"bg-accent"]),style:Lt({width:`${n.uploadProgress}%`})},null,6)]))])):R("",!0)]))),128))])])):R("",!0)],34)])),i.loadingMedia?(p(),w("div",Os,[...t[44]||(t[44]=[c("p",{class:"text-muted-foreground"}," ...",-1)])])):R("",!0),i.nestedFolders.length>0&&!i.loadingMedia?(p(),w("div",Hs,[c("h3",Us," ("+M(i.nestedFolders.length)+")",1),c("div",Xs,[(p(!0),w(X,null,ee(i.nestedFolders,n=>(p(),w("div",{key:n.id,class:"group relative"},[c("div",{class:"cursor-pointer",onClick:h=>i.handleFolderClick(n)},[c("div",Ns,[c("img",{src:i.getFolderIcon(n),alt:n.name,class:"w-full h-full object-contain max-w-[66.67%] max-h-[66.67%]",onError:t[18]||(t[18]=(...h)=>i.handleFolderImageError&&i.handleFolderImageError(...h))},null,40,Vs)]),c("div",qs,[c("p",{class:"text-sm font-medium text-foreground truncate",title:n.name},M(n.name),9,Zs),n.protected?(p(),w("div",Qs,[...t[45]||(t[45]=[c("span",{class:"text-xs",title:" "},"",-1)])])):R("",!0)])],8,Ys),i.isTrashFolder?(p(),w(X,{key:1},[c("button",{onClick:I(h=>i.handleRestoreFolder(n),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-green-500 text-white rounded text-xs hover:bg-green-600 z-10",title:" "},"  ",8,Js),i.selectionMode?R("",!0):(p(),w("button",{key:0,onClick:I(h=>i.handleDeleteFolder(n),["stop"]),class:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90 z-10",title:" "},"  ",8,$s))],64)):(p(),w(X,{key:0},[!n.protected&&!i.selectionMode?(p(),w("button",{key:0,onClick:I(h=>i.handleDeleteFolder(n),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90 z-10",title:" "},"  ",8,Gs)):R("",!0),n.protected?(p(),w("div",Ks,"  ")):R("",!0)],64))]))),128))])])):R("",!0),i.selectedFolder&&!i.isTrashFolder?(p(),w("div",er,[c("div",tr,[c("div",ir,[c("div",or,[t[46]||(t[46]=c("span",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"},"",-1)),Y(c("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=n=>i.fileSearchQuery=n),onKeyup:t[20]||(t[20]=lo(n=>i.handleFileSearch(!0),["enter"])),onInput:t[21]||(t[21]=n=>i.handleFileSearch(!1)),placeholder:" ...",class:"flex h-10 w-full sm:w-64 rounded-md border border-input bg-background px-3 py-2 pl-9 text-sm"},null,544),[[_e,i.fileSearchQuery]])])]),Y(c("select",{"onUpdate:modelValue":t[22]||(t[22]=n=>i.fileTypeFilter=n),onChange:t[23]||(t[23]=(...n)=>i.handleTypeFilter&&i.handleTypeFilter(...n)),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[...t[47]||(t[47]=[co('<option value=""> </option><option value="photo"></option><option value="video"></option><option value="document"></option><option value="audio"></option>',5)])],544),[[vt,i.fileTypeFilter]]),c("select",{onChange:t[24]||(t[24]=n=>{const h=i.sortOptions.find(m=>m.label===n.target.value);h&&i.handleSortChange(h.value,h.order)}),value:i.currentSortLabel,class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm min-w-[180px]"},[(p(!0),w(X,null,ee(i.sortOptions,n=>(p(),w("option",{key:`${n.value}-${n.order}`,value:n.label},M(n.label),9,sr))),128))],40,nr),c("div",rr,[t[48]||(t[48]=c("label",{class:"text-sm text-muted-foreground whitespace-nowrap"}," :",-1)),Y(c("select",{"onUpdate:modelValue":t[25]||(t[25]=n=>i.perPage=n),onChange:t[26]||(t[26]=(...n)=>i.handlePerPageChange&&i.handlePerPageChange(...n)),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[(p(!0),w(X,null,ee(i.perPageOptions,n=>(p(),w("option",{key:n,value:n},M(n),9,ar))),128))],544),[[vt,i.perPage,void 0,{number:!0}]])])])])):R("",!0),i.mediaFiles.length>0&&!i.loadingMedia?(p(),w("div",lr,[c("div",cr,[c("h3",dr,[t[49]||(t[49]=Wt("   ",-1)),i.paginationData?(p(),w("span",hr," ("+M(i.paginationData.from)+"-"+M(i.paginationData.to)+"  "+M(i.paginationData.total)+") ",1)):(p(),w("span",ur," ("+M(i.mediaFiles.length)+") ",1)),i.isTrashFolder?(p(),w("span",gr,"()")):R("",!0)]),i.isTrashFolder&&i.mediaFiles.length>0?(p(),w("button",{key:0,onClick:t[27]||(t[27]=(...n)=>i.handleClearTrash&&i.handleClearTrash(...n)),disabled:i.clearingTrash,class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},M(i.clearingTrash?"...":"  "),9,mr)):R("",!0)]),c("div",fr,[(p(!0),w(X,null,ee(i.mediaFiles,n=>(p(),w("div",{key:n.id,class:se(["group bg-background border rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow flex flex-col",i.selectionMode&&(n.type==="photo"||n.type==="video")?i.isFileSelected(n)?"border-primary border-2 cursor-pointer":"border-border cursor-pointer hover:border-primary":"border-border"]),onClick:h=>i.handleFileClick(n,h)},[c("div",vr,[n.type==="photo"?(p(),w("img",{key:0,src:n.url,alt:n.original_name,class:"w-full h-full object-cover pointer-events-none"},null,8,br)):n.type==="video"?(p(),w("video",{key:1,src:n.url,class:"w-full h-full object-cover pointer-events-none",muted:"",onMouseenter:t[28]||(t[28]=h=>{try{h.target.play()}catch{}}),onMouseleave:t[29]||(t[29]=h=>{try{h.target.pause(),h.target.currentTime=0}catch{}}),onError:t[30]||(t[30]=h=>{h.target.style.display="none"})},null,40,wr)):(p(),w("div",xr,[c("div",yr,M(i.getFileIcon(n)||""),1),c("p",Mr,M(n.extension?.toUpperCase()||"FILE"),1)])),i.selectionMode&&i.isFileSelected(n)?(p(),w("div",zr,"  ")):R("",!0),i.selectionMode&&(n.type==="photo"||n.type==="video")?(p(),w("div",{key:4,class:se(["absolute inset-0 flex items-center justify-center transition-opacity pointer-events-none",i.isFileSelected(n)?"opacity-100 bg-primary/30":"opacity-0 group-hover:opacity-100 bg-primary/20"])},[...t[50]||(t[50]=[c("div",{class:"w-16 h-16 rounded-full backdrop-blur-sm flex items-center justify-center shadow-lg transition-transform bg-primary/95 text-white"},[c("span",{class:"text-2xl"},"")],-1)])],2)):!i.selectionMode&&i.isPreviewable(n)?(p(),w("button",{key:5,onClick:I(h=>i.openFilePreview(n),["stop"]),class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 hover:bg-black/30 cursor-pointer",title:""},[...t[51]||(t[51]=[c("div",{class:"w-16 h-16 rounded-full backdrop-blur-sm flex items-center justify-center shadow-lg hover:scale-110 transition-transform bg-white/95"},[c("span",{class:"text-2xl"},"")],-1)])],8,Cr)):R("",!0)]),c("div",{class:se(["p-3 space-y-1 flex-grow",{"pointer-events-none":i.selectionMode&&(n.type==="photo"||n.type==="video")}])},[c("p",{class:"font-semibold text-sm text-foreground truncate",title:n.original_name},M(n.original_name),9,Ar),c("div",Rr,[c("span",null,M(i.formatFileSize(n.size)),1),n.extension?(p(),w("span",kr," ."+M(n.extension.toUpperCase()),1)):R("",!0)]),n.width&&n.height?(p(),w("p",Sr,M(n.width)+"  "+M(n.height),1)):R("",!0)],2),i.selectionMode?R("",!0):(p(),w("div",Er,[i.isTrashFolder?(p(),w(X,{key:1},[c("button",{onClick:I(h=>i.handleRestoreFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:""},[...t[56]||(t[56]=[c("span",{class:"text-sm"},"",-1)])],8,jr),c("button",{onClick:I(h=>i.handleDeleteFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:" "},[...t[57]||(t[57]=[c("span",{class:"text-sm"},"",-1)])],8,Br)],64)):(p(),w(X,{key:0},[c("button",{onClick:I(h=>i.handleDownloadFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",title:""},[...t[52]||(t[52]=[c("span",{class:"text-sm"},"",-1)])],8,_r),n.type==="photo"?(p(),w("button",{key:0,onClick:I(h=>i.handleEditFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:""},[...t[53]||(t[53]=[c("span",{class:"text-sm"},"",-1)])],8,Fr)):R("",!0),c("button",{onClick:I(h=>i.handleMoveFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",title:""},[...t[54]||(t[54]=[c("span",{class:"text-sm"},"",-1)])],8,Tr),c("button",{onClick:I(h=>i.handleDeleteFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:""},[...t[55]||(t[55]=[c("span",{class:"text-sm"},"",-1)])],8,Dr)],64))]))],10,pr))),128))])])):R("",!0),i.paginationData&&i.paginationData.total>0&&!i.loadingMedia?(p(),w("div",Pr,[c("div",Ir,[i.paginationData.last_page>1?(p(),w("span",Wr,"  "+M(i.paginationData.current_page)+"  "+M(i.paginationData.last_page),1)):(p(),w("span",Lr,"  : "+M(i.paginationData.total),1))]),i.paginationData.last_page>1?(p(),w("div",Or,[c("button",{onClick:t[31]||(t[31]=n=>i.handlePageChange(i.paginationData.current_page-1)),disabled:i.paginationData.current_page===1,class:"px-3 py-2 rounded-md border border-border bg-background hover:bg-accent/10 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-colors"},"   ",8,Hr),c("div",Ur,[(p(!0),w(X,null,ee(i.getPageNumbers(i.paginationData.current_page,i.paginationData.last_page),n=>(p(),w("button",{key:n,onClick:h=>i.handlePageChange(n),class:se(["px-3 py-2 rounded-md border text-sm transition-colors min-w-[40px]",n===i.paginationData.current_page?"bg-accent text-accent-foreground border-accent font-semibold":"border-border bg-background hover:bg-accent/10"])},M(n),11,Xr))),128))]),c("button",{onClick:t[32]||(t[32]=n=>i.handlePageChange(i.paginationData.current_page+1)),disabled:i.paginationData.current_page===i.paginationData.last_page,class:"px-3 py-2 rounded-md border border-border bg-background hover:bg-accent/10 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-colors"},"   ",8,Yr)])):R("",!0)])):R("",!0),i.nestedFolders.length===0&&i.mediaFiles.length===0&&!i.loadingMedia?(p(),w("div",Nr,[c("p",Vr,M(i.isTrashFolder?" ":i.fileSearchQuery||i.fileTypeFilter?"  ":"       "),1),i.selectedFolder?(p(),w("p",qr," Debug: folder_id="+M(i.selectedFolder.id)+", is_trash="+M(i.selectedFolder.is_trash)+", nestedFolders="+M(i.nestedFolders.length)+", mediaFiles="+M(i.mediaFiles.length)+", loadingMedia="+M(i.loadingMedia),1)):R("",!0)])):R("",!0)])])):R("",!0)]),i.lightboxSources.length>0?(p(),j(a,{key:0,toggler:i.lightboxToggler,sources:i.lightboxSources,slide:i.lightboxSlide},null,8,["toggler","sources","slide"])):R("",!0),O(l,{show:i.showImageEditor,file:i.selectedFileForEdit,onClose:t[33]||(t[33]=n=>i.showImageEditor=!1),onSaved:i.handleImageSaved},null,8,["show","file","onSaved"]),i.showMoveModal?(p(),w("div",Zr,[c("div",Qr,[t[60]||(t[60]=c("h3",{class:"text-lg font-semibold mb-4"}," ",-1)),i.selectedFileForMove?(p(),w("p",Gr,M(i.selectedFileForMove.original_name),1)):R("",!0),c("div",Kr,[t[59]||(t[59]=c("label",{class:"text-sm font-medium mb-2 block"}," ",-1)),c("div",Jr,[c("div",$r,[c("button",{onClick:t[35]||(t[35]=n=>i.selectMoveFolder(null)),class:se(["w-full text-left px-3 py-2 rounded hover:bg-accent/10 transition-colors flex items-center gap-2",i.selectedMoveFolderId===null?"bg-accent/20 border border-accent/40":""])},[c("img",{src:i.getDefaultFolderIcon(),alt:" ",class:"w-[13.33px] h-[13.33px] object-contain",onError:t[34]||(t[34]=(...n)=>i.handleFolderImageError&&i.handleFolderImageError(...n))},null,40,ea),t[58]||(t[58]=c("span",{class:"flex-1"}," ",-1))],2),(p(!0),w(X,null,ee(i.allFolders,n=>(p(),w("div",{key:n.id,class:"mt-1"},[c("button",{onClick:h=>i.selectMoveFolder(n.id),class:se(["w-full text-left px-3 py-2 rounded hover:bg-accent/10 transition-colors flex items-center gap-2",i.selectedMoveFolderId===n.id?"bg-accent/20 border border-accent/40":""])},[c("img",{src:i.getFolderIcon(n),alt:n.name,class:"w-[13.33px] h-[13.33px] object-contain",onError:t[36]||(t[36]=(...h)=>i.handleFolderImageError&&i.handleFolderImageError(...h))},null,40,ia),c("span",oa,M(n.name),1),n.count?(p(),w("span",na,M(n.count)+"  ",1)):R("",!0)],10,ta)]))),128))])])]),c("div",sa,[c("button",{onClick:t[37]||(t[37]=n=>i.showMoveModal=!1),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},"  "),c("button",{onClick:t[38]||(t[38]=(...n)=>i.confirmMoveFile&&i.confirmMoveFile(...n)),disabled:i.moving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},M(i.moving?"...":""),9,ra)])])])):R("",!0)],64)}const ga=Jt(In,[["render",aa]]);export{ga as default};
