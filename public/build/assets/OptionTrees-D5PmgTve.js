import{_ as v,c as n,b as e,d as l,a as g,w as x,t as d,F as _,k as b,h as p,j as h,r as w,o as i,f as y}from"./app-BjvdfWfd.js";import{a as k,d as T}from"./api-V9GPpd21.js";import{S as f}from"./sweetalert2.esm.all-C0u8rGqG.js";const B={name:"DecisionOptionTrees",setup(){const c=p(!1),t=p(null),u=p([]),o=async()=>{c.value=!0,t.value=null;try{const r=await k("/option-trees");if(!r.ok)throw new Error("Ошибка загрузки деревьев опций");const a=await r.json();u.value=a.data||[]}catch(r){t.value=r.message||"Ошибка загрузки деревьев опций",console.error("Error fetching option trees:",r)}finally{c.value=!1}},m=async r=>{if((await f.fire({title:"Удалить дерево опций?",text:`Вы уверены, что хотите удалить дерево опций "${r.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Да, удалить",cancelButtonText:"Отмена",confirmButtonColor:"#dc2626"})).isConfirmed)try{if(!(await T(`/option-trees/${r.id}`)).ok)throw new Error("Ошибка удаления дерева опций");await f.fire({title:"Дерево опций удалено",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await o()}catch(s){await f.fire({title:"Ошибка",text:s.message||"Ошибка удаления дерева опций",icon:"error",confirmButtonText:"ОК"})}};return h(()=>{o()}),{loading:c,error:t,optionTrees:u,fetchOptionTrees:o,deleteOptionTree:m}}},C={class:"option-trees-page space-y-6"},j={class:"flex items-center justify-between"},O={class:"flex items-center gap-3"},E={key:0,class:"flex items-center justify-center py-12"},N={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},V={class:"text-destructive"},D={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},S={class:"divide-y divide-border"},F={class:"flex-1"},G={class:"font-medium text-foreground"},L={class:"text-sm text-muted-foreground"},M={class:"flex items-center gap-2"},q=["onClick"],z={key:3,class:"text-center py-12 bg-card rounded-lg border border-border"};function A(c,t,u,o,m,r){const a=w("router-link");return i(),n("div",C,[e("div",j,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Деревья опций"),e("p",{class:"text-muted-foreground mt-1"},"Управление древовидными опциями для услуг")],-1)),e("div",O,[g(a,{to:{name:"admin.decisions.option-trees.create"},class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"},{default:x(()=>[...t[0]||(t[0]=[e("span",null,"+",-1),e("span",null,"Создать дерево опций",-1)])]),_:1})])]),o.loading?(i(),n("div",E,[...t[2]||(t[2]=[e("p",{class:"text-muted-foreground"},"Загрузка деревьев опций...",-1)])])):l("",!0),o.error?(i(),n("div",N,[e("p",V,d(o.error),1)])):l("",!0),!o.loading&&o.optionTrees.length>0?(i(),n("div",D,[e("div",S,[(i(!0),n(_,null,b(o.optionTrees,s=>(i(),n("div",{key:s.id,class:"p-4 hover:bg-muted/10 transition-colors flex items-center justify-between"},[e("div",F,[e("h3",G,d(s.name),1),e("p",L," Родитель: "+d(s.parent||"Корневой")+" | Сортировка: "+d(s.sort)+" | "+d(s.is_active?"Активно":"Неактивно"),1)]),e("div",M,[g(a,{to:{name:"admin.decisions.option-trees.edit",params:{id:s.id}},class:"px-3 py-1.5 text-sm bg-muted hover:bg-muted/80 rounded-lg transition-colors inline-block"},{default:x(()=>[...t[3]||(t[3]=[y(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:H=>o.deleteOptionTree(s),class:"px-3 py-1.5 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-lg transition-colors"}," Удалить ",8,q)])]))),128))])])):l("",!0),!o.loading&&o.optionTrees.length===0?(i(),n("div",z,[...t[4]||(t[4]=[e("p",{class:"text-muted-foreground"},"Деревья опций не найдены",-1)])])):l("",!0)])}const P=v(B,[["render",A]]);export{P as default};
