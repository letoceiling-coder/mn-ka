import{_ as I,c as d,b as t,d as x,t as p,l as r,v as n,p as C,a as M,h as c,j as S,r as U,J as y,o as i}from"./app-BjvdfWfd.js";import{S as k}from"./sweetalert2.esm.all-C0u8rGqG.js";import F from"./Media-CJGq70ss.js";import"./api-V9GPpd21.js";import"./index-CoVxwd2Y.js";/* empty css                        */const K={name:"FooterSettings",components:{Media:F},setup(){const g=c(!0),e=c(!1),a=c(null),o=c(null),m=c(!1),u=c(null),f=l=>((!l.social_networks||typeof l.social_networks!="object")&&(l.social_networks={vk:null,instagram:null,telegram:null}),typeof l.vk_icon_id>"u"&&(l.vk_icon_id=null),typeof l.instagram_icon_id>"u"&&(l.instagram_icon_id=null),typeof l.telegram_icon_id>"u"&&(l.telegram_icon_id=null),typeof l.vk_icon>"u"&&(l.vk_icon=null),typeof l.instagram_icon>"u"&&(l.instagram_icon=null),typeof l.telegram_icon>"u"&&(l.telegram_icon=null),l),s=async()=>{g.value=!0,a.value=null;try{const l=await y.get("/api/v1/footer-settings"),b=f(l.data.data||{});o.value=b}catch(l){a.value=l.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching footer settings:",l)}finally{g.value=!1}},w=async()=>{if(o.value){e.value=!0,a.value=null;try{const l={...o.value};await y.put("/api/v1/footer-settings",l),await k.fire({icon:"success",title:"Успешно!",text:"Настройки футера успешно сохранены.",timer:2e3,showConfirmButton:!1})}catch(l){a.value=l.response?.data?.message||"Ошибка сохранения настроек",await k.fire({icon:"error",title:"Ошибка",text:a.value})}finally{e.value=!1}}},_=l=>{u.value=l,m.value=!0},h=l=>{if(!l||l.type!=="photo"||!u.value||!o.value)return;const b=u.value,v=`${b}_icon_id`,j=`${b}_icon`;o.value[v]=l.id,o.value[j]=l,u.value=null,m.value=!1},V=l=>{if(!o.value)return;const b=`${l}_icon_id`,v=`${l}_icon`;o.value[b]=null,o.value[v]=null};return S(()=>{s()}),{loading:g,saving:e,error:a,settings:o,saveSettings:w,showMediaModal:m,selectedSocialKey:u,selectIcon:_,handleIconSelected:h,clearIcon:V}}},T={class:"footer-settings-page space-y-6"},B={key:0,class:"flex items-center justify-center py-12"},N={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},D={class:"text-destructive"},E={key:2,class:"space-y-6"},z={class:"bg-card rounded-lg border border-border p-6 space-y-6"},A={class:"bg-card rounded-lg border border-border p-6 space-y-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"bg-card rounded-lg border border-border p-6 space-y-6"},L={class:"space-y-6"},O={class:"space-y-3"},P={class:"space-y-2"},Q={key:0,class:"flex items-center gap-3"},R=["src"],W={class:"flex gap-2"},X={key:1},Y={class:"space-y-3"},Z={class:"space-y-2"},$={key:0,class:"flex items-center gap-3"},ee=["src"],te={class:"flex gap-2"},oe={key:1},se={class:"space-y-3"},le={class:"space-y-2"},re={key:0,class:"flex items-center gap-3"},ne=["src"],de={class:"flex gap-2"},ie={key:1},ae={class:"flex justify-end"},ue=["disabled"],be={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col my-auto"},ce={class:"p-4 border-b border-border flex items-center justify-between flex-shrink-0"},ge={class:"flex-1 overflow-auto h-full"};function me(g,e,a,o,m,u){const f=U("Media");return i(),d("div",T,[e[44]||(e[44]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Настройки футера"),t("p",{class:"text-muted-foreground mt-1"}," Редактирование настроек футера сайта ")],-1)),o.loading?(i(),d("div",B,[...e[24]||(e[24]=[t("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):x("",!0),o.error?(i(),d("div",N,[t("p",D,p(o.error),1)])):x("",!0),!o.loading&&o.settings?(i(),d("div",E,[t("div",z,[e[28]||(e[28]=t("h2",{class:"text-xl font-semibold text-foreground"},"Основная информация",-1)),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.settings.title=s),placeholder:"Контакты",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.title]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Копирайт ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>o.settings.copyright=s),placeholder:"MNKA 2025. Все права защищены",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.copyright]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Ссылка на политику конфиденциальности ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>o.settings.privacy_policy_link=s),placeholder:"/police",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.privacy_policy_link]])])]),t("div",A,[e[35]||(e[35]=t("h2",{class:"text-xl font-semibold text-foreground"},"Контактная информация",-1)),t("div",J,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Метка отдела ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>o.settings.department_label=s),placeholder:"Отдел",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.department_label]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Телефон отдела ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>o.settings.department_phone=s),placeholder:"+7 (495) 123-45-67",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.department_phone]])])]),t("div",q,[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Метка объектов ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>o.settings.objects_label=s),placeholder:"Объекты",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.objects_label]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Телефон объектов ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>o.settings.objects_phone=s),placeholder:"+7 (495) 123-45-68",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.objects_phone]])])]),t("div",G,[t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Метка вопросов ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>o.settings.issues_label=s),placeholder:"Вопросы",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.issues_label]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Email для вопросов ",-1)),r(t("input",{type:"email","onUpdate:modelValue":e[8]||(e[8]=s=>o.settings.issues_email=s),placeholder:"info@example.com",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.issues_email]])])])]),t("div",H,[e[42]||(e[42]=t("h2",{class:"text-xl font-semibold text-foreground"},"Социальные сети",-1)),t("div",L,[t("div",O,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," VK ",-1)),r(t("input",{type:"url","onUpdate:modelValue":e[9]||(e[9]=s=>o.settings.social_networks.vk=s),placeholder:"https://vk.com/example",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.social_networks.vk]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Иконка для VK ",-1)),t("div",P,[o.settings.vk_icon?(i(),d("div",Q,[t("img",{src:o.settings.vk_icon.url,alt:"VK icon",class:"w-10 h-10 object-contain rounded border border-border bg-background"},null,8,R),t("div",W,[t("button",{type:"button",onClick:e[10]||(e[10]=s=>o.selectIcon("vk")),class:"px-3 py-1.5 text-xs bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20"}," Изменить "),t("button",{type:"button",onClick:e[11]||(e[11]=s=>o.clearIcon("vk")),class:"px-3 py-1.5 text-xs bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20"}," Удалить ")])])):(i(),d("div",X,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>o.selectIcon("vk")),class:"w-full h-10 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 text-xs text-muted-foreground"}," Выбрать иконку VK из медиа ")]))])])]),t("div",Y,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Instagram ",-1)),r(t("input",{type:"url","onUpdate:modelValue":e[13]||(e[13]=s=>o.settings.social_networks.instagram=s),placeholder:"https://instagram.com/example",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.social_networks.instagram]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Иконка для Instagram ",-1)),t("div",Z,[o.settings.instagram_icon?(i(),d("div",$,[t("img",{src:o.settings.instagram_icon.url,alt:"Instagram icon",class:"w-10 h-10 object-contain rounded border border-border bg-background"},null,8,ee),t("div",te,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>o.selectIcon("instagram")),class:"px-3 py-1.5 text-xs bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20"}," Изменить "),t("button",{type:"button",onClick:e[15]||(e[15]=s=>o.clearIcon("instagram")),class:"px-3 py-1.5 text-xs bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20"}," Удалить ")])])):(i(),d("div",oe,[t("button",{type:"button",onClick:e[16]||(e[16]=s=>o.selectIcon("instagram")),class:"w-full h-10 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 text-xs text-muted-foreground"}," Выбрать иконку Instagram из медиа ")]))])])]),t("div",se,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Telegram ",-1)),r(t("input",{type:"url","onUpdate:modelValue":e[17]||(e[17]=s=>o.settings.social_networks.telegram=s),placeholder:"https://t.me/example",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[n,o.settings.social_networks.telegram]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Иконка для Telegram ",-1)),t("div",le,[o.settings.telegram_icon?(i(),d("div",re,[t("img",{src:o.settings.telegram_icon.url,alt:"Telegram icon",class:"w-10 h-10 object-contain rounded border border-border bg-background"},null,8,ne),t("div",de,[t("button",{type:"button",onClick:e[18]||(e[18]=s=>o.selectIcon("telegram")),class:"px-3 py-1.5 text-xs bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20"}," Изменить "),t("button",{type:"button",onClick:e[19]||(e[19]=s=>o.clearIcon("telegram")),class:"px-3 py-1.5 text-xs bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20"}," Удалить ")])])):(i(),d("div",ie,[t("button",{type:"button",onClick:e[20]||(e[20]=s=>o.selectIcon("telegram")),class:"w-full h-10 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 text-xs text-muted-foreground"}," Выбрать иконку Telegram из медиа ")]))])])])])]),t("div",ae,[t("button",{onClick:e[21]||(e[21]=(...s)=>o.saveSettings&&o.saveSettings(...s)),disabled:o.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},p(o.saving?"Сохранение...":"Сохранить настройки"),9,ue)])])):x("",!0),o.showMediaModal?(i(),d("div",{key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto p-4",onClick:e[23]||(e[23]=C(s=>o.showMediaModal=!1,["self"]))},[t("div",be,[t("div",ce,[e[43]||(e[43]=t("h3",{class:"text-lg font-semibold"},"Выберите иконку",-1)),t("button",{onClick:e[22]||(e[22]=s=>o.showMediaModal=!1),class:"text-muted-foreground hover:text-foreground w-8 h-8 flex items-center justify-center rounded hover:bg-muted/10"}," ✕ ")]),t("div",ge,[M(f,{"selection-mode":!0,"count-file":1,onFileSelected:o.handleIconSelected},null,8,["onFileSelected"])])])])):x("",!0)])}const we=I(K,[["render",me]]);export{we as default};
