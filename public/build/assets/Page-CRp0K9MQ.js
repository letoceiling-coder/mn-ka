import{_ as P,c as r,e as C,d as y,b as s,a as H,t as h,w as T,h as v,j as A,i as n,r as w,C as B,E as D,o as a,f as N}from"./app-B_qSWCTG.js";import{S as R}from"./SEOHead-XiZUm880.js";const V={name:"Page",components:{SEOHead:R},setup(){const p=B(),o=D(),e=v(null),t=v(!0),l=v(null),_=async()=>{t.value=!0,l.value=null;try{const i=p.path;if(["/admin","/login","/register","/forgot-password","/reset-password","/403","/404","/500"].some(m=>i.startsWith(m))){o.replace("/404");return}const S=p.params.slug,f=await fetch(`/api/public/pages/${S}`);if(f.ok){const m=await f.json();if(m.data){e.value=m.data,e.value.seo_title?document.title=e.value.seo_title:document.title=e.value.title;let c=document.querySelector('meta[name="description"]');if(c||(c=document.createElement("meta"),c.setAttribute("name","description"),document.head.appendChild(c)),e.value.seo_description&&c.setAttribute("content",e.value.seo_description),e.value.seo_keywords){let d=document.querySelector('meta[name="keywords"]');d||(d=document.createElement("meta"),d.setAttribute("name","keywords"),document.head.appendChild(d)),d.setAttribute("content",e.value.seo_keywords)}}else{o.replace("/404");return}}else if(f.status===404){o.replace("/404");return}else l.value="Ошибка загрузки страницы"}catch(i){if(console.error("Error fetching page:",i),i.message&&i.message.includes("404")){o.replace("/404");return}l.value="Ошибка загрузки страницы"}finally{t.value=!1}};A(()=>{_()});const u=n(()=>e.value?window.location.origin+"/"+e.value.slug:""),g=n(()=>e.value?e.value.seo_title?e.value.seo_title:`${e.value.title} - МНКА`:"Страница - МНКА"),x=n(()=>e.value?e.value.seo_description?e.value.seo_description:`${e.value.title} - подробная информация на сайте МНКА. Профессиональные услуги по подбору и оформлению земельных участков.`:"Информационная страница сайта МНКА."),k=n(()=>e.value?e.value.seo_keywords?e.value.seo_keywords:`${e.value.title}, информация, услуги, земельные участки, МНКА`:"страница, информация"),b=n(()=>""),E=n(()=>e.value?{"@context":"https://schema.org","@type":"WebPage",name:e.value.title,description:x.value,url:u.value}:null);return{page:e,loading:t,error:l,canonicalUrl:u,ogImage:b,pageSchema:E,pageTitle:g,pageDescription:x,pageKeywords:k}}},j={class:"page-content"},I={key:1,class:"flex items-center justify-center py-12"},K={key:2,class:"w-full max-w-[1200px] mx-auto px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},M={class:"text-center"},O={class:"text-muted-foreground mb-6"},q={key:3,class:"w-full max-w-[1200px] mx-auto px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},L={class:"mb-8"},U={class:"text-3xl sm:text-4xl md:text-5xl font-semibold text-foreground mb-4"},W=["innerHTML"],z={key:1,class:"text-muted-foreground"};function F(p,o,e,t,l,_){const u=w("SEOHead"),g=w("router-link");return a(),r("div",j,[t.page?(a(),C(u,{key:0,title:t.pageTitle,description:t.pageDescription,keywords:t.pageKeywords,"og-image":t.ogImage,canonical:t.canonicalUrl,schema:t.pageSchema},null,8,["title","description","keywords","og-image","canonical","schema"])):y("",!0),t.loading?(a(),r("div",I,[...o[0]||(o[0]=[s("div",{class:"text-muted-foreground"},"Загрузка...",-1)])])):t.error?(a(),r("div",K,[s("div",M,[o[2]||(o[2]=s("h1",{class:"text-3xl font-semibold text-foreground mb-4"},"Страница не найдена",-1)),s("p",O,h(t.error),1),H(g,{to:"/",class:"inline-block px-6 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors"},{default:T(()=>[...o[1]||(o[1]=[N(" Вернуться на главную ",-1)])]),_:1})])])):t.page?(a(),r("article",q,[s("header",L,[s("h1",U,h(t.page.title),1)]),t.page.content?(a(),r("div",{key:0,class:"prose prose-lg max-w-none",innerHTML:t.page.content},null,8,W)):(a(),r("div",z,[...o[3]||(o[3]=[s("p",null,"Содержимое страницы пока не добавлено.",-1)])]))])):y("",!0)])}const Y=P(V,[["render",F],["__scopeId","data-v-af3ab0ab"]]);export{Y as default};
