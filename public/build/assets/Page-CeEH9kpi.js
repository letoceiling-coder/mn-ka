import{_ as E,c as s,e as L,d as x,b as o,a as P,t as y,w as T,h as v,j as C,i as n,r as h,C as H,o as a,f as A}from"./app-nwp2pFCB.js";import{S as B}from"./SEOHead-RaKa_Dm6.js";const D={name:"Page",components:{SEOHead:B},setup(){const u=H(),e=v(null),r=v(!0),t=v(null),_=async()=>{r.value=!0,t.value=null;try{const g=u.path;if(["/admin","/login","/register","/forgot-password","/reset-password","/403","/404","/500"].some(d=>g.startsWith(d))){t.value="Страница не найдена",r.value=!1,setTimeout(()=>{window.location.href="/404"},100);return}const S=u.params.slug,f=await fetch(`/api/public/pages/${S}`);if(f.ok){const d=await f.json();if(d.data){e.value=d.data,e.value.seo_title?document.title=e.value.seo_title:document.title=e.value.title;let l=document.querySelector('meta[name="description"]');if(l||(l=document.createElement("meta"),l.setAttribute("name","description"),document.head.appendChild(l)),e.value.seo_description&&l.setAttribute("content",e.value.seo_description),e.value.seo_keywords){let i=document.querySelector('meta[name="keywords"]');i||(i=document.createElement("meta"),i.setAttribute("name","keywords"),document.head.appendChild(i)),i.setAttribute("content",e.value.seo_keywords)}}else t.value="Страница не найдена"}else f.status===404?(t.value="Страница не найдена",setTimeout(()=>{window.location.href="/404"},2e3)):t.value="Ошибка загрузки страницы"}catch(g){console.error("Error fetching page:",g),t.value="Ошибка загрузки страницы"}finally{r.value=!1}};C(()=>{_()});const m=n(()=>e.value?window.location.origin+"/"+e.value.slug:""),p=n(()=>e.value?e.value.seo_title?e.value.seo_title:`${e.value.title} - Lagom`:"Страница - Lagom"),c=n(()=>e.value?e.value.seo_description?e.value.seo_description:`${e.value.title} - подробная информация на сайте Lagom. Профессиональные услуги по подбору и оформлению земельных участков.`:"Информационная страница сайта Lagom."),w=n(()=>e.value?e.value.seo_keywords?e.value.seo_keywords:`${e.value.title}, информация, услуги, земельные участки, Lagom`:"страница, информация"),k=n(()=>""),b=n(()=>e.value?{"@context":"https://schema.org","@type":"WebPage",name:e.value.title,description:c.value,url:m.value}:null);return{page:e,loading:r,error:t,canonicalUrl:m,ogImage:k,pageSchema:b,pageTitle:p,pageDescription:c,pageKeywords:w}}},N={class:"page-content"},V={key:1,class:"flex items-center justify-center py-12"},j={key:2,class:"w-full max-w-[1200px] mx-auto px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},I={class:"text-center"},K={class:"text-muted-foreground mb-6"},M={key:3,class:"w-full max-w-[1200px] mx-auto px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},O={class:"mb-8"},R={class:"text-3xl sm:text-4xl md:text-5xl font-semibold text-foreground mb-4"},q=["innerHTML"],U={key:1,class:"text-muted-foreground"};function W(u,e,r,t,_,m){const p=h("SEOHead"),c=h("router-link");return a(),s("div",N,[t.page?(a(),L(p,{key:0,title:t.pageTitle,description:t.pageDescription,keywords:t.pageKeywords,"og-image":t.ogImage,canonical:t.canonicalUrl,schema:t.pageSchema},null,8,["title","description","keywords","og-image","canonical","schema"])):x("",!0),t.loading?(a(),s("div",V,[...e[0]||(e[0]=[o("div",{class:"text-muted-foreground"},"Загрузка...",-1)])])):t.error?(a(),s("div",j,[o("div",I,[e[2]||(e[2]=o("h1",{class:"text-3xl font-semibold text-foreground mb-4"},"Страница не найдена",-1)),o("p",K,y(t.error),1),P(c,{to:"/",class:"inline-block px-6 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors"},{default:T(()=>[...e[1]||(e[1]=[A(" Вернуться на главную ",-1)])]),_:1})])])):t.page?(a(),s("article",M,[o("header",O,[o("h1",R,y(t.page.title),1)]),t.page.content?(a(),s("div",{key:0,class:"prose prose-lg max-w-none",innerHTML:t.page.content},null,8,q)):(a(),s("div",U,[...e[3]||(e[3]=[o("p",null,"Содержимое страницы пока не добавлено.",-1)])]))])):x("",!0)])}const Q=E(D,[["render",W],["__scopeId","data-v-6b5fff75"]]);export{Q as default};
