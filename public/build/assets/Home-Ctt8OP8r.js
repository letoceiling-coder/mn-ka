import{_ as $,d as h,e as N,f as E,c as u,g as _,a as k,n as V,b as n,h as T,t as p,w as D,i as U,r as C,o as i,j as H,T as W,k as A,F as S,l as F,m as Q,p as M,v as B,q as J,s as K,u as G,x as X}from"./app-BTbmnJkn.js";import{F as Y,a as Z,H as ee}from"./Faq-DvIAOMC_.js";import{D as te}from"./DecisionCard-C1oPiVcg.js";import{C as se}from"./CaseCard-cUkkGjsx.js";import{F as ne}from"./FeedbackForm-DtV-c4Fb.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const oe={name:"HeroBanner",components:{FeedbackModal:Y},props:{slug:{type:String,default:"home-banner"}},setup(o){const t=h(null),a=h(!0),e=h(!1),f=async()=>{try{const x=await fetch(`/api/public/banners/${o.slug}`);if(x.ok){const m=await x.json();m.data&&(t.value={...m.data,background_image:m.data.background_image?`/${m.data.background_image.replace(/^\//,"")}`:null,height_desktop:m.data.height_desktop||380,height_mobile:m.data.height_mobile||300})}}catch(x){console.error("Error fetching banner:",x)}finally{a.value=!1}},r=()=>{t.value.button_type==="method"&&(!t.value.button_value||t.value.button_value.trim()===""?e.value=!0:console.log("Method button clicked:",t.value.button_value))},s=()=>{e.value=!1},l=N(()=>{if(!t.value)return{};const x=t.value.height_desktop||380,m=t.value.height_mobile||300,b=x-m,w=`(${m}px + ${b} * ((100vw - 320px) / 880))`;return{"--banner-height-mobile":`${m}px`,"--banner-height-desktop":`${x}px`,minHeight:`${m}px`,height:`clamp(${m}px, ${w}, ${x}px)`}});return E(()=>{f()}),{banner:t,loading:a,bannerStyle:l,showFeedbackModal:e,handleButtonClick:r,handleFeedbackSuccess:s}}},ae={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},re={class:"w-full max-w-2xl"},ie={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},le={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},de={key:1,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},ce={key:2,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function ue(o,t,a,e,f,r){const s=C("FeedbackModal");return i(),u("div",ae,[e.banner&&e.banner.is_active?(i(),u("section",{key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg overflow-hidden shadow-sm",style:V(e.bannerStyle)},[n("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:V({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),n("div",{class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full flex items-center",style:V(e.bannerStyle)},[n("div",re,[e.banner.heading_1||e.banner.heading_2||e.banner.description?(i(),u("div",ie,[e.banner.heading_1?(i(),u("h1",le,p(e.banner.heading_1),1)):_("",!0),e.banner.heading_2?(i(),u("h2",de,p(e.banner.heading_2),1)):_("",!0),e.banner.description?(i(),u("p",ce,p(e.banner.description),1)):_("",!0)])):_("",!0),e.banner.button_text?(i(),T(U(e.banner.button_type==="method"?"button":"router-link"),{key:1,to:e.banner.button_type==="url"?e.banner.button_value:void 0,onClick:e.handleButtonClick,class:"inline-block bg-[#657C6C] hover:bg-[#55695a] active:bg-[#48554a] text-white font-medium text-base sm:text-lg px-8 sm:px-10 md:px-12 py-3 sm:py-3.5 md:py-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-100 shadow-lg"},{default:D(()=>[H(p(e.banner.button_text),1)]),_:1},8,["to","onClick"])):_("",!0)])],4)],4)):_("",!0),k(s,{"is-open":e.showFeedbackModal,onClose:t[0]||(t[0]=l=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])}const me=$(oe,[["render",ue]]),fe={name:"Decisions",components:{DecisionCard:te,Transition:A,TransitionGroup:W},setup(){const o=h("Выберите решение под ваш участок"),t=h([]),a=h(!0),e=h(null),f=async()=>{try{const m=await fetch("/api/public/decision-block/settings");if(!m.ok)throw new Error("Ошибка загрузки настроек");const b=await m.json();b.data&&b.data.title&&(o.value=b.data.title)}catch(m){console.error("Ошибка загрузки настроек:",m)}},r=async()=>{a.value=!0,e.value=null;try{const m=await fetch("/api/public/decision-block/chapters");if(!m.ok)throw new Error("Ошибка загрузки данных");const j=(await m.json()).data||[];t.value=j.map((w,I)=>({id:w.id,name:w.name,active:I===0,items:[...(w.products||[]).map(z=>({...z,category:"products"})),...(w.services||[]).map(z=>({...z,category:"services"}))]})),t.value.length>0&&!t.value.find(w=>w.active)&&(t.value[0].active=!0)}catch(m){console.error("Ошибка загрузки разделов:",m),e.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{a.value=!1}},s=N(()=>t.value.find(m=>m.active)||t.value[0]),l=N(()=>s.value?.items||[]),x=m=>{t.value.forEach(b=>{b.active=b.id===m.id})};return E(async()=>{await Promise.all([f(),r()])}),{title:o,chapters:t,activeChapter:s,activeItems:l,setActiveChapter:x,loading:a,error:e}}},xe={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},ge={class:"w-full max-w-[1200px] mx-auto"},he={class:"flex justify-center mb-6 sm:mb-8"},be={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900"},pe={key:0,class:"flex justify-center items-center py-12"},_e={key:1,class:"flex justify-center items-center py-12"},ve={class:"text-red-500"},ye={key:0,class:"flex flex-col sm:flex-row gap-3 sm:gap-0 mb-6 sm:mb-8"},we=["onClick"];function ke(o,t,a,e,f,r){const s=C("DecisionCard");return i(),u("div",xe,[n("div",ge,[n("div",he,[n("h2",be,p(e.title),1)]),e.loading?(i(),u("div",pe,[...t[0]||(t[0]=[n("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(i(),u("div",_e,[n("div",ve,p(e.error),1)])):(i(),u(S,{key:2},[e.chapters.length>0?(i(),u("div",ye,[(i(!0),u(S,null,F(e.chapters,(l,x)=>(i(),u("button",{key:l.id,onClick:m=>e.setActiveChapter(l),class:Q(["flex-1 px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-normal text-center transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","rounded-lg sm:rounded-none",l.active?"bg-[#657C6C] text-white border border-[#657C6C] hover:bg-[#55695a] focus:ring-[#657C6C] shadow-md":"bg-white text-black border border-[#657C6C] hover:bg-[#D7D7D7] focus:ring-[#657C6C] shadow-sm",x===0?l.active?"sm:rounded-l-lg sm:rounded-r-none":"sm:rounded-l-lg sm:rounded-r-none sm:border-r-0":"",x===e.chapters.length-1?l.active?"sm:rounded-r-lg sm:rounded-l-none":"sm:rounded-r-lg sm:rounded-l-none sm:border-l-0":""])},p(l.name),11,we))),128))])):_("",!0),k(A,{name:"fade-slide",mode:"out-in"},{default:D(()=>[e.activeItems.length>0?(i(),u("div",{key:`content-${e.activeChapter?.id}`,class:"relative"},[k(W,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:D(()=>[(i(!0),u(S,null,F(e.activeItems,(l,x)=>(i(),T(s,{key:`${l.id}-${l.category}-${e.activeChapter?.id}`,decision:l,slug:l.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(i(),u("div",{key:`empty-${e.activeChapter?.id}`,class:"flex justify-center items-center py-12"},[...t[1]||(t[1]=[n("div",{class:"text-gray-500"},"В этом разделе пока нет элементов",-1)])]))]),_:1})],64))])])}const Ce=$(fe,[["render",ke],["__scopeId","data-v-18b0a824"]]),qe={name:"ImagesCollect",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(o){const t={id:o.id||o.name,name:o.name||"",title:o.title||o.name||"",text:o.title||o.name||"",src:o.src||o.webp||""};this.$emit("answer",t),o.child?setTimeout(()=>{this.$emit("next",o.child)},300):setTimeout(()=>{this.$emit("next")},300)},handleImageError(o){o.target.src="/upload/quiz/placeholder.jpg"}}},$e={class:"mt-6"},Se={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},je={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},ze={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Fe={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4"},Ie=["onClick"],Me={class:"relative aspect-[245/140] sm:aspect-[245/140] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},Ne=["src","alt"],Te={class:"absolute top-3 left-3 right-3 z-10"},De={class:"text-white font-medium text-base sm:text-lg md:text-xl drop-shadow-lg"};function Ee(o,t,a,e,f,r){return i(),u("div",$e,[n("div",Se,[n("div",je,p(a.data.id),1),n("div",ze,p(a.data.question),1)]),n("div",Fe,[(i(!0),u(S,null,F(a.data.selects,s=>(i(),u("div",{key:s.id,class:"relative group cursor-pointer",onClick:l=>r.handleSelect(s)},[n("div",Me,[n("img",{src:s.src||s.webp||"/upload/quiz/placeholder.jpg",alt:s.name||s.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:t[0]||(t[0]=(...l)=>r.handleImageError&&r.handleImageError(...l))},null,40,Ne),t[1]||(t[1]=n("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent pointer-events-none"},null,-1)),n("div",Te,[n("h3",De,p(s.title),1)])])],8,Ie))),128))])])}const Qe=$(qe,[["render",Ee]]),Be={name:"Selects",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(o){const t={id:o.id||o.name,name:o.name||"",title:o.title||o.name||"",text:o.name||o.title||""};this.$emit("answer",t),setTimeout(()=>{this.$emit("next")},300)}}},Ve={class:"mt-6"},He={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ae={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Oe={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Ue={class:"space-y-3 sm:space-y-4 max-w-2xl"},We=["onClick"];function Pe(o,t,a,e,f,r){return i(),u("div",Ve,[n("div",He,[n("div",Ae,p(a.data.id),1),n("div",Oe,p(a.data.question),1)]),n("div",Ue,[(i(!0),u(S,null,F(a.data.selects,s=>(i(),u("button",{key:s.id,onClick:l=>r.handleSelect(s),class:"w-full px-6 py-4 text-left bg-white border-2 border-gray-200 rounded-lg hover:border-[#657C6C] hover:bg-gray-50 transition-all duration-200 text-base sm:text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"},p(s.name),9,We))),128))])])}const Le=$(Be,[["render",Pe]]),Re={name:"Inputs",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],setup(o,{emit:t}){const a=h(o.data?.answer||""),e=N(()=>{const r=a.value;return r==null?!1:r.toString().trim()!==""});return{answerValue:a,isAnswerValid:e,handleNext:()=>{const r=a.value?.toString().trim()||"";r&&(o.data&&(o.data.answer=r),t("answer",r),o.data?.child?t("next",o.data.child):t("next"))}}}},Je={class:"mt-6"},Ke={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ge={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Xe={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Ye={class:"max-w-2xl"},Ze={class:"block text-sm font-medium text-gray-700 mb-2"},et={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},tt=["placeholder"],st=["disabled"];function nt(o,t,a,e,f,r){return i(),u("div",Je,[n("div",Ke,[n("div",Ge,p(a.data.id),1),n("div",Xe,p(a.data.question),1)]),n("div",Ye,[n("label",Ze,p(a.data.label),1),n("div",et,[M(n("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.answerValue=s),type:"text",placeholder:a.data.placeholder,onKeyup:t[1]||(t[1]=J((...s)=>e.handleNext&&e.handleNext(...s),["enter"])),class:"flex-1 w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors disabled:opacity-50 focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none"},null,40,tt),[[B,e.answerValue]]),n("button",{onClick:t[2]||(t[2]=(...s)=>e.handleNext&&e.handleNext(...s)),disabled:!e.isAnswerValid,class:"px-6 sm:px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Далее ",8,st)])])])}const ot=$(Re,[["render",nt]]),at={name:"Forms",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],computed:{isFormValid(){return this.data.form.name&&this.data.form.name.trim()!==""&&this.data.form.email&&this.data.form.email.trim()!==""&&this.data.form.phone&&this.data.form.phone.trim()!==""&&this.data.form.check}},methods:{async handleSubmit(){this.isFormValid&&(this.$emit("answer",this.data.form),this.$emit("submit",{name:this.data.form.name,email:this.data.form.email,phone:this.data.form.phone}))}}},rt={class:"mt-6"},it={class:"mb-6 px-2"},lt=["innerHTML"],dt={class:"max-w-2xl"},ct={class:"flex items-start"},ut=["disabled"];function mt(o,t,a,e,f,r){return i(),u("div",rt,[n("div",it,[n("div",{class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900",innerHTML:a.data.question},null,8,lt)]),n("div",dt,[n("form",{onSubmit:t[4]||(t[4]=K((...s)=>r.handleSubmit&&r.handleSubmit(...s),["prevent"])),class:"space-y-4"},[n("div",null,[t[5]||(t[5]=n("label",{for:"quiz-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),M(n("input",{id:"quiz-name","onUpdate:modelValue":t[0]||(t[0]=s=>a.data.form.name=s),type:"text",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"Иван Иванов"},null,512),[[B,a.data.form.name]])]),n("div",null,[t[6]||(t[6]=n("label",{for:"quiz-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш email ",-1)),M(n("input",{id:"quiz-email","onUpdate:modelValue":t[1]||(t[1]=s=>a.data.form.email=s),type:"email",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"your@email.com"},null,512),[[B,a.data.form.email]])]),n("div",null,[t[7]||(t[7]=n("label",{for:"quiz-phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш телефон ",-1)),M(n("input",{id:"quiz-phone","onUpdate:modelValue":t[2]||(t[2]=s=>a.data.form.phone=s),type:"tel",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"+7 (999) 123-45-67"},null,512),[[B,a.data.form.phone]])]),n("div",ct,[M(n("input",{id:"quiz-check","onUpdate:modelValue":t[3]||(t[3]=s=>a.data.form.check=s),type:"checkbox",required:"",class:"mt-1 h-4 w-4 rounded border-gray-300 text-[#657C6C] focus:ring-[#657C6C] focus:ring-2"},null,512),[[G,a.data.form.check]]),t[8]||(t[8]=n("label",{for:"quiz-check",class:"ml-3 text-sm text-gray-600"}," Отправляя данную форму, вы соглашаетесь на обработку персональных данных ",-1))]),n("button",{type:"submit",disabled:!r.isFormValid,class:"w-full sm:w-auto px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Отправить ",8,ut)],32)])])}const ft=$(at,[["render",mt]]),xt={name:"Thank",props:{data:{type:Object,default:()=>({})},numberQuestion:{type:Number,required:!0}}},gt={class:"mt-6"};function ht(o,t,a,e,f,r){return i(),u("div",gt,[...t[0]||(t[0]=[X('<div class="flex flex-col items-center justify-center py-8 sm:py-12 px-4"><div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-green-100 flex items-center justify-center mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl sm:text-2xl md:text-3xl font-semibold text-gray-900 text-center mb-4"> Спасибо! </h3><p class="text-base sm:text-lg text-gray-600 text-center max-w-md"> Наши специалисты свяжутся с вами в течение 15 минут </p></div>',1)])])}const bt=$(xt,[["render",ht]]),pt={name:"Quiz",components:{"images-collect":Qe,selects:Le,inputs:ot,forms:ft,thank:bt},props:{title:{type:String,default:"Подберите идеальное решение"},description:{type:String,default:"Ответьте на несколько вопросов, и мы предложим оптимальный вариант"}},setup(){const o=h(!0),t=h(null),a=h(null),e=h([]),f=h(1),r=h([]),s=h(!1),l=h({}),x=h(!1),m=h(!1),b=async()=>{try{const d=await fetch("/api/public/quiz-block/settings");if(!d.ok)throw new Error("Ошибка загрузки настроек");const c=await d.json();c.data?(s.value=c.data.is_active===!0,c.data.quiz_id?await j(c.data.quiz_id):o.value=!1):o.value=!1}catch(d){console.error("Ошибка загрузки настроек блока квиза:",d),o.value=!1}},j=async d=>{o.value=!0,t.value=null;try{const c=await fetch(`/api/public/quiz-block/quiz/${d}`);if(!c.ok)throw new Error("Ошибка загрузки квиза");const g=await c.json();g.data&&(a.value={id:g.data.id,title:g.data.title,description:g.data.description},e.value=(g.data.questions||[]).filter(v=>v.is_active!==!1).sort((v,y)=>(v.order||0)-(y.order||0)).map((v,y)=>({...v,displayId:y+1})),e.value.length>0&&(f.value=e.value[0].displayId,r.value=[]))}catch(c){t.value=c.message||"Ошибка загрузки квиза",console.error("Ошибка загрузки квиза:",c)}finally{o.value=!1}},w=d=>{const c={id:d.displayId||d.id||d.order,question:d.question_text||"",type:d.question_type,...d.question_data||{}};return(d.question_type==="images-collect"||d.question_type==="selects")&&d.question_data?.selects&&(c.selects=d.question_data.selects.map((g,v)=>({id:g.id||v+1,name:g.name||"",src:g.src||"",title:g.title||g.name||"",child:g.child||null}))),d.question_type==="inputs"&&d.question_data&&(c.label=d.question_data.label||"",c.placeholder=d.question_data.placeholder||"",c.child=d.question_data.child||null,c.answer=""),d.question_type==="forms"&&d.question_data&&(c.form=d.question_data.form||{name:"",email:"",phone:"",check:!1},c.child=d.question_data.child||null,c.question=d.question_text||d.question_data.question||""),c},I=N(()=>e.value.find(d=>d.displayId===f.value)),z=d=>{const c=f.value;if(c&&!r.value.includes(c)&&r.value.push(c),d){const g=e.value.findIndex(v=>v.displayId===f.value);d>0&&d<=e.value.length?f.value=d:g<e.value.length-1&&(f.value=e.value[g+1].displayId)}else{const g=e.value.findIndex(v=>v.displayId===f.value);g<e.value.length-1&&(f.value=e.value[g+1].displayId)}},P=()=>{const d=e.value.findIndex(c=>c.displayId===f.value);if(d>0){const c=e.value[d-1];if(c){const g=r.value.lastIndexOf(f.value);g!==-1&&(r.value=r.value.slice(0,g)),f.value=c.displayId}}},L=d=>{const c=e.value.find(g=>g.displayId===f.value);c&&(l.value[c.id]={question_id:c.id,question_text:c.question_text,question_type:c.question_type,answer:d})},O=async d=>{if(!(m.value||x.value)){m.value=!0;try{const c=e.value.filter(q=>l.value[q.id]).map(q=>l.value[q.id].answer),g=await fetch("/api/public/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({quiz_id:a.value.id,answers:c,contact:d})});let v="",y=null;try{if(v=await g.text(),v)try{y=JSON.parse(v)}catch(q){throw console.error("Ошибка парсинга JSON:",q,"Response text:",v.substring(0,200)),new Error("Сервер вернул некорректный ответ. Пожалуйста, попробуйте еще раз.")}}catch(q){throw console.error("Ошибка чтения ответа:",q),new Error("Ошибка получения ответа от сервера")}if(!g.ok){const q=y&&y.message||y&&y.error||`Ошибка сервера: ${g.status} ${g.statusText}`;throw new Error(q)}if(!y)throw console.error("Сервер вернул пустой ответ. Response text:",v.substring(0,200)),new Error("Сервер вернул пустой ответ");if(typeof y!="object")throw console.error("Сервер вернул некорректный тип данных:",typeof y,y),new Error("Сервер вернул некорректный ответ");if(y.success===!0)return x.value=!0,{success:!0,message:y.message||"Спасибо за прохождение квиза!"};{const q=y.message||y.error||"Ошибка отправки результатов квиза";throw new Error(q)}}catch(c){return console.error("Ошибка отправки результатов квиза:",c),{success:!1,message:c.message||"Ошибка отправки результатов квиза. Пожалуйста, попробуйте еще раз."}}finally{m.value=!1}}},R=async d=>{const c=await O(d);c.success?z():alert(c.message||"Произошла ошибка при отправке результатов. Пожалуйста, попробуйте еще раз.")};return E(()=>{b()}),{loading:o,error:t,quizData:a,questions:e,currentQuestionNumber:f,currentQuestion:I,isActive:s,isCompleted:x,isSubmitting:m,formatQuestionData:w,goToNext:z,goToPrevious:P,handleAnswer:L,handleSubmit:R,submitQuiz:O,questionHistory:r}}},_t={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},vt={class:"w-full max-w-[1200px] mx-auto"},yt={class:"flex flex-col items-center mb-6 sm:mb-8"},wt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900 text-center mb-3"},kt={key:0,class:"text-gray-600 text-center text-base sm:text-lg"},Ct={key:0,class:"flex justify-center items-center py-12"},qt={key:1,class:"flex justify-center items-center py-12"},$t={class:"text-red-500"},St={key:0,class:"mb-4"};function jt(o,t,a,e,f,r){return e.isActive?(i(),u("div",_t,[n("div",vt,[n("div",yt,[n("h2",wt,p(e.quizData?.title||a.title),1),e.quizData?.description||a.description?(i(),u("p",kt,p(e.quizData?.description||a.description),1)):_("",!0)]),e.loading?(i(),u("div",Ct,[...t[1]||(t[1]=[n("div",{class:"text-gray-500"},"Загрузка квиза...",-1)])])):e.error?(i(),u("div",qt,[n("div",$t,p(e.error),1)])):e.currentQuestion?(i(),T(A,{key:2,name:"quiz-fade",mode:"out-in"},{default:D(()=>[n("div",null,[e.questionHistory.length>0||e.currentQuestionNumber>1?(i(),u("div",St,[n("button",{onClick:t[0]||(t[0]=(...s)=>e.goToPrevious&&e.goToPrevious(...s)),class:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm sm:text-base"},[...t[2]||(t[2]=[n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),H(" Назад ",-1)])])])):_("",!0),(i(),T(U(e.currentQuestion.question_type),{key:e.currentQuestion.id,data:e.formatQuestionData(e.currentQuestion),"number-question":e.currentQuestion.id,onNext:e.goToNext,onAnswer:e.handleAnswer,onSubmit:e.handleSubmit},null,40,["data","number-question","onNext","onAnswer","onSubmit"]))])]),_:1})):_("",!0)])])):_("",!0)}const zt=$(pt,[["render",jt],["__scopeId","data-v-1bcb4acb"]]),Ft={name:"WhyChooseUs",setup(){const o=h(null),t=h(!0),a=async()=>{try{const s=await fetch("/api/public/why-choose-us-block/settings");if(s.ok){const l=await s.json();l.data&&(o.value=l.data)}}catch(s){console.error("Error fetching WhyChooseUs block settings:",s)}finally{t.value=!1}},e=(s,l)=>{const x=[3,6,3,6,6,12],m=s.col||x[l]||3;return{3:"w-full md:w-1/4",6:"w-full md:w-1/2",12:"w-full"}[m]||"w-full md:w-1/4"},f=(s,l)=>{const x=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(s.bg||x[l]||"card-blue")==="card-green"?"bg-[#688E67]":"bg-[#F4F6FC]"},r=(s,l)=>{const x=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(s.bg||x[l]||"card-blue")==="card-green"?"text-white":"text-black"};return E(()=>{a()}),{settings:o,loading:t,getCardColumnClass:e,getCardBgClass:f,getCardTextClass:r}}},It={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},Mt={class:"w-full max-w-[1200px] mx-auto"},Nt={key:0,class:"flex justify-center mb-6 md:mb-8"},Tt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Dt={key:1,class:"flex flex-wrap -mx-3"},Et={key:0,class:"absolute bottom-[5px] right-[5px]"},Qt=["src","alt"],Bt=["innerHTML"];function Vt(o,t,a,e,f,r){return e.settings&&e.settings.is_active?(i(),u("section",It,[n("div",Mt,[e.settings.title?(i(),u("div",Nt,[n("h2",Tt,p(e.settings.title),1)])):_("",!0),e.settings.items&&e.settings.items.length>0?(i(),u("div",Dt,[(i(!0),u(S,null,F(e.settings.items,(s,l)=>(i(),u("div",{key:l,class:Q([e.getCardColumnClass(s,l),"px-3 mb-3"])},[n("div",{class:Q(["relative rounded-2xl h-[140px] overflow-hidden",e.getCardBgClass(s,l)])},[s.icon&&(s.icon.url||s.icon.disk&&s.icon.name)?(i(),u("div",Et,[n("img",{src:s.icon.url||`/${s.icon.disk}/${s.icon.name}`,alt:s.text,class:"h-auto max-h-[120px] object-contain",loading:"lazy"},null,8,Qt)])):_("",!0),s.text?(i(),u("div",{key:1,class:Q(["card-title absolute left-5 top-5 text-base sm:text-lg font-medium leading-[22px]",e.getCardTextClass(s,l)]),innerHTML:s.text},null,10,Bt)):_("",!0)],2)],2))),128))])):_("",!0)])])):_("",!0)}const Ht=$(Ft,[["render",Vt],["__scopeId","data-v-90ed1ee0"]]),At={name:"CasesBlock",components:{CaseCard:se},setup(){const o=h(null),t=h([]),a=h(!0),e=async()=>{try{const r=await fetch("/api/public/cases-block/settings");if(r.ok){const s=await r.json();s.data&&(o.value=s.data,o.value.case_ids&&o.value.case_ids.length>0&&await f(o.value.case_ids))}}catch(r){console.error("Error fetching Cases block settings:",r)}finally{a.value=!1}},f=async r=>{try{const s=r.join(","),l=await fetch(`/api/public/cases?ids=${s}&with=image,images`);if(l.ok){const x=await l.json();if(x.data){const m=new Map(x.data.map(b=>[b.id,b]));t.value=r.map(b=>m.get(b)).filter(b=>b!==void 0)}}}catch(s){console.error("Error fetching cases:",s)}};return E(()=>{e()}),{settings:o,cases:t,loading:a}}},Ot={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},Ut={class:"w-full max-w-[1200px] mx-auto"},Wt={key:0,class:"flex justify-center mb-6 md:mb-8"},Pt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Lt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"},Rt={class:"flex justify-center mt-8 md:mt-12"};function Jt(o,t,a,e,f,r){const s=C("CaseCard"),l=C("router-link");return e.settings&&e.settings.is_active&&e.cases.length>0?(i(),u("section",Ot,[n("div",Ut,[e.settings.title?(i(),u("div",Wt,[n("h2",Pt,p(e.settings.title),1)])):_("",!0),n("div",Lt,[(i(!0),u(S,null,F(e.cases,x=>(i(),T(s,{key:x.id,"case-item":x},null,8,["case-item"]))),128))]),n("div",Rt,[k(l,{to:"/cases",class:"inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base md:text-lg"},{default:D(()=>[...t[0]||(t[0]=[H(" Смотреть все кейсы ",-1)])]),_:1})])])])):_("",!0)}const Kt=$(At,[["render",Jt]]),Gt={name:"Home",components:{HeroBanner:me,HowWork:ee,Decisions:Ce,Quiz:zt,Faq:Z,WhyChooseUs:Ht,CasesBlock:Kt,FeedbackForm:ne}},Xt={class:"home-page"};function Yt(o,t,a,e,f,r){const s=C("HeroBanner"),l=C("Decisions"),x=C("Quiz"),m=C("HowWork"),b=C("Faq"),j=C("WhyChooseUs"),w=C("CasesBlock"),I=C("FeedbackForm");return i(),u("div",Xt,[k(s),k(l),k(x),k(m),k(b),k(j),k(w),k(I,{title:"Остались вопросы?",description:"Напишите нам, и мы с удовольствием ответим на все ваши вопросы"})])}const as=$(Gt,[["render",Yt]]);export{as as default};
