import{_ as v,c as n,b as e,d as c,a as g,w as x,t as l,F as _,k as b,h as f,j as h,r as w,o as i,f as y}from"./app-Sq4bpJln.js";import{a as k,d as B}from"./api-V9GPpd21.js";import{S as m}from"./sweetalert2.esm.all-C0u8rGqG.js";const C={name:"DecisionOptions",setup(){const d=f(!1),t=f(null),u=f([]),o=async()=>{d.value=!0,t.value=null;try{const s=await k("/options");if(!s.ok)throw new Error("Ошибка загрузки опций");const a=await s.json();u.value=a.data||[]}catch(s){t.value=s.message||"Ошибка загрузки опций",console.error("Error fetching options:",s)}finally{d.value=!1}},p=async s=>{if((await m.fire({title:"Удалить опцию?",text:`Вы уверены, что хотите удалить опцию "${s.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Да, удалить",cancelButtonText:"Отмена",confirmButtonColor:"#dc2626"})).isConfirmed)try{if(!(await B(`/options/${s.id}`)).ok)throw new Error("Ошибка удаления опции");await m.fire({title:"Опция удалена",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await o()}catch(r){await m.fire({title:"Ошибка",text:r.message||"Ошибка удаления опции",icon:"error",confirmButtonText:"ОК"})}};return h(()=>{o()}),{loading:d,error:t,options:u,fetchOptions:o,deleteOption:p}}},j={class:"options-page space-y-6"},O={class:"flex items-center justify-between"},E={class:"flex items-center gap-3"},N={key:0,class:"flex items-center justify-center py-12"},T={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},V={class:"text-destructive"},D={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},S={class:"divide-y divide-border"},F={class:"flex-1"},G={class:"font-medium text-foreground"},L={class:"text-sm text-muted-foreground"},M={class:"flex items-center gap-2"},q=["onClick"],z={key:3,class:"text-center py-12 bg-card rounded-lg border border-border"};function A(d,t,u,o,p,s){const a=w("router-link");return i(),n("div",j,[e("div",O,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Опции"),e("p",{class:"text-muted-foreground mt-1"},"Управление опциями для услуг")],-1)),e("div",E,[g(a,{to:{name:"admin.decisions.options.create"},class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"},{default:x(()=>[...t[0]||(t[0]=[e("span",null,"+",-1),e("span",null,"Создать опцию",-1)])]),_:1})])]),o.loading?(i(),n("div",N,[...t[2]||(t[2]=[e("p",{class:"text-muted-foreground"},"Загрузка опций...",-1)])])):c("",!0),o.error?(i(),n("div",T,[e("p",V,l(o.error),1)])):c("",!0),!o.loading&&o.options.length>0?(i(),n("div",D,[e("div",S,[(i(!0),n(_,null,b(o.options,r=>(i(),n("div",{key:r.id,class:"p-4 hover:bg-muted/10 transition-colors flex items-center justify-between"},[e("div",F,[e("h3",G,l(r.name),1),e("p",L," Порядок: "+l(r.order)+" | "+l(r.is_active?"Активна":"Неактивна"),1)]),e("div",M,[g(a,{to:{name:"admin.decisions.options.edit",params:{id:r.id}},class:"px-3 py-1.5 text-sm bg-muted hover:bg-muted/80 rounded-lg transition-colors inline-block"},{default:x(()=>[...t[3]||(t[3]=[y(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:H=>o.deleteOption(r),class:"px-3 py-1.5 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-lg transition-colors"}," Удалить ",8,q)])]))),128))])])):c("",!0),!o.loading&&o.options.length===0?(i(),n("div",z,[...t[4]||(t[4]=[e("p",{class:"text-muted-foreground"},"Опции не найдены",-1)])])):c("",!0)])}const P=v(C,[["render",A]]);export{P as default};
