import{_ as y,c as m,b as t,d as g,t as p,l as r,G as S,D as x,v as i,h as a,j as k,J as v,o as b}from"./app-CNaojq3k.js";import{S as c}from"./sweetalert2.esm.all-C0u8rGqG.js";const w={name:"SmtpSettings",setup(){const u=a(!0),e=a(!1),n=a(null),o=a(null),d=a(""),f=async()=>{u.value=!0,n.value=null;try{const l=await v.get("/api/v1/smtp-settings");o.value=l.data.data,d.value=""}catch(l){n.value=l.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching SMTP settings:",l)}finally{u.value=!1}},s=async()=>{e.value=!0,n.value=null;try{const l={...o.value};d.value&&(l.password=d.value),await v.put("/api/v1/smtp-settings",l),d.value="",await c.fire({icon:"success",title:"Успешно!",text:"Настройки SMTP успешно сохранены.",timer:2e3,showConfirmButton:!1})}catch(l){n.value=l.response?.data?.message||"Ошибка сохранения настроек",await c.fire({icon:"error",title:"Ошибка",text:n.value})}finally{e.value=!1}};return k(()=>{f()}),{loading:u,saving:e,error:n,settings:o,password:d,saveSettings:s}}},M={class:"smtp-settings-page space-y-6"},V={key:0,class:"flex items-center justify-center py-12"},P={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},T={class:"text-destructive"},U={key:2,class:"space-y-6"},E={class:"bg-card rounded-lg border border-border p-6 space-y-6"},j={class:"flex items-center justify-between"},B={class:"flex items-center gap-2"},C={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D={class:"flex justify-end"},N=["disabled"];function F(u,e,n,o,d,f){return b(),m("div",M,[e[24]||(e[24]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Настройки SMTP"),t("p",{class:"text-muted-foreground mt-1"}," Настройка параметров SMTP сервера для отправки почты ")],-1)),o.loading?(b(),m("div",V,[...e[10]||(e[10]=[t("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):g("",!0),o.error?(b(),m("div",P,[t("p",T,p(o.error),1)])):g("",!0),!o.loading&&o.settings?(b(),m("div",U,[t("div",E,[t("div",j,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold text-foreground"},"Параметры SMTP",-1)),t("div",B,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>o.settings.is_active=s),id:"is_active",class:"w-4 h-4 rounded border-border"},null,512),[[S,o.settings.is_active]]),e[11]||(e[11]=t("label",{for:"is_active",class:"text-sm font-medium text-foreground cursor-pointer"}," Использовать эти настройки ",-1))])]),t("div",C,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Mailer ",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.settings.mailer=s),class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},[...e[13]||(e[13]=[t("option",{value:"smtp"},"SMTP",-1),t("option",{value:"sendmail"},"Sendmail",-1),t("option",{value:"mailgun"},"Mailgun",-1),t("option",{value:"ses"},"Amazon SES",-1)])],512),[[x,o.settings.mailer]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," SMTP Host ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>o.settings.host=s),placeholder:"smtp.beget.com",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,o.settings.host]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," SMTP Port ",-1)),r(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>o.settings.port=s),placeholder:"465",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,o.settings.port,void 0,{number:!0}]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Шифрование ",-1)),r(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.settings.encryption=s),class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},[...e[17]||(e[17]=[t("option",{value:"ssl"},"SSL",-1),t("option",{value:"tls"},"TLS",-1),t("option",{value:""},"Нет",-1)])],512),[[x,o.settings.encryption]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Username (Email) ",-1)),r(t("input",{type:"email","onUpdate:modelValue":e[5]||(e[5]=s=>o.settings.username=s),placeholder:"info@proffi-center.ru",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,o.settings.username]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Password ",-1)),r(t("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=s=>o.password=s),placeholder:"Введите пароль (оставьте пустым чтобы не менять)",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,o.password]]),e[21]||(e[21]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Оставьте пустым, чтобы не изменять текущий пароль ",-1))]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," From Email ",-1)),r(t("input",{type:"email","onUpdate:modelValue":e[7]||(e[7]=s=>o.settings.from_email=s),placeholder:"info@proffi-center.ru",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,o.settings.from_email]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," From Name ",-1)),r(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>o.settings.from_name=s),placeholder:"mn-ka.ru",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,o.settings.from_name]])])])]),t("div",D,[t("button",{onClick:e[9]||(e[9]=(...s)=>o.saveSettings&&o.saveSettings(...s)),disabled:o.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},p(o.saving?"Сохранение...":"Сохранить настройки"),9,N)])])):g("",!0)])}const A=y(w,[["render",F]]);export{A as default};
