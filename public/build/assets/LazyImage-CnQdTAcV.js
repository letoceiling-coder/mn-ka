import{_ as v,h as n,j as y,B as b,c as s,d as c,x as d,b as C,o as i}from"./app-3zFgEymV.js";const h={name:"LazyImage",props:{src:{type:String,required:!0},alt:{type:String,default:""},imageClass:{type:String,default:"w-full h-full object-cover"},containerClass:{type:String,default:"relative w-full"},placeholderClass:{type:String,default:""},errorClass:{type:String,default:""},decoding:{type:String,default:"async"},eager:{type:Boolean,default:!1}},setup(u){const r=n(!1),a=n(!1),e=n(u.eager),t=n(null),o=n(null),l=()=>{r.value=!0,a.value=!1},f=()=>{a.value=!0,r.value=!1};return y(()=>{if(u.eager){e.value=!0;return}"IntersectionObserver"in window?(t.value=new IntersectionObserver(g=>{g.forEach(m=>{m.isIntersecting&&(e.value=!0,t.value.disconnect())})},{rootMargin:"50px"}),o.value?.parentElement&&t.value.observe(o.value.parentElement)):e.value=!0}),b(()=>{t.value&&t.value.disconnect()}),{loaded:r,error:a,shouldLoad:e,imageRef:o,handleLoad:l,handleError:f}}},L=["src","alt","decoding"];function x(u,r,a,e,t,o){return i(),s("div",{class:d(["lazy-image-container",a.containerClass])},[!e.loaded&&!e.error?(i(),s("div",{key:0,class:d(["absolute inset-0 bg-muted animate-pulse rounded",a.placeholderClass])},null,2)):c("",!0),e.shouldLoad?(i(),s("img",{key:1,ref:"imageRef",src:a.src,alt:a.alt,class:d(a.imageClass),onLoad:r[0]||(r[0]=(...l)=>e.handleLoad&&e.handleLoad(...l)),onError:r[1]||(r[1]=(...l)=>e.handleError&&e.handleError(...l)),loading:"lazy",decoding:a.decoding},null,42,L)):c("",!0),e.error?(i(),s("div",{key:2,class:d(["absolute inset-0 flex items-center justify-center bg-muted/50 rounded",a.errorClass])},[...r[2]||(r[2]=[C("span",{class:"text-muted-foreground text-sm"},"Ошибка загрузки",-1)])],2)):c("",!0)],2)}const S=v(h,[["render",x]]);export{S as L};
