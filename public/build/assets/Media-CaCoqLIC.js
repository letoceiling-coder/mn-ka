import{_ as kt,h as v,i as re,j as Ft,H as Ct,c,b as a,e as Mt,d as f,t as m,l as ne,v as De,F as w,k as D,p as x,x as C,f as je,n as Pe,m as Bt,D as Se,s as Tt,A as ve,r as Et,E as Dt,o as d}from"./app-Bh0m7I-u.js";import{a as U,c as he,d as le,b as jt}from"./api-V9GPpd21.js";import{F as Pt}from"./index-DDp45Uk0.js";import{S as p}from"./sweetalert2.esm.all-C0u8rGqG.js";/* empty css                        */const St=()=>({getAuthHeader:()=>{const n=localStorage.getItem("token"),b={};return n&&(b.Authorization=`Bearer ${n}`),b}}),It={name:"Media",components:{FsLightbox:Pt},props:{selectionMode:{type:Boolean,default:!1},countFile:{type:Number,default:1},selectedFiles:{type:Array,default:()=>[]}},emits:["file-selected"],setup(F,{emit:n}){console.log("[Media] setup() –≤—ã–∑–≤–∞–Ω"),Dt();const b=v(!1),e=v(!1),j=v(!1),h=v(null),q=v(""),o=v([]),i=v(null),P=v(""),Ie=v(!1),_=v([]),A=v([]),ae=v(!1),se=v(!1),ie=v(null),S=v({total:0,completed:0}),de=v(!1),pe=v([]),xe=v(1),J=v(!1),R=v(null),O=v(null),be=v([]),ce=v(!1),ue=v(!1),I=v([]),H=v([]),N="media_selected_folder_id",y=v(1),X=v(20),Ae=[10,20,30,40,50,100],Y=v(0),Z=v(1),$=v(""),ee=v(""),Q=v("created_at"),K=v("desc"),L=v(null),z=v(null),ye=[{value:"created_at",order:"desc",label:"–ù–æ–≤—ã–µ"},{value:"created_at",order:"asc",label:"–°—Ç–∞—Ä—ã–µ"},{value:"created_at",order:"asc",label:"–ü–æ –¥–∞—Ç–µ (–≤–æ–∑—Ä.)"},{value:"created_at",order:"desc",label:"–ü–æ –¥–∞—Ç–µ (—É–±—ã–≤.)"},{value:"original_name",order:"asc",label:"–ü–æ –∏–º–µ–Ω–∏ (–ê-–Ø)"},{value:"original_name",order:"desc",label:"–ü–æ –∏–º–µ–Ω–∏ (–Ø-–ê)"},{value:"size",order:"asc",label:"–ü–æ —Ä–∞–∑–º–µ—Ä—É (–≤–æ–∑—Ä.)"},{value:"size",order:"desc",label:"–ü–æ —Ä–∞–∑–º–µ—Ä—É (—É–±—ã–≤.)"}],Le=re(()=>{const t=ye.find(r=>r.value===Q.value&&r.order===K.value);return t?t.label:"–ù–æ–≤—ã–µ"}),ze=re(()=>q.value?o.value.filter(t=>t.name.toLowerCase().includes(q.value.toLowerCase())):o.value),M=re(()=>i.value?.is_trash===!0||i.value?.id===4),Ue=re(()=>{const t=_.value.length>0,r=!!i.value,l=!j.value,s=t&&r&&l;return console.log("[Media] canUpload check:",{hasFiles:t,hasFolder:r,notUploading:l,result:s,filesCount:_.value.length}),s}),B=async()=>{b.value=!0,h.value=null;try{const t=await U("/folders");if(!t.ok){let l=`HTTP error! status: ${t.status}`;try{const s=await t.json();l=s.message||s.error||l,console.error("[Media] API Error Data:",s)}catch{const u=await t.text();console.error("[Media] API Error Response (text):",u)}throw new Error(l)}const r=await t.json();console.log("[Media] API Response:",r),Array.isArray(r)?o.value=r:r.data&&Array.isArray(r.data)?o.value=r.data:o.value=[],console.log("[Media] Folders loaded:",o.value.length)}catch(t){console.error("[Media] Error fetching folders:",t),h.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞–ø–æ–∫: "+(t.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞")}finally{b.value=!1}},k=async(t,r=1,l=null)=>{e.value=!0,h.value=null;try{const s=new URLSearchParams;s.append("folder_id",t),s.append("page",r),s.append("per_page",X.value),l&&s.append("original_folder_id",l),$.value.trim()&&s.append("search",$.value.trim()),ee.value&&s.append("type",ee.value),s.append("sort_by",Q.value),s.append("sort_order",K.value);const u=await U(`/media?${s.toString()}`);if(!u.ok){let G=`HTTP error! status: ${u.status}`;try{const W=await u.json();G=W.message||W.error||G,console.error("[Media] API Error Data:",W)}catch{const oe=await u.text();console.error("[Media] API Error Response (text):",oe)}throw new Error(G)}const g=await u.json();console.log("[Media] Media API Response:",g),console.log("[Media] Response structure:",{hasData:!!g.data,isArray:Array.isArray(g.data),hasMeta:!!g.meta,hasLinks:!!g.links,keys:Object.keys(g)});let T=[];g.data&&Array.isArray(g.data)?(T=g.data,g.meta?(L.value={current_page:g.meta.current_page||r,last_page:g.meta.last_page||1,per_page:g.meta.per_page||X.value,total:g.meta.total||0,from:g.meta.from||0,to:g.meta.to||0},y.value=g.meta.current_page||r,Z.value=g.meta.last_page||1,Y.value=g.meta.total||0):g.current_page!==void 0?(L.value={current_page:g.current_page||r,last_page:g.last_page||1,per_page:g.per_page||X.value,total:g.total||0,from:g.from||0,to:g.to||0},y.value=g.current_page||r,Z.value=g.last_page||1,Y.value=g.total||0):L.value=null):Array.isArray(g)?(T=g,L.value=null):(T=[],L.value=null),console.log("[Media] Parsed pagination:",L.value),console.log("[Media] Parsed files:",T.length,"Total:",Y.value,"Page:",y.value,"of",Z.value),await ve(),A.value=[...T],await ve()}catch(s){console.error("[Media] Error fetching media files:",s),h.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤: "+(s.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞")}finally{e.value=!1}},Re=t=>{i.value&&k(i.value.id,t)},Oe=()=>{y.value=1,i.value&&k(i.value.id,1)},Ne=(t=!1)=>{z.value&&(clearTimeout(z.value),z.value=null),t?(y.value=1,i.value&&k(i.value.id,1)):z.value=setTimeout(()=>{y.value=1,i.value&&k(i.value.id,1),z.value=null},500)},Ve=()=>{y.value=1,i.value&&k(i.value.id,1)},qe=(t,r)=>{Q.value=t,K.value=r,y.value=1,i.value&&k(i.value.id,1)},He=(t,r)=>{const l=[];if(r<=5)for(let u=1;u<=r;u++)l.push(u);else if(t<=3)for(let u=1;u<=5;u++)l.push(u);else if(t>=r-2)for(let u=r-4;u<=r;u++)l.push(u);else for(let u=t-2;u<=t+2;u++)l.push(u);return l},we=async()=>{const t=i.value?i.value.id:null,r=i.value?`–≤ –ø–∞–ø–∫–µ "${i.value.name}"`:"–≤ –∫–æ—Ä–Ω–µ",{value:l}=await p.fire({title:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–∞–ø–∫—É",html:`–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É ${r}`,input:"text",inputPlaceholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏",inputValidator:s=>{if(!s||!s.trim())return"–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º";if(s.trim().length<2)return"–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞";if(s.trim().length>100)return"–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 100 —Å–∏–º–≤–æ–ª–æ–≤"},showCancelButton:!0,confirmButtonText:"–°–æ–∑–¥–∞—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!(!l||!l.trim())){b.value=!0,h.value=null;try{const s=await he("/folders",{name:l.trim(),parent_id:t});if(!s.ok){const g=await s.json();throw new Error(g.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏")}const u=await s.json();p.fire({title:"–ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞",html:`–ü–∞–ø–∫–∞ <strong>"${l.trim()}"</strong> —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ ${r}.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await B(),i.value&&await V(i.value.id),console.log("[Media] Folder created successfully")}catch(s){console.error("[Media] Error creating folder:",s),p.fire({title:"–û—à–∏–±–∫–∞",text:s.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏",icon:"error",confirmButtonText:"–û–ö"}),h.value=s.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏"}finally{b.value=!1}}},V=async t=>{try{let r;M.value?r="/folders?trash=1":r=`/folders?parent_id=${t}`;const l=await U(r);if(!l.ok){console.error("[Media] Error fetching nested folders:",l.status),I.value=[];return}const s=await l.json();Array.isArray(s)?I.value=s:s.data&&Array.isArray(s.data)?I.value=s.data:I.value=[],console.log("[Media] Nested folders loaded:",I.value.length,M.value?"(trash)":"")}catch(r){console.error("[Media] Error fetching nested folders:",r),I.value=[]}},Qe=async t=>{if(!t){H.value=[];return}const r=[];let l=t;for(;l;)if(r.unshift({id:l.id,name:l.name,folder:l}),l.parent&&l.parent.id)l=l.parent;else if(l.parent_id)try{const s=await U(`/folders/${l.parent_id}`);if(s.ok){const u=await s.json();l=u.data||u}else break}catch(s){console.error("[Media] Error loading parent folder:",s);break}else break;r.unshift({id:null,name:"–ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞",folder:null}),H.value=r},_e=t=>{try{t?localStorage.setItem(N,t.toString()):localStorage.removeItem(N)}catch(r){console.error("[Media] Error saving folder to localStorage:",r)}},Ke=async()=>{try{const t=localStorage.getItem(N);if(t){const r=parseInt(t);if(isNaN(r))localStorage.removeItem(N);else{const l=await U(`/folders/${r}`);if(l.ok){const s=await l.json(),u=s.data||s;if(u)return await ge(u,!1),!0}else if(l.status===404)return console.log("[Media] Folder from localStorage not found (deleted), clearing storage"),localStorage.removeItem(N),!1}}}catch(t){console.error("[Media] Error loading folder from localStorage:",t),localStorage.removeItem(N)}return!1},ge=async(t,r=!0)=>{if(console.log("[Media] Folder clicked:",t),t.deleted_at||M.value&&t.id!==4)try{const l=await U(`/folders/${t.id}`);if(l.ok){const s=await l.json();t=s.data||s}}catch(l){console.error("[Media] Error loading deleted folder:",l)}i.value=t,y.value=1,$.value="",ee.value="",Q.value="created_at",K.value="desc",r&&!M.value&&_e(t.id),await Qe(t),t.deleted_at?await Promise.all([k(4,1,t.id),V(t.id)]):await Promise.all([k(t.id,1),V(t.id)])},Ge=()=>{ie.value&&ie.value.click()},We=t=>{if(t.target.files){const r=Array.from(t.target.files),l=10*1024*1024,s=r.filter(u=>u.size>l?(console.warn(`[Media] –§–∞–π–ª ${u.name} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 10 –ú–ë –∏ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω`),!1):!0);s.forEach(u=>{u.uploadProgress=void 0,u.uploadError=void 0}),_.value=s,j.value=!1,S.value={total:0,completed:0},s.length<r.length&&(h.value="–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–µ–≤—ã—à–∞—é—Ç 10 –ú–ë –∏ –Ω–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã"),console.log("[Media] Files selected:",s.length,"selectedFiles.value.length:",_.value.length),t.target&&(t.target.value="")}},ke=t=>{if(ae.value=!1,se.value=!1,t.dataTransfer.files&&t.dataTransfer.files.length>0){const r=Array.from(t.dataTransfer.files),l=r.filter(s=>s.size>10485760?(console.warn(`[Media] –§–∞–π–ª ${s.name} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 10 –ú–ë –∏ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω`),!1):!0);l.forEach(s=>{s.uploadProgress=void 0,s.uploadError=void 0}),_.value=l,j.value=!1,S.value={total:0,completed:0},l.length<r.length&&(h.value="–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–µ–≤—ã—à–∞—é—Ç 10 –ú–ë –∏ –Ω–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã"),console.log("[Media] Files dropped:",l.length,"selectedFiles.value.length:",_.value.length)}},Je=t=>{ae.value=!1,se.value=!1,ke(t)},Xe=(t,r)=>{t.target.style.display="none",r.src&&(r.imageError=!0)},me=v(new Set),Fe=()=>`${window.location.origin}/system/folder.png`,Ye=t=>!t||!t.src?Fe():`${window.location.origin}/system/${t.src}.png`,Ze=t=>{const r=t.target,l=r.parentElement;if(l&&!l.querySelector("span.folder-fallback")){r.style.display="none";const s=document.createElement("span");l.classList.contains("aspect-square")||r.classList.contains("w-full")?s.className="text-4xl folder-fallback":s.className="text-sm folder-fallback",s.textContent="üìÅ",l.appendChild(s)}},Ce=t=>{const r=t.extension?.toLowerCase()||"",l=t.type?.toLowerCase()||"";return l==="photo"||l==="video"?null:r==="pdf"||l==="document"&&r==="pdf"?"üìÑ":["doc","docx"].includes(r)?"üìù":["xls","xlsx"].includes(r)?"üìä":["ppt","pptx"].includes(r)?"üìΩÔ∏è":["zip","rar","7z","tar","gz"].includes(r)?"üì¶":["txt","rtf"].includes(r)?"üìÉ":["js","ts","php","py","java","cpp","html","css","scss","json","xml"].includes(r)?"üíª":["mp3","wav","ogg","m4a","flac","aac"].includes(r)?"üéµ":"üìé"},$e=t=>{if(!t)return"0 B";const r=1024,l=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(r));return Math.round(t/Math.pow(r,s)*100)/100+" "+l[s]},et=t=>{if(t.type)return t.type.startsWith("image/");const r=te(t.name);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(r)},tt=t=>{if(t.type)return t.type.startsWith("video/");const r=te(t.name);return["mp4","avi","mov","webm","mkv","wmv","flv"].includes(r)},te=t=>{if(!t)return"";const r=t.split(".");return r.length>1?r[r.length-1].toLowerCase():""},ot=t=>{if(t instanceof File){const r=URL.createObjectURL(t);return me.value.add(r),r}return t.url||""},fe=()=>{me.value.forEach(t=>{URL.revokeObjectURL(t)}),me.value.clear()},rt=t=>{const r=te(t.name);return Ce({extension:r,type:t.type})},nt=(t,r,l)=>new Promise((s,u)=>{const g=new XMLHttpRequest,T=new FormData;T.append("file",t),T.append("folder_id",r),g.upload.addEventListener("progress",E=>{if(E.lengthComputable){const _t=Math.round(E.loaded/E.total*100);l(_t)}}),g.addEventListener("load",()=>{if(g.status>=200&&g.status<300)try{const E=JSON.parse(g.responseText);s(E)}catch{s(g.responseText)}else try{const E=JSON.parse(g.responseText);u(new Error(E.message||`HTTP error! status: ${g.status}`))}catch{u(new Error(`HTTP error! status: ${g.status}`))}}),g.addEventListener("error",()=>{u(new Error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞"))}),g.addEventListener("abort",()=>{u(new Error("–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞"))});const{getAuthHeader:G}=St(),oe=G().Authorization?.replace("Bearer ","");g.open("POST","/api/v1/media"),oe&&g.setRequestHeader("Authorization",`Bearer ${oe}`),g.setRequestHeader("Accept","application/json"),g.send(T)}),lt=async()=>{if(_.value.length===0){h.value="–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏";return}if(!i.value){h.value="–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏";return}j.value=!0,h.value=null,S.value={total:_.value.length,completed:0},_.value.forEach(t=>{t.uploadProgress=0});try{const t=_.value.map(async(r,l)=>{try{const s=await nt(r,i.value.id,u=>{r.uploadProgress=u});return S.value.completed++,r.uploadProgress=100,s}catch(s){throw S.value.completed++,r.uploadProgress=0,r.uploadError=s.message,s}});await Promise.all(t),fe(),await k(i.value.id),await B(),_.value=[],S.value={total:0,completed:0},console.log("[Media] Files uploaded successfully")}catch(t){console.error("[Media] Error uploading files:",t),h.value=t.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤"}finally{j.value=!1}},at=()=>{fe(),_.value=[],h.value=null,j.value=!1,S.value={total:0,completed:0},console.log("[Media] Upload cancelled")},Me=()=>{i.value=null,A.value=[],I.value=[],H.value=[],_e(null),console.log("[Media] Back to folders list")},st=async t=>{t.id===null?Me():await ge(t.folder)},it=()=>{we()},Be=t=>t.type==="photo"||t.type==="video"?!0:["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"].includes(t.extension?.toLowerCase()),Te=t=>{const r=A.value.filter(u=>u.type==="photo"||u.type==="video"),l=r.findIndex(u=>u.id===t.id);if(l===-1){console.error("[Media] File not found in mediaFiles:",t);return}const s=r.map(u=>u.url);console.log("[Media] Opening lightbox:",{currentIndex:l,slide:l+1,totalSources:s.length,file:t.original_name}),pe.value=s,xe.value=l+1,ve(()=>{de.value=!de.value})},dt=t=>!F.selectedFiles||!Array.isArray(F.selectedFiles)?!1:F.selectedFiles.some(r=>r.id===t.id),ct=(t,r)=>{if(console.log("[Media] handleFileClick called:",{file:t,selectionMode:F.selectionMode,fileType:t?.type}),F.selectionMode&&t&&(t.type==="photo"||t.type==="video")){console.log("[Media] Selection mode: selecting file:",t),r?.stopPropagation(),n("file-selected",t);return}!F.selectionMode&&t&&Ee(t)},Ee=t=>{if(F.selectionMode){console.log("[Media] Selection mode: emitting file-selected event for file:",t),n("file-selected",t);return}if(t.type==="photo"||t.type==="video"){Te(t);return}if(Be(t)){const r=window.location.origin+t.url;(t.extension?.toLowerCase()==="pdf"||["doc","docx","xls","xlsx","ppt","pptx"].includes(t.extension?.toLowerCase())||t.extension?.toLowerCase()==="txt")&&window.open(r,"_blank")}},ut=t=>{const r=window.location.origin+t.url,l=document.createElement("a");l.href=r,l.download=t.original_name,document.body.appendChild(l),l.click(),document.body.removeChild(l)},gt=t=>{t.type==="photo"&&(window.location.href=`/admin/media/${t.id}/edit`)},mt=async()=>{try{const t=await U("/folders?paginate=0");if(!t.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞–ø–æ–∫");const r=await t.json();let l=[];Array.isArray(r)?l=r:r.data&&Array.isArray(r.data)&&(l=r.data);const s=R.value?.folder_id;be.value=l.filter(u=>!(u.id===s||u.id===4||u.is_trash===!0))}catch(t){console.error("[Media] Error fetching all folders:",t),h.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –ø–∞–ø–æ–∫"}},ft=async t=>{R.value=t,O.value=t.folder_id,await mt(),J.value=!0},vt=t=>{O.value=t},ht=async()=>{if(R.value){if(O.value===R.value.folder_id){J.value=!1;return}ce.value=!0,h.value=null;try{const t={folder_id:O.value===null?null:O.value},r=await jt(`/media/${R.value.id}`,t);if(!r.ok){const l=await r.json();throw new Error(l.message||"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ñ–∞–π–ª–∞")}i.value&&await k(i.value.id,y.value),await B(),J.value=!1,console.log("[Media] File moved successfully")}catch(t){console.error("[Media] Error moving file:",t),h.value=t.message||"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ñ–∞–π–ª–∞"}finally{ce.value=!1}}},pt=async t=>{if((await p.fire({title:"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª?",html:`–§–∞–π–ª <strong>"${t.original_name}"</strong> –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∏—Å—Ö–æ–¥–Ω—É—é –ø–∞–ø–∫—É.`,icon:"question",showCancelButton:!0,confirmButtonText:"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)try{const l=await he(`/media/${t.id}/restore`);if(!l.ok){const s=await l.json();throw new Error(s.message||"–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞")}p.fire({title:"–§–∞–π–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",html:`–§–∞–π–ª <strong>"${t.original_name}"</strong> —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),i.value&&await k(i.value.id,y.value),await B(),console.log("[Media] File restored successfully")}catch(l){console.error("[Media] Error restoring file:",l),p.fire({title:"–û—à–∏–±–∫–∞",text:l.message||"–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞",icon:"error",confirmButtonText:"–û–ö"}),h.value=l.message||"–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞"}},xt=async t=>{if(M.value){if(!(await p.fire({title:"–ë–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?",html:`–§–∞–π–ª <strong>"${t.original_name}"</strong> –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –Ω–∞–≤—Å–µ–≥–¥–∞ –∏ –µ–≥–æ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.`,icon:"warning",showCancelButton:!0,confirmButtonText:"–î–∞, —É–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞",cancelButtonText:"–û—Ç–º–µ–Ω–∞",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"swal2-confirm-danger",cancelButton:"swal2-cancel"}})).isConfirmed)return}else if(!(await p.fire({title:"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?",html:`–§–∞–π–ª <strong>"${t.original_name}"</strong> –±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É.`,icon:"question",showCancelButton:!0,confirmButtonText:"–£–¥–∞–ª–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)return;try{const r=await le(`/media/${t.id}`);if(!r.ok){const l=await r.json();throw new Error(l.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞")}p.fire({title:M.value?"–§–∞–π–ª —É–¥–∞–ª—ë–Ω":"–§–∞–π–ª –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),i.value&&await k(i.value.id,y.value),await B(),console.log("[Media] File deleted successfully")}catch(r){console.error("[Media] Error deleting file:",r),p.fire({title:"–û—à–∏–±–∫–∞",text:r.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞",icon:"error",confirmButtonText:"–û–ö"}),h.value=r.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞"}},bt=async()=>{if(!M.value||A.value.length===0)return;const t=A.value.length;if((await p.fire({title:"–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∫–æ—Ä–∑–∏–Ω—É?",html:`–ë—É–¥—É—Ç <strong>–±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã</strong> –≤—Å–µ —Ñ–∞–π–ª—ã (${t} —à—Ç.) –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.<br><br>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!`,icon:"warning",showCancelButton:!0,confirmButtonText:`–î–∞, —É–¥–∞–ª–∏—Ç—å –≤—Å–µ (${t})`,cancelButtonText:"–û—Ç–º–µ–Ω–∞",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"swal2-confirm-danger",cancelButton:"swal2-cancel"}})).isConfirmed){ue.value=!0,h.value=null;try{let l=0,s=0;for(const u of A.value)try{(await le(`/media/${u.id}`)).ok?l++:s++}catch(g){console.error(`[Media] Error deleting file ${u.id}:`,g),s++}s===0?p.fire({title:"–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞",html:`–£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: <strong>${l}</strong>`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}):p.fire({title:"–ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ",html:`–£–¥–∞–ª–µ–Ω–æ: <strong>${l}</strong><br>–û—à–∏–±–æ–∫: <strong>${s}</strong>`,icon:"warning",confirmButtonText:"–û–ö"}),i.value&&await k(i.value.id,y.value),await B(),console.log("[Media] Trash cleared:",{deletedCount:l,errorCount:s})}catch(l){console.error("[Media] Error clearing trash:",l),p.fire({title:"–û—à–∏–±–∫–∞",text:l.message||"–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã",icon:"error",confirmButtonText:"–û–ö"}),h.value=l.message||"–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã"}finally{ue.value=!1}}},yt=async t=>{if(t.protected){p.fire({title:"–û—à–∏–±–∫–∞",text:"–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—É—é –ø–∞–ø–∫—É",icon:"error",confirmButtonText:"–û–ö"});return}if(M.value){if(!(await p.fire({title:"–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞?",html:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ <strong>–±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–∏—Ç—å</strong> –ø–∞–ø–∫—É <strong>"${t.name}"</strong> –∏ –≤—Å—ë –µ—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ?<br><br>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"–î–∞, —É–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞",cancelButtonText:"–û—Ç–º–µ–Ω–∞"})).isConfirmed)return;b.value=!0,h.value=null;try{const s=await le(`/folders/${t.id}?force=1`);if(!s.ok){const u=await s.json();throw new Error(u.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏")}i.value&&await V(i.value.id),p.fire({title:"–ü–∞–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∞",html:`–ü–∞–ø–∫–∞ <strong>"${t.name}"</strong> –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω–∞.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder permanently deleted")}catch(s){console.error("[Media] Error deleting folder:",s),p.fire({title:"–û—à–∏–±–∫–∞",text:s.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏",icon:"error",confirmButtonText:"–û–ö"}),h.value=s.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏"}finally{b.value=!1}return}if((await p.fire({title:"–£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É?",html:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É <strong>"${t.name}"</strong> –∏ –≤—Å—ë –µ—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ?<br><br>–ü–∞–ø–∫–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"–î–∞, —É–¥–∞–ª–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞"})).isConfirmed){b.value=!0,h.value=null;try{const l=await le(`/folders/${t.id}`);if(!l.ok){const s=await l.json();throw new Error(s.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏")}await B(),i.value&&await V(i.value.id),p.fire({title:"–ü–∞–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∞",html:`–ü–∞–ø–∫–∞ <strong>"${t.name}"</strong> –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder deleted successfully")}catch(l){console.error("[Media] Error deleting folder:",l),p.fire({title:"–û—à–∏–±–∫–∞",text:l.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏",icon:"error",confirmButtonText:"–û–ö"}),h.value=l.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏"}finally{b.value=!1}}},wt=async t=>{if((await p.fire({title:"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–ø–∫—É?",html:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–ø–∫—É <strong>"${t.name}"</strong> –∏ –≤—Å—ë –µ—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"–î–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞"})).isConfirmed){b.value=!0,h.value=null;try{const l=await he(`/folders/${t.id}/restore`);if(!l.ok){const s=await l.json();throw new Error(s.message||"–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏")}i.value&&await V(i.value.id),await B(),p.fire({title:"–ü–∞–ø–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞",html:`–ü–∞–ø–∫–∞ <strong>"${t.name}"</strong> —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder restored successfully")}catch(l){console.error("[Media] Error restoring folder:",l),p.fire({title:"–û—à–∏–±–∫–∞",text:l.message||"–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏",icon:"error",confirmButtonText:"–û–ö"}),h.value=l.message||"–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–ø–∫–∏"}finally{b.value=!1}}};return Ft(async()=>{console.log("[Media] onMounted() –≤—ã–∑–≤–∞–Ω"),await B(),await Ke()||(i.value=null,H.value=[])}),Ct(()=>{fe(),z.value&&clearTimeout(z.value)}),{selectionMode:F.selectionMode,isFileSelected:dt,loading:b,loadingMedia:e,uploading:j,error:h,searchQuery:q,folders:o,selectedFolder:i,newFolderName:P,isCreateFolderOpen:Ie,selectedFiles:_,mediaFiles:A,nestedFolders:I,breadcrumbs:H,filteredFolders:ze,isTrashFolder:M,canUpload:Ue,uploadProgress:S,isDragging:ae,isDraggingButton:se,lightboxToggler:de,lightboxSources:pe,lightboxSlide:xe,isPreviewable:Be,openLightbox:Te,handleFileClick:ct,openFilePreview:Ee,handleDownloadFile:ut,handleEditFile:gt,handleMoveFile:ft,handleRestoreFile:pt,showMoveModal:J,selectedFileForMove:R,selectedMoveFolderId:O,allFolders:be,moving:ce,clearingTrash:ue,selectMoveFolder:vt,confirmMoveFile:ht,handleBack:Me,handleBreadcrumbClick:st,handleToggleCreateFolder:it,handleCreateFolder:we,handleFolderClick:ge,fileInput:ie,handleFileButtonClick:Ge,handleFileSelect:We,handleDrop:ke,handleDropOnButton:Je,handleImageError:Xe,getDefaultFolderIcon:Fe,getFolderIcon:Ye,handleFolderImageError:Ze,getFileIcon:Ce,formatFileSize:$e,isImageFile:et,isVideoFile:tt,getFileExtension:te,getFilePreview:ot,getFileIconFromFile:rt,handleUpload:lt,handleCancel:at,handleDeleteFile:xt,handleClearTrash:bt,handleDeleteFolder:yt,handleRestoreFolder:wt,currentPage:y,perPage:X,perPageOptions:Ae,totalFiles:Y,lastPage:Z,fileSearchQuery:$,fileTypeFilter:ee,fileSortBy:Q,fileSortOrder:K,sortOptions:ye,currentSortLabel:Le,paginationData:L,handlePageChange:Re,handlePerPageChange:Oe,handleFileSearch:Ne,handleTypeFilter:Ve,handleSortChange:qe,getPageNumbers:He}}},At={class:"space-y-6 bg-transparent"},Lt={class:"flex items-center justify-between"},zt={class:"flex items-center gap-4"},Ut={class:"text-3xl font-semibold text-foreground"},Rt={class:"text-muted-foreground mt-1"},Ot={class:"flex gap-2"},Nt={key:0},Vt=["disabled"],qt={key:0,class:"flex items-center justify-center py-12"},Ht={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},Qt={class:"text-destructive"},Kt={key:2,class:"relative"},Gt={key:3,class:"grid gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},Wt=["onClick"],Jt={class:"relative aspect-square mb-2 bg-transparent rounded-lg overflow-hidden flex items-center justify-center"},Xt=["src","alt"],Yt={class:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded z-10"},Zt={class:"text-sm font-medium text-center text-foreground truncate"},$t={class:"text-xs text-muted-foreground text-center"},eo=["onClick"],to={key:1,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-accent/20 text-accent rounded text-xs",title:"–ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞"},oo={key:4,class:"rounded-xl shadow-sm p-6 bg-card border border-border"},ro={class:"w-full"},no={class:"mb-4 flex items-center gap-2 text-sm flex-wrap"},lo={key:0,class:"text-muted-foreground"},ao=["onClick"],so={class:"flex gap-2 mb-6 items-center justify-between"},io=["disabled"],co={key:0,class:"space-y-6 pt-6"},uo={class:"text-center text-muted-foreground mb-4"},go={class:"flex gap-2 max-w-3xl mx-auto"},mo={class:"flex-1"},fo=["disabled"],vo={key:0,class:"mt-6"},ho={class:"text-sm text-muted-foreground mb-4"},po={key:0,class:"ml-2"},xo={key:0,class:"mb-4"},bo={class:"flex items-center justify-between mb-1"},yo={class:"text-xs text-muted-foreground"},wo={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},_o={class:"grid gap-3 md:grid-cols-4 lg:grid-cols-6 max-h-96 overflow-y-auto"},ko=["src","alt"],Fo=["src"],Co={key:2,class:"w-full h-full flex flex-col items-center justify-center bg-muted/50 p-4"},Mo={class:"text-5xl mb-2"},Bo={class:"text-xs text-muted-foreground text-center truncate w-full px-2"},To={class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-1 p-2"},Eo=["title"],Do={class:"text-white/80 text-xs"},jo={key:3,class:"absolute bottom-0 left-0 right-0 bg-black/80 p-1"},Po={class:"flex items-center justify-between mb-1"},So={class:"text-xs text-white truncate flex-1 mr-2"},Io={key:0,class:"text-xs text-white/80 whitespace-nowrap"},Ao={key:1,class:"text-xs text-red-400 whitespace-nowrap",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"},Lo={key:0,class:"w-full h-1 bg-muted/50 rounded-full overflow-hidden"},zo={key:1,class:"w-full h-1 bg-red-500/50 rounded-full"},Uo={key:1,class:"flex items-center justify-center py-8"},Ro={key:2,class:"pt-6"},Oo={class:"text-lg font-semibold mb-4"},No={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},Vo=["onClick"],qo={class:"relative aspect-square mb-2 bg-transparent rounded-lg overflow-hidden flex items-center justify-center hover:bg-accent/5 transition-colors"},Ho=["src","alt"],Qo={class:"text-center"},Ko=["title"],Go={key:0,class:"flex items-center justify-center gap-1 mt-1"},Wo=["onClick"],Jo={key:1,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-accent/20 text-accent rounded text-xs z-10",title:"–ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞"},Xo=["onClick"],Yo=["onClick"],Zo={key:3,class:"pt-6 space-y-4"},$o={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},er={class:"flex-1 w-full sm:w-auto"},tr={class:"relative"},or=["value"],rr=["value"],nr={class:"flex items-center gap-2"},lr=["value"],ar={key:4,class:"pt-6"},sr={class:"flex items-center justify-between mb-4"},ir={class:"text-lg font-semibold"},dr={key:0},cr={key:1},ur={key:2,class:"text-sm text-muted-foreground ml-2"},gr=["disabled"],mr={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},fr=["onClick"],vr={class:"relative aspect-video bg-muted/30 overflow-hidden flex-shrink-0"},hr=["src","alt"],pr=["src"],xr={key:2,class:"w-full h-full flex flex-col items-center justify-center bg-muted/50 p-4 pointer-events-none"},br={class:"text-5xl mb-2"},yr={class:"text-xs text-muted-foreground text-center truncate w-full px-2"},wr={key:3,class:"absolute top-2 left-2 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center text-xs font-bold z-10 pointer-events-none"},_r=["onClick"],kr=["title"],Fr={class:"flex items-center gap-2 text-xs text-muted-foreground"},Cr={key:0,class:"text-blue-600 font-medium"},Mr={key:0,class:"text-xs text-muted-foreground"},Br={key:0,class:"px-3 pb-3 flex gap-2 mt-auto"},Tr=["onClick"],Er=["onClick"],Dr=["onClick"],jr=["onClick"],Pr=["onClick"],Sr=["onClick"],Ir={key:5,class:"flex flex-col sm:flex-row items-center justify-between pt-6 border-t border-border gap-4"},Ar={class:"text-sm text-muted-foreground"},Lr={key:0},zr={key:1},Ur={key:0,class:"flex gap-2 items-center"},Rr=["disabled"],Or={class:"flex gap-1"},Nr=["onClick"],Vr=["disabled"],qr={key:6,class:"text-center py-12"},Hr={class:"text-muted-foreground"},Qr={key:0,class:"text-xs text-muted-foreground mt-2"},Kr={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm"},Gr={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md p-6"},Wr={key:0,class:"text-sm text-muted-foreground mb-4"},Jr={class:"mb-4"},Xr={class:"border border-border rounded-lg max-h-96 overflow-y-auto bg-muted/30"},Yr={class:"p-2"},Zr=["src"],$r=["onClick"],en=["src","alt"],tn={class:"flex-1"},on={key:0,class:"text-xs text-muted-foreground"},rn={class:"flex gap-2"},nn=["disabled"];function ln(F,n,b,e,j,h){const q=Et("FsLightbox");return d(),c(w,null,[a("div",At,[a("div",Lt,[a("div",zt,[e.selectedFolder?(d(),c("button",{key:0,onClick:n[0]||(n[0]=(...o)=>e.handleBack&&e.handleBack(...o)),class:"h-10 w-10 flex items-center justify-center rounded-lg hover:bg-accent/10 hover:text-accent transition-colors"}," ‚Üê ")):f("",!0),a("div",null,[a("h1",Ut,m(e.selectedFolder?`–ú–µ–¥–∏–∞ –º–µ–Ω–µ–¥–∂–µ—Ä - ${e.selectedFolder.name}`:"–ú–µ–¥–∏–∞ –º–µ–Ω–µ–¥–∂–µ—Ä - –°–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫"),1),a("p",Rt,m(e.selectedFolder?"–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤":"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–∞–º–∏"),1)])]),a("div",Ot,[!e.selectedFolder&&!e.selectionMode?(d(),c("div",Nt,[a("button",{onClick:n[1]||(n[1]=(...o)=>e.handleToggleCreateFolder&&e.handleToggleCreateFolder(...o)),disabled:e.loading,class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[n[38]||(n[38]=a("span",null,"+",-1)),a("span",null,m(e.loading?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É"),1)],8,Vt)])):f("",!0)])]),e.loading&&e.folders.length===0?(d(),c("div",qt,[...n[39]||(n[39]=[a("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–ø–æ–∫...",-1)])])):f("",!0),e.error?(d(),c("div",Ht,[a("p",Qt,m(e.error),1)])):f("",!0),!e.selectedFolder&&!e.loading?(d(),c("div",Kt,[n[40]||(n[40]=a("span",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"},"üîç",-1)),ne(a("input",{type:"text",placeholder:"–ü–æ–∏—Å–∫ –ø–∞–ø–æ–∫...","onUpdate:modelValue":n[2]||(n[2]=o=>e.searchQuery=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-9 text-sm"},null,512),[[De,e.searchQuery]])])):f("",!0),!e.selectedFolder&&!e.loading?(d(),c("div",Gt,[(d(!0),c(w,null,D(e.filteredFolders,o=>(d(),c("div",{key:o.id,class:"group relative"},[a("div",{class:"cursor-pointer",onClick:i=>e.handleFolderClick(o)},[a("div",Jt,[a("img",{src:e.getFolderIcon(o),alt:o.name,class:"w-full h-full object-contain max-w-[66.67%] max-h-[66.67%]",onError:n[3]||(n[3]=(...i)=>e.handleFolderImageError&&e.handleFolderImageError(...i))},null,40,Xt),a("div",Yt,m(o.count||0),1)]),a("p",Zt,m(o.name),1),a("p",$t,m(o.count||0)+" —Ñ–∞–π–ª–æ–≤",1)],8,Wt),!o.protected&&!e.selectionMode?(d(),c("button",{key:0,onClick:x(i=>e.handleDeleteFolder(o),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90",title:"–£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É"}," ‚úï ",8,eo)):f("",!0),o.protected?(d(),c("div",to," üîí ")):f("",!0)]))),128))])):f("",!0),e.selectedFolder?(d(),c("div",oo,[a("div",ro,[a("div",no,[a("button",{onClick:n[4]||(n[4]=(...o)=>e.handleBack&&e.handleBack(...o)),class:"px-2 py-1 rounded-md text-sm font-medium hover:bg-accent/10 text-muted-foreground hover:text-foreground transition-colors",title:"–í –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É"}," üè† "),e.breadcrumbs.length>0?(d(),c("span",lo,"/")):f("",!0),(d(!0),c(w,null,D(e.breadcrumbs,(o,i)=>(d(),c("button",{key:o.id||"root",onClick:P=>e.handleBreadcrumbClick(o),class:C(["px-2 py-1 rounded-md text-sm transition-colors",i===e.breadcrumbs.length-1?"font-semibold text-foreground cursor-default":"text-muted-foreground hover:text-foreground hover:bg-accent/10 cursor-pointer"])},m(o.name),11,ao))),128))]),a("div",so,[a("button",{onClick:n[5]||(n[5]=(...o)=>e.handleBack&&e.handleBack(...o)),class:"px-4 py-2 rounded-md text-sm font-medium hover:bg-accent/10"}," –Ω–∞–∑–∞–¥ "),!e.isTrashFolder&&!e.selectionMode?(d(),c("button",{key:0,onClick:n[6]||(n[6]=(...o)=>e.handleCreateFolder&&e.handleCreateFolder(...o)),disabled:e.loading,class:"px-4 py-2 rounded-md text-sm font-medium bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2"},[n[41]||(n[41]=a("span",null,"üìÅ",-1)),a("span",null,m(e.loading?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É"),1)],8,io)):f("",!0)]),e.isTrashFolder?f("",!0):(d(),c("div",co,[a("div",{class:C(["border-2 border-dashed border-border rounded-lg p-8 transition-colors",{"border-accent bg-accent/5":e.isDragging}]),onDrop:n[15]||(n[15]=x((...o)=>e.handleDrop&&e.handleDrop(...o),["prevent"])),onDragover:n[16]||(n[16]=x(o=>e.isDragging=!0,["prevent"])),onDragleave:n[17]||(n[17]=x(o=>e.isDragging=!1,["prevent"]))},[a("p",uo,m(e.isDragging?"–û—Ç–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏":'–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–§–∞–π–ª—ã". –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤ –¥–æ 10 –ú–ë'),1),a("div",go,[a("label",mo,[a("input",{ref:"fileInput",type:"file",multiple:"",class:"hidden",onChange:n[7]||(n[7]=(...o)=>e.handleFileSelect&&e.handleFileSelect(...o))},null,544),a("button",{type:"button",onClick:n[8]||(n[8]=(...o)=>e.handleFileButtonClick&&e.handleFileButtonClick(...o)),onDrop:n[9]||(n[9]=x((...o)=>e.handleDropOnButton&&e.handleDropOnButton(...o),["prevent"])),onDragover:n[10]||(n[10]=x(o=>e.isDraggingButton=!0,["prevent"])),onDragleave:n[11]||(n[11]=x(o=>e.isDraggingButton=!1,["prevent"])),class:C(["w-full h-11 px-4 border border-border bg-background/50 hover:bg-accent/10 hover:text-accent hover:border-accent rounded-lg inline-flex items-center justify-center transition-colors",{"border-accent bg-accent/10":e.isDraggingButton}])},m(e.isDraggingButton?"–û—Ç–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã":"+ –§–∞–π–ª—ã"),35)]),a("button",{onClick:n[12]||(n[12]=(...o)=>e.handleUpload&&e.handleUpload(...o)),disabled:!e.canUpload,class:"flex-1 h-11 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center"},m(e.uploading?"–ó–∞–≥—Ä—É–∑–∫–∞...":"‚¨Ü –ó–∞–≥—Ä—É–∑–∏—Ç—å"),9,fo),a("button",{onClick:n[13]||(n[13]=(...o)=>e.handleCancel&&e.handleCancel(...o)),class:"flex-1 h-11 px-4 border border-border bg-background/50 hover:bg-accent/10 hover:text-accent hover:border-accent rounded-lg inline-flex items-center justify-center"}," ‚úï –û—Ç–º–µ–Ω–∏—Ç—å ")]),e.selectedFiles.length>0?(d(),c("div",vo,[a("p",ho,[je(" –í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: "+m(e.selectedFiles.length)+" ",1),e.uploadProgress.total>0?(d(),c("span",po," ("+m(e.uploadProgress.completed)+"/"+m(e.uploadProgress.total)+" –∑–∞–≥—Ä—É–∂–µ–Ω–æ) ",1)):f("",!0)]),e.uploading&&e.uploadProgress.total>0?(d(),c("div",xo,[a("div",bo,[n[42]||(n[42]=a("span",{class:"text-xs text-muted-foreground"},"–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å",-1)),a("span",yo,m(Math.round(e.uploadProgress.completed/e.uploadProgress.total*100))+"%",1)]),a("div",wo,[a("div",{class:"h-full bg-accent transition-all duration-300",style:Pe({width:`${e.uploadProgress.completed/e.uploadProgress.total*100}%`})},null,4)])])):f("",!0),a("div",_o,[(d(!0),c(w,null,D(e.selectedFiles,(o,i)=>(d(),c("div",{key:i,class:"group relative aspect-square rounded-lg overflow-hidden border border-border bg-muted/30"},[e.isImageFile(o)?(d(),c("img",{key:0,src:e.getFilePreview(o),alt:o.name,class:"w-full h-full object-cover"},null,8,ko)):e.isVideoFile(o)?(d(),c("video",{key:1,src:e.getFilePreview(o),class:"w-full h-full object-cover",muted:"",onError:n[14]||(n[14]=P=>{P.target.style.display="none"})},null,40,Fo)):(d(),c("div",Co,[a("div",Mo,m(e.getFileIconFromFile(o)),1),a("p",Bo,m(e.getFileExtension(o.name)?.toUpperCase()||"FILE"),1)])),a("div",To,[a("p",{class:"text-white text-xs text-center truncate w-full px-2",title:o.name},m(o.name),9,Eo),a("p",Do,m(e.formatFileSize(o.size)),1)]),o.uploadProgress!==void 0?(d(),c("div",jo,[a("div",Po,[a("span",So,m(o.name),1),o.uploadError?(d(),c("span",Ao," ‚úï –û—à–∏–±–∫–∞ ")):(d(),c("span",Io,m(o.uploadProgress)+"% ",1))]),o.uploadError?(d(),c("div",zo)):(d(),c("div",Lo,[a("div",{class:C(["h-full transition-all duration-300",o.uploadProgress===100?"bg-green-500":"bg-accent"]),style:Pe({width:`${o.uploadProgress}%`})},null,6)]))])):f("",!0)]))),128))])])):f("",!0)],34)])),e.loadingMedia?(d(),c("div",Uo,[...n[43]||(n[43]=[a("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤...",-1)])])):f("",!0),e.nestedFolders.length>0&&!e.loadingMedia?(d(),c("div",Ro,[a("h3",Oo,"–ü–∞–ø–∫–∏ ("+m(e.nestedFolders.length)+")",1),a("div",No,[(d(!0),c(w,null,D(e.nestedFolders,o=>(d(),c("div",{key:o.id,class:"group relative"},[a("div",{class:"cursor-pointer",onClick:i=>e.handleFolderClick(o)},[a("div",qo,[a("img",{src:e.getFolderIcon(o),alt:o.name,class:"w-full h-full object-contain max-w-[66.67%] max-h-[66.67%]",onError:n[18]||(n[18]=(...i)=>e.handleFolderImageError&&e.handleFolderImageError(...i))},null,40,Ho)]),a("div",Qo,[a("p",{class:"text-sm font-medium text-foreground truncate",title:o.name},m(o.name),9,Ko),o.protected?(d(),c("div",Go,[...n[44]||(n[44]=[a("span",{class:"text-xs",title:"–ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞"},"üîí",-1)])])):f("",!0)])],8,Vo),e.isTrashFolder?(d(),c(w,{key:1},[a("button",{onClick:x(i=>e.handleRestoreFolder(o),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-green-500 text-white rounded text-xs hover:bg-green-600 z-10",title:"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–ø–∫—É"}," ‚Ü©Ô∏è ",8,Xo),e.selectionMode?f("",!0):(d(),c("button",{key:0,onClick:x(i=>e.handleDeleteFolder(o),["stop"]),class:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90 z-10",title:"–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞"}," üóë ",8,Yo))],64)):(d(),c(w,{key:0},[!o.protected&&!e.selectionMode?(d(),c("button",{key:0,onClick:x(i=>e.handleDeleteFolder(o),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90 z-10",title:"–£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É"}," ‚úï ",8,Wo)):f("",!0),o.protected?(d(),c("div",Jo," üîí ")):f("",!0)],64))]))),128))])])):f("",!0),e.selectedFolder&&!e.isTrashFolder?(d(),c("div",Zo,[a("div",$o,[a("div",er,[a("div",tr,[n[45]||(n[45]=a("span",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"},"üîç",-1)),ne(a("input",{type:"text","onUpdate:modelValue":n[19]||(n[19]=o=>e.fileSearchQuery=o),onKeyup:n[20]||(n[20]=Bt(o=>e.handleFileSearch(!0),["enter"])),onInput:n[21]||(n[21]=o=>e.handleFileSearch(!1)),placeholder:"–ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤...",class:"flex h-10 w-full sm:w-64 rounded-md border border-input bg-background px-3 py-2 pl-9 text-sm"},null,544),[[De,e.fileSearchQuery]])])]),ne(a("select",{"onUpdate:modelValue":n[22]||(n[22]=o=>e.fileTypeFilter=o),onChange:n[23]||(n[23]=(...o)=>e.handleTypeFilter&&e.handleTypeFilter(...o)),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[...n[46]||(n[46]=[Tt('<option value="">–í—Å–µ —Ç–∏–ø—ã</option><option value="photo">–§–æ—Ç–æ</option><option value="video">–í–∏–¥–µ–æ</option><option value="document">–î–æ–∫—É–º–µ–Ω—Ç—ã</option><option value="audio">–ê—É–¥–∏–æ</option>',5)])],544),[[Se,e.fileTypeFilter]]),a("select",{onChange:n[24]||(n[24]=o=>{const i=e.sortOptions.find(P=>P.label===o.target.value);i&&e.handleSortChange(i.value,i.order)}),value:e.currentSortLabel,class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm min-w-[180px]"},[(d(!0),c(w,null,D(e.sortOptions,o=>(d(),c("option",{key:`${o.value}-${o.order}`,value:o.label},m(o.label),9,rr))),128))],40,or),a("div",nr,[n[47]||(n[47]=a("label",{class:"text-sm text-muted-foreground whitespace-nowrap"},"–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:",-1)),ne(a("select",{"onUpdate:modelValue":n[25]||(n[25]=o=>e.perPage=o),onChange:n[26]||(n[26]=(...o)=>e.handlePerPageChange&&e.handlePerPageChange(...o)),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[(d(!0),c(w,null,D(e.perPageOptions,o=>(d(),c("option",{key:o,value:o},m(o),9,lr))),128))],544),[[Se,e.perPage,void 0,{number:!0}]])])])])):f("",!0),e.mediaFiles.length>0&&!e.loadingMedia?(d(),c("div",ar,[a("div",sr,[a("h3",ir,[n[48]||(n[48]=je(" –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã ",-1)),e.paginationData?(d(),c("span",dr," ("+m(e.paginationData.from)+"-"+m(e.paginationData.to)+" –∏–∑ "+m(e.paginationData.total)+") ",1)):(d(),c("span",cr," ("+m(e.mediaFiles.length)+") ",1)),e.isTrashFolder?(d(),c("span",ur,"(–ö–æ—Ä–∑–∏–Ω–∞)")):f("",!0)]),e.isTrashFolder&&e.mediaFiles.length>0?(d(),c("button",{key:0,onClick:n[27]||(n[27]=(...o)=>e.handleClearTrash&&e.handleClearTrash(...o)),disabled:e.clearingTrash,class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},m(e.clearingTrash?"–£–¥–∞–ª–µ–Ω–∏–µ...":"üóë –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ"),9,gr)):f("",!0)]),a("div",mr,[(d(!0),c(w,null,D(e.mediaFiles,o=>(d(),c("div",{key:o.id,class:C(["group bg-background border rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow flex flex-col",e.selectionMode&&(o.type==="photo"||o.type==="video")?e.isFileSelected(o)?"border-primary border-2 cursor-pointer":"border-border cursor-pointer hover:border-primary":"border-border"]),onClick:i=>e.handleFileClick(o,i)},[a("div",vr,[o.type==="photo"?(d(),c("img",{key:0,src:o.url,alt:o.original_name,class:"w-full h-full object-cover pointer-events-none"},null,8,hr)):o.type==="video"?(d(),c("video",{key:1,src:o.url,class:"w-full h-full object-cover pointer-events-none",muted:"",onMouseenter:n[28]||(n[28]=i=>{try{i.target.play()}catch{}}),onMouseleave:n[29]||(n[29]=i=>{try{i.target.pause(),i.target.currentTime=0}catch{}}),onError:n[30]||(n[30]=i=>{i.target.style.display="none"})},null,40,pr)):(d(),c("div",xr,[a("div",br,m(e.getFileIcon(o)||"üìé"),1),a("p",yr,m(o.extension?.toUpperCase()||"FILE"),1)])),e.selectionMode&&e.isFileSelected(o)?(d(),c("div",wr," ‚úì ")):f("",!0),e.selectionMode&&(o.type==="photo"||o.type==="video")?(d(),c("div",{key:4,class:C(["absolute inset-0 flex items-center justify-center transition-opacity pointer-events-none",e.isFileSelected(o)?"opacity-100 bg-primary/30":"opacity-0 group-hover:opacity-100 bg-primary/20"])},[...n[49]||(n[49]=[a("div",{class:"w-16 h-16 rounded-full backdrop-blur-sm flex items-center justify-center shadow-lg transition-transform bg-primary/95 text-white"},[a("span",{class:"text-2xl"},"‚úì")],-1)])],2)):!e.selectionMode&&e.isPreviewable(o)?(d(),c("button",{key:5,onClick:x(i=>e.openFilePreview(o),["stop"]),class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 hover:bg-black/30 cursor-pointer",title:"–ü—Ä–æ—Å–º–æ—Ç—Ä"},[...n[50]||(n[50]=[a("div",{class:"w-16 h-16 rounded-full backdrop-blur-sm flex items-center justify-center shadow-lg hover:scale-110 transition-transform bg-white/95"},[a("span",{class:"text-2xl"},"üëÅÔ∏è")],-1)])],8,_r)):f("",!0)]),a("div",{class:C(["p-3 space-y-1 flex-grow",{"pointer-events-none":e.selectionMode&&(o.type==="photo"||o.type==="video")}])},[a("p",{class:"font-semibold text-sm text-foreground truncate",title:o.original_name},m(o.original_name),9,kr),a("div",Fr,[a("span",null,m(e.formatFileSize(o.size)),1),o.extension?(d(),c("span",Cr," ."+m(o.extension.toUpperCase()),1)):f("",!0)]),o.width&&o.height?(d(),c("p",Mr,m(o.width)+" √ó "+m(o.height),1)):f("",!0)],2),e.selectionMode?f("",!0):(d(),c("div",Br,[e.isTrashFolder?(d(),c(w,{key:1},[a("button",{onClick:x(i=>e.handleRestoreFile(o),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"},[...n[55]||(n[55]=[a("span",{class:"text-sm"},"‚Ü©Ô∏è",-1)])],8,Pr),a("button",{onClick:x(i=>e.handleDeleteFile(o),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:"–£–¥–∞–ª–∏—Ç—å —Å–æ–≤—Å–µ–º"},[...n[56]||(n[56]=[a("span",{class:"text-sm"},"üóë",-1)])],8,Sr)],64)):(d(),c(w,{key:0},[a("button",{onClick:x(i=>e.handleDownloadFile(o),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",title:"–°–∫–∞—á–∞—Ç—å"},[...n[51]||(n[51]=[a("span",{class:"text-sm"},"‚¨á",-1)])],8,Tr),o.type==="photo"?(d(),c("button",{key:0,onClick:x(i=>e.handleEditFile(o),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"},[...n[52]||(n[52]=[a("span",{class:"text-sm"},"‚úèÔ∏è",-1)])],8,Er)):f("",!0),a("button",{onClick:x(i=>e.handleMoveFile(o),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å"},[...n[53]||(n[53]=[a("span",{class:"text-sm"},"üìÅ",-1)])],8,Dr),a("button",{onClick:x(i=>e.handleDeleteFile(o),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:"–£–¥–∞–ª–∏—Ç—å"},[...n[54]||(n[54]=[a("span",{class:"text-sm"},"üóë",-1)])],8,jr)],64))]))],10,fr))),128))])])):f("",!0),e.paginationData&&e.paginationData.total>0&&!e.loadingMedia?(d(),c("div",Ir,[a("div",Ar,[e.paginationData.last_page>1?(d(),c("span",Lr," –°—Ç—Ä–∞–Ω–∏—Ü–∞ "+m(e.paginationData.current_page)+" –∏–∑ "+m(e.paginationData.last_page),1)):(d(),c("span",zr," –í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: "+m(e.paginationData.total),1))]),e.paginationData.last_page>1?(d(),c("div",Ur,[a("button",{onClick:n[31]||(n[31]=o=>e.handlePageChange(e.paginationData.current_page-1)),disabled:e.paginationData.current_page===1,class:"px-3 py-2 rounded-md border border-border bg-background hover:bg-accent/10 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-colors"}," ‚Üê –ù–∞–∑–∞–¥ ",8,Rr),a("div",Or,[(d(!0),c(w,null,D(e.getPageNumbers(e.paginationData.current_page,e.paginationData.last_page),o=>(d(),c("button",{key:o,onClick:i=>e.handlePageChange(o),class:C(["px-3 py-2 rounded-md border text-sm transition-colors min-w-[40px]",o===e.paginationData.current_page?"bg-accent text-accent-foreground border-accent font-semibold":"border-border bg-background hover:bg-accent/10"])},m(o),11,Nr))),128))]),a("button",{onClick:n[32]||(n[32]=o=>e.handlePageChange(e.paginationData.current_page+1)),disabled:e.paginationData.current_page===e.paginationData.last_page,class:"px-3 py-2 rounded-md border border-border bg-background hover:bg-accent/10 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-colors"}," –í–ø–µ—Ä–µ–¥ ‚Üí ",8,Vr)])):f("",!0)])):f("",!0),e.nestedFolders.length===0&&e.mediaFiles.length===0&&!e.loadingMedia?(d(),c("div",qr,[a("p",Hr,m(e.isTrashFolder?"–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞":e.fileSearchQuery||e.fileTypeFilter?"–§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã":"–í —ç—Ç–æ–π –ø–∞–ø–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫"),1),e.selectedFolder?(d(),c("p",Qr," Debug: folder_id="+m(e.selectedFolder.id)+", is_trash="+m(e.selectedFolder.is_trash)+", nestedFolders="+m(e.nestedFolders.length)+", mediaFiles="+m(e.mediaFiles.length)+", loadingMedia="+m(e.loadingMedia),1)):f("",!0)])):f("",!0)])])):f("",!0)]),e.lightboxSources.length>0?(d(),Mt(q,{key:0,toggler:e.lightboxToggler,sources:e.lightboxSources,slide:e.lightboxSlide},null,8,["toggler","sources","slide"])):f("",!0),e.showMoveModal?(d(),c("div",Kr,[a("div",Gr,[n[59]||(n[59]=a("h3",{class:"text-lg font-semibold mb-4"},"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª",-1)),e.selectedFileForMove?(d(),c("p",Wr,m(e.selectedFileForMove.original_name),1)):f("",!0),a("div",Jr,[n[58]||(n[58]=a("label",{class:"text-sm font-medium mb-2 block"},"–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É",-1)),a("div",Xr,[a("div",Yr,[a("button",{onClick:n[34]||(n[34]=o=>e.selectMoveFolder(null)),class:C(["w-full text-left px-3 py-2 rounded hover:bg-accent/10 transition-colors flex items-center gap-2",e.selectedMoveFolderId===null?"bg-accent/20 border border-accent/40":""])},[a("img",{src:e.getDefaultFolderIcon(),alt:"–ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞",class:"w-[13.33px] h-[13.33px] object-contain",onError:n[33]||(n[33]=(...o)=>e.handleFolderImageError&&e.handleFolderImageError(...o))},null,40,Zr),n[57]||(n[57]=a("span",{class:"flex-1"},"–ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞",-1))],2),(d(!0),c(w,null,D(e.allFolders,o=>(d(),c("div",{key:o.id,class:"mt-1"},[a("button",{onClick:i=>e.selectMoveFolder(o.id),class:C(["w-full text-left px-3 py-2 rounded hover:bg-accent/10 transition-colors flex items-center gap-2",e.selectedMoveFolderId===o.id?"bg-accent/20 border border-accent/40":""])},[a("img",{src:e.getFolderIcon(o),alt:o.name,class:"w-[13.33px] h-[13.33px] object-contain",onError:n[35]||(n[35]=(...i)=>e.handleFolderImageError&&e.handleFolderImageError(...i))},null,40,en),a("span",tn,m(o.name),1),o.count?(d(),c("span",on,m(o.count)+" —Ñ–∞–π–ª–æ–≤ ",1)):f("",!0)],10,$r)]))),128))])])]),a("div",rn,[a("button",{onClick:n[36]||(n[36]=o=>e.showMoveModal=!1),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"}," –û—Ç–º–µ–Ω–∞ "),a("button",{onClick:n[37]||(n[37]=(...o)=>e.confirmMoveFile&&e.confirmMoveFile(...o)),disabled:e.moving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},m(e.moving?"–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ...":"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å"),9,nn)])])])):f("",!0)],64)}const gn=kt(It,[["render",ln]]);export{gn as default};
