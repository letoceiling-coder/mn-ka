import{_ as W,c as d,b as e,d as h,t as C,l as i,v as c,q as E,F as y,k as _,p as N,a as D,h as p,j as P,r as R,J as M,o as r}from"./app-DA_5Afjg.js";import{S as U}from"./sweetalert2.esm.all-C0u8rGqG.js";import q from"./Media-B3-28m0J.js";import"./api-V9GPpd21.js";import"./index-CZwS0irk.js";/* empty css                        */const z={name:"AboutSettings",components:{Media:q},setup(){const x=p(!0),o=p(!1),b=p(null),t=p(null),f=p(!1),v=p(null),k=async()=>{x.value=!0,b.value=null;try{const l=await M.get("/api/v1/about-settings");t.value=l.data.data,(!t.value.statistics||!Array.isArray(t.value.statistics))&&(t.value.statistics=[]),(!t.value.clients||!Array.isArray(t.value.clients))&&(t.value.clients=[]),(!t.value.team||!Array.isArray(t.value.team))&&(t.value.team=[]),(!t.value.benefits||!Array.isArray(t.value.benefits))&&(t.value.benefits=[])}catch(l){b.value=l.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching about settings:",l)}finally{x.value=!1}},s=()=>{t.value.statistics||(t.value.statistics=[]),t.value.statistics.push({icon:"",text:""})},a=l=>{t.value.statistics&&t.value.statistics.length>l&&t.value.statistics.splice(l,1)},n=()=>{t.value.clients||(t.value.clients=[]),t.value.clients.push({title:"",description:"",icon:""})},V=l=>{t.value.clients&&t.value.clients.length>l&&t.value.clients.splice(l,1)},S=()=>{t.value.team||(t.value.team=[]),t.value.team.push({name:"",position:"",photo:""})},j=l=>{t.value.team&&t.value.team.length>l&&t.value.team.splice(l,1)},A=()=>{t.value.benefits||(t.value.benefits=[]),t.value.benefits.push({title:"",description:""})},B=l=>{t.value.benefits&&t.value.benefits.length>l&&t.value.benefits.splice(l,1)},I=(l,g=null,m=null)=>{v.value={type:l,index:g,field:m},f.value=!0},T=l=>{if(!l||l.type!=="photo")return;const g=l.url.replace(/^\//,"");if(v.value){const{type:m,index:u,field:w}=v.value;m==="banner_image"?t.value.banner_image=g:m==="statistics"&&u!==null&&w==="icon"?t.value.statistics&&t.value.statistics[u]&&(t.value.statistics[u].icon=g):m==="clients"&&u!==null&&w==="icon"?t.value.clients&&t.value.clients[u]&&(t.value.clients[u].icon=g):m==="team"&&u!==null&&w==="photo"&&t.value.team&&t.value.team[u]&&(t.value.team[u].photo=g)}f.value=!1,v.value=null},F=l=>l?l.startsWith("data:")||l.startsWith("http://")||l.startsWith("https://")||l.startsWith("/")?l:`/${l}`:"",L=async()=>{o.value=!0,b.value=null;try{const l=await M.put("/api/v1/about-settings",t.value);await U.fire({icon:"success",title:"Успешно!",text:'Настройки страницы "О нас" успешно сохранены.',timer:2e3,showConfirmButton:!1})}catch(l){b.value=l.response?.data?.message||"Ошибка сохранения настроек",await U.fire({icon:"error",title:"Ошибка",text:b.value})}finally{o.value=!1}};return P(()=>{k()}),{loading:x,saving:o,error:b,settings:t,showMediaModal:f,addStatistic:s,removeStatistic:a,addClient:n,removeClient:V,addTeamMember:S,removeTeamMember:j,addBenefit:A,removeBenefit:B,openMediaModal:I,handleImageSelected:T,getImageUrl:F,saveSettings:L}}},H={class:"about-settings-page space-y-6"},J={key:0,class:"flex items-center justify-center py-12"},O={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},G={class:"text-destructive"},K={key:2,class:"space-y-6"},Q={class:"bg-card rounded-lg border border-border p-6 space-y-6"},X={class:"space-y-3"},Y={key:0,class:"relative"},Z=["src"],$={class:"mt-2 flex gap-2"},ee={key:1},te={class:"flex items-center gap-3 cursor-pointer"},oe={class:"bg-card rounded-lg border border-border p-6 space-y-6"},se={class:"flex items-center justify-between"},ne={key:0,class:"text-center py-4 text-muted-foreground"},le={key:1,class:"space-y-4"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re={class:"space-y-2"},ae={key:0,class:"flex items-center gap-3"},ie=["src"],ce={class:"flex-1"},ue=["onUpdate:modelValue"],be=["onClick"],ge={key:1,class:"flex gap-2"},me=["onUpdate:modelValue"],pe=["onClick"],ve={class:"flex gap-2"},xe=["onUpdate:modelValue"],fe=["onClick"],he={class:"bg-card rounded-lg border border-border p-6 space-y-6"},ye={class:"flex items-center justify-between"},_e={key:0,class:"text-center py-4 text-muted-foreground"},ke={key:1,class:"space-y-4"},we={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ce=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Ue={class:"space-y-2"},Ve={key:0,class:"flex items-center gap-3"},Se=["src"],je={class:"flex-1"},Ae=["onUpdate:modelValue"],Be=["onClick"],Ie={key:1,class:"flex gap-2"},Te=["onUpdate:modelValue"],Fe=["onClick"],Le=["onClick"],We={class:"bg-card rounded-lg border border-border p-6 space-y-6"},Ee={class:"flex items-center justify-between"},Ne={key:0,class:"text-center py-4 text-muted-foreground"},De={key:1,class:"space-y-4"},Pe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Re=["onUpdate:modelValue"],qe=["onUpdate:modelValue"],ze={class:"space-y-2"},He={key:0,class:"relative"},Je=["src"],Oe={class:"mt-2 flex gap-2"},Ge=["onClick"],Ke=["onClick"],Qe={key:1},Xe={class:"flex gap-2"},Ye=["onUpdate:modelValue"],Ze=["onClick"],$e=["onClick"],et={class:"bg-card rounded-lg border border-border p-6 space-y-6 opacity-60"},tt={class:"flex items-center justify-between"},ot={key:0,class:"text-center py-4 text-muted-foreground"},st={key:1,class:"space-y-4"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt=["onUpdate:modelValue"],dt={class:"flex gap-2"},rt=["onUpdate:modelValue"],at=["onClick"],it={class:"flex items-center justify-end gap-4"},ct=["disabled"],ut={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col my-auto"},bt={class:"p-4 border-b border-border flex items-center justify-between flex-shrink-0"},gt={class:"flex-1 overflow-auto h-full"};function mt(x,o,b,t,f,v){const k=R("Media");return r(),d("div",H,[o[35]||(o[35]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},'Настройки страницы "О нас"'),e("p",{class:"text-muted-foreground mt-1"},' Редактирование контента, который отображается на странице "О компании". ')],-1)),t.loading?(r(),d("div",J,[...o[13]||(o[13]=[e("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):h("",!0),t.error?(r(),d("div",O,[e("p",G,C(t.error),1)])):h("",!0),!t.loading&&t.settings?(r(),d("div",K,[e("div",Q,[o[19]||(o[19]=e("h2",{class:"text-xl font-semibold text-foreground"},"Баннер и описание",-1)),e("div",null,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Изображение баннера ",-1)),e("div",X,[t.settings.banner_image?(r(),d("div",Y,[e("img",{src:t.getImageUrl(t.settings.banner_image),alt:"Banner preview",class:"w-full max-w-md h-auto object-cover rounded-lg border border-border"},null,8,Z),e("div",$,[e("button",{type:"button",onClick:o[0]||(o[0]=s=>t.openMediaModal("banner_image")),class:"px-4 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-sm"}," Изменить изображение "),e("button",{type:"button",onClick:o[1]||(o[1]=s=>t.settings.banner_image=null),class:"px-4 py-2 bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20 text-sm"}," Удалить ")])])):(r(),d("div",ee,[e("button",{type:"button",onClick:o[2]||(o[2]=s=>t.openMediaModal("banner_image")),class:"w-full h-32 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 transition-colors"},[...o[14]||(o[14]=[e("span",{class:"text-muted-foreground"},"Выберите изображение баннера",-1)])])])),e("div",null,[o[15]||(o[15]=e("label",{class:"block text-xs text-muted-foreground mb-1"},"Или введите URL вручную:",-1)),i(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>t.settings.banner_image=s),placeholder:"/img/banner.jpg или полный URL",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[c,t.settings.banner_image]])])])]),e("div",null,[e("label",te,[i(e("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=s=>t.settings.banner_overlay=s),class:"w-4 h-4 rounded border-border"},null,512),[[E,t.settings.banner_overlay]]),o[17]||(o[17]=e("span",{class:"text-sm font-medium text-foreground"},"Наложение (overlay) на баннер",-1))])]),e("div",null,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Описание о компании (HTML) ",-1)),i(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=s=>t.settings.description=s),rows:"6",placeholder:"Введите описание о компании...",class:"w-full px-3 py-2 border border-border rounded bg-background text-sm"},null,512),[[c,t.settings.description]])])]),e("div",oe,[e("div",se,[o[20]||(o[20]=e("h2",{class:"text-xl font-semibold text-foreground"},"Статистика",-1)),e("button",{onClick:o[6]||(o[6]=(...s)=>t.addStatistic&&t.addStatistic(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!t.settings.statistics||t.settings.statistics.length===0?(r(),d("div",ne," Нет элементов статистики ")):(r(),d("div",le,[(r(!0),d(y,null,_(t.settings.statistics,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[e("div",de,[e("div",null,[o[21]||(o[21]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Иконка ",-1)),e("div",re,[s.icon?(r(),d("div",ae,[e("img",{src:t.getImageUrl(s.icon),alt:"Icon preview",class:"w-12 h-12 object-contain border border-border rounded"},null,8,ie),e("div",ce,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/1.svg",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,ue),[[c,s.icon]])]),e("button",{type:"button",onClick:n=>t.openMediaModal("statistics",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,be)])):(r(),d("div",ge,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/1.svg",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,me),[[c,s.icon]]),e("button",{type:"button",onClick:n=>t.openMediaModal("statistics",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,pe)]))])]),e("div",null,[o[22]||(o[22]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Текст ",-1)),e("div",ve,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.text=n,placeholder:"93% клиентов приходят по рекомендации",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,xe),[[c,s.text]]),e("button",{onClick:n=>t.removeStatistic(a),class:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить ",8,fe)])])])]))),128))]))]),e("div",he,[e("div",ye,[o[23]||(o[23]=e("h2",{class:"text-xl font-semibold text-foreground"},"Кому мы помогаем",-1)),e("button",{onClick:o[7]||(o[7]=(...s)=>t.addClient&&t.addClient(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!t.settings.clients||t.settings.clients.length===0?(r(),d("div",_e," Нет элементов ")):(r(),d("div",ke,[(r(!0),d(y,null,_(t.settings.clients,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[e("div",we,[e("div",null,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок * ",-1)),i(e("input",{type:"text","onUpdate:modelValue":n=>s.title=n,placeholder:"Девелоперам и застройщикам",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Ce),[[c,s.title]])]),e("div",null,[o[25]||(o[25]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Описание ",-1)),i(e("input",{type:"text","onUpdate:modelValue":n=>s.description=n,placeholder:"Помогаем с подбором участков...",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Me),[[c,s.description]])]),e("div",null,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Иконка ",-1)),e("div",Ue,[s.icon?(r(),d("div",Ve,[e("img",{src:t.getImageUrl(s.icon),alt:"Icon preview",class:"w-12 h-12 object-contain border border-border rounded"},null,8,Se),e("div",je,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/4.svg",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Ae),[[c,s.icon]])]),e("button",{type:"button",onClick:n=>t.openMediaModal("clients",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,Be)])):(r(),d("div",Ie,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/4.svg",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Te),[[c,s.icon]]),e("button",{type:"button",onClick:n=>t.openMediaModal("clients",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,Fe)])),e("button",{onClick:n=>t.removeClient(a),class:"w-full px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить элемент ",8,Le)])])])]))),128))]))]),e("div",We,[e("div",Ee,[o[27]||(o[27]=e("h2",{class:"text-xl font-semibold text-foreground"},"Наша команда",-1)),e("button",{onClick:o[8]||(o[8]=(...s)=>t.addTeamMember&&t.addTeamMember(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!t.settings.team||t.settings.team.length===0?(r(),d("div",Ne," Нет членов команды ")):(r(),d("div",De,[(r(!0),d(y,null,_(t.settings.team,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[e("div",Pe,[e("div",null,[o[28]||(o[28]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Имя * ",-1)),i(e("input",{type:"text","onUpdate:modelValue":n=>s.name=n,placeholder:"Иван Иванов",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Re),[[c,s.name]])]),e("div",null,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Должность ",-1)),i(e("input",{type:"text","onUpdate:modelValue":n=>s.position=n,placeholder:"CEO lagom",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,qe),[[c,s.position]])]),e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Фото ",-1)),e("div",ze,[s.photo?(r(),d("div",He,[e("img",{src:t.getImageUrl(s.photo),alt:"Photo preview",class:"w-full max-w-xs h-auto object-cover rounded-lg border border-border"},null,8,Je),e("div",Oe,[e("button",{type:"button",onClick:n=>t.openMediaModal("team",a,"photo"),class:"px-4 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs"}," Изменить фото ",8,Ge),e("button",{type:"button",onClick:n=>s.photo=null,class:"px-4 py-2 bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20 text-xs"}," Удалить фото ",8,Ke)])])):(r(),d("div",Qe,[e("div",Xe,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.photo=n,placeholder:"/img/team/1.jpg",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Ye),[[c,s.photo]]),e("button",{type:"button",onClick:n=>t.openMediaModal("team",a,"photo"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,Ze)])])),e("button",{onClick:n=>t.removeTeamMember(a),class:"w-full px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить из команды ",8,$e)])])])]))),128))]))]),e("div",et,[e("div",tt,[o[31]||(o[31]=e("div",null,[e("h2",{class:"text-xl font-semibold text-foreground"},"Почему выбирают нас"),e("p",{class:"text-xs text-muted-foreground mt-1"},' ⚠️ Это поле больше не используется на странице "О нас". Используется компонент "Почему выбирают нас" из настроек блоков. ')],-1)),e("button",{onClick:o[9]||(o[9]=(...s)=>t.addBenefit&&t.addBenefit(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90",disabled:""}," + Добавить ")]),!t.settings.benefits||t.settings.benefits.length===0?(r(),d("div",ot," Нет преимуществ ")):(r(),d("div",st,[(r(!0),d(y,null,_(t.settings.benefits,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[e("div",nt,[e("div",null,[o[32]||(o[32]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок * ",-1)),i(e("input",{type:"text","onUpdate:modelValue":n=>s.title=n,placeholder:"500+ участков в базе",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,lt),[[c,s.title]])]),e("div",null,[o[33]||(o[33]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Описание ",-1)),e("div",dt,[i(e("input",{type:"text","onUpdate:modelValue":n=>s.description=n,placeholder:"Большой выбор готовых предложений",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,rt),[[c,s.description]]),e("button",{onClick:n=>t.removeBenefit(a),class:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить ",8,at)])])])]))),128))]))]),e("div",it,[e("button",{onClick:o[10]||(o[10]=(...s)=>t.saveSettings&&t.saveSettings(...s)),disabled:t.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},C(t.saving?"Сохранение...":"Сохранить настройки"),9,ct)])])):h("",!0),t.showMediaModal?(r(),d("div",{key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto p-4",onClick:o[12]||(o[12]=N(s=>t.showMediaModal=!1,["self"]))},[e("div",ut,[e("div",bt,[o[34]||(o[34]=e("h3",{class:"text-lg font-semibold"},"Выберите изображение",-1)),e("button",{onClick:o[11]||(o[11]=s=>t.showMediaModal=!1),class:"text-muted-foreground hover:text-foreground w-8 h-8 flex items-center justify-center rounded hover:bg-muted/10"}," ✕ ")]),e("div",gt,[D(k,{"selection-mode":!0,"count-file":1,onFileSelected:t.handleImageSelected},null,8,["onFileSelected"])])])])):h("",!0)])}const _t=W(z,[["render",mt]]);export{_t as default};
