import{_ as h,e as a,h as t,f as c,t as b,i as m,v as g,D as w,F,k as C,r as v,o as I,G as x,d as n}from"./app-CiHwnJgo.js";import{S as y}from"./sweetalert2.esm.all-C0u8rGqG.js";const S={name:"FaqSettings",setup(){const u=v(!0),o=v(!1),d=v(null),e=v({title:"",is_active:!0,faq_items:[]}),p=async()=>{u.value=!0,d.value=null;try{const s=await x.get("/api/v1/faq-block-settings");s.data&&s.data.data&&(e.value={title:s.data.data.title||"",is_active:s.data.data.is_active!==!1,faq_items:s.data.data.faq_items||[]})}catch(s){d.value=s.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching settings:",s)}finally{u.value=!1}},_=()=>{e.value.faq_items||(e.value.faq_items=[]),e.value.faq_items.push({question:"",answer:""})},r=s=>{e.value.faq_items&&e.value.faq_items.length>s&&e.value.faq_items.splice(s,1)},l=(s,q)=>{if(!e.value.faq_items||e.value.faq_items.length<=1)return;const f=q==="up"?s-1:s+1;if(f>=0&&f<e.value.faq_items.length){const k=e.value.faq_items[s];e.value.faq_items[s]=e.value.faq_items[f],e.value.faq_items[f]=k}},i=async()=>{o.value=!0,d.value=null;try{const s=await x.put("/api/v1/faq-block-settings",e.value);await y.fire({title:"Настройки сохранены",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"})}catch(s){d.value=s.response?.data?.message||"Ошибка сохранения настроек",await y.fire({title:"Ошибка",text:d.value,icon:"error",confirmButtonText:"ОК"})}finally{o.value=!1}};return I(()=>{p()}),{loading:u,saving:o,error:d,form:e,addFaqItem:_,removeFaqItem:r,moveFaqItem:l,saveSettings:i}}},V={class:"faq-settings-page space-y-6"},U={key:0,class:"flex items-center justify-center py-12"},B={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},j={class:"text-destructive"},D={key:2,class:"space-y-6"},M={class:"bg-card rounded-lg border border-border p-6 space-y-6"},E={class:"space-y-4"},N={class:"flex items-center gap-2"},T={class:"bg-card rounded-lg border border-border p-6 space-y-6"},z={class:"flex items-center justify-between"},A={key:0,class:"text-center py-8 text-muted-foreground"},G={key:1,class:"space-y-4"},L={class:"flex items-center justify-between"},Q={class:"font-semibold text-foreground"},H=["onClick"],J=["onUpdate:modelValue"],K=["onUpdate:modelValue"],O={class:"flex gap-2"},P=["onClick"],R=["onClick"],W={class:"flex justify-end gap-3 pt-4 border-t border-border"},X=["disabled"];function Y(u,o,d,e,p,_){return n(),a("div",V,[o[12]||(o[12]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Настройки блока FAQ"),t("p",{class:"text-muted-foreground mt-1"},'Управление блоком "Часто задаваемые вопросы" на главной странице')],-1)),e.loading?(n(),a("div",U,[...o[4]||(o[4]=[t("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):c("",!0),e.error?(n(),a("div",B,[t("p",j,b(e.error),1)])):c("",!0),e.loading?c("",!0):(n(),a("div",D,[t("div",M,[o[7]||(o[7]=t("h2",{class:"text-xl font-semibold text-foreground"},"Общие настройки",-1)),t("div",E,[t("div",null,[o[5]||(o[5]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок блока ",-1)),m(t("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.title=r),type:"text",placeholder:"Часто задаваемые вопросы",class:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"},null,512),[[g,e.form.title]])]),t("div",N,[m(t("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.is_active=r),type:"checkbox",id:"is_active",class:"w-4 h-4 rounded border-border"},null,512),[[w,e.form.is_active]]),o[6]||(o[6]=t("label",{for:"is_active",class:"text-sm font-medium text-foreground"}," Блок активен на главной странице ",-1))])])]),t("div",T,[t("div",z,[o[8]||(o[8]=t("h2",{class:"text-xl font-semibold text-foreground"},"Вопросы и ответы",-1)),t("button",{onClick:o[2]||(o[2]=(...r)=>e.addFaqItem&&e.addFaqItem(...r)),class:"px-4 py-2 bg-accent text-accent-foreground rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium"}," + Добавить вопрос ")]),e.form.faq_items&&e.form.faq_items.length===0?(n(),a("div",A,[...o[9]||(o[9]=[t("p",null,"Нет вопросов. Добавьте первый вопрос.",-1)])])):(n(),a("div",G,[(n(!0),a(F,null,C(e.form.faq_items,(r,l)=>(n(),a("div",{key:l,class:"border border-border rounded-lg p-4 space-y-4"},[t("div",L,[t("h3",Q,"Вопрос "+b(l+1),1),t("button",{onClick:i=>e.removeFaqItem(l),class:"px-3 py-1 text-sm text-destructive hover:bg-destructive/10 rounded transition-colors"}," Удалить ",8,H)]),t("div",null,[o[10]||(o[10]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Вопрос * ",-1)),m(t("input",{"onUpdate:modelValue":i=>r.question=i,type:"text",placeholder:"Введите вопрос",class:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"},null,8,J),[[g,r.question]])]),t("div",null,[o[11]||(o[11]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Ответ * ",-1)),m(t("textarea",{"onUpdate:modelValue":i=>r.answer=i,rows:"3",placeholder:"Введите ответ на вопрос",class:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none"},null,8,K),[[g,r.answer]])]),t("div",O,[l>0?(n(),a("button",{key:0,onClick:i=>e.moveFaqItem(l,"up"),class:"px-3 py-1 text-sm border border-border hover:bg-accent/10 rounded transition-colors",title:"Переместить вверх"}," ↑ Вверх ",8,P)):c("",!0),l<e.form.faq_items.length-1?(n(),a("button",{key:1,onClick:i=>e.moveFaqItem(l,"down"),class:"px-3 py-1 text-sm border border-border hover:bg-accent/10 rounded transition-colors",title:"Переместить вниз"}," ↓ Вниз ",8,R)):c("",!0)])]))),128))]))]),t("div",W,[t("button",{onClick:o[3]||(o[3]=(...r)=>e.saveSettings&&e.saveSettings(...r)),disabled:e.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded-lg hover:bg-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},b(e.saving?"Сохранение...":"Сохранить настройки"),9,X)])]))])}const ee=h(S,[["render",Y],["__scopeId","data-v-609384b5"]]);export{ee as default};
