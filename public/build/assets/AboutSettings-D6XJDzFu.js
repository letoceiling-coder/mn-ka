import{_ as W,c as d,b as t,d as h,t as C,l as i,v as c,q as E,F as y,k as _,p as N,a as D,h as v,j as P,r as R,J as M,o as r}from"./app-Cc3OtyYY.js";import{S as U}from"./sweetalert2.esm.all-C0u8rGqG.js";import q from"./Media-CSl4SJZ8.js";import"./api-V9GPpd21.js";import"./index-W520kSw4.js";/* empty css                        */const z={name:"AboutSettings",components:{Media:q},setup(){const x=v(!0),o=v(!1),b=v(null),e=v(null),f=v(!1),p=v(null),k=async()=>{x.value=!0,b.value=null;try{const l=await M.get("/api/v1/about-settings");e.value=l.data.data,(!e.value.statistics||!Array.isArray(e.value.statistics))&&(e.value.statistics=[]),(!e.value.clients||!Array.isArray(e.value.clients))&&(e.value.clients=[]),(!e.value.team||!Array.isArray(e.value.team))&&(e.value.team=[]),(!e.value.benefits||!Array.isArray(e.value.benefits))&&(e.value.benefits=[])}catch(l){b.value=l.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching about settings:",l)}finally{x.value=!1}},s=()=>{e.value.statistics||(e.value.statistics=[]),e.value.statistics.push({icon:"",text:""})},a=l=>{e.value.statistics&&e.value.statistics.length>l&&e.value.statistics.splice(l,1)},n=()=>{e.value.clients||(e.value.clients=[]),e.value.clients.push({title:"",description:"",icon:""})},V=l=>{e.value.clients&&e.value.clients.length>l&&e.value.clients.splice(l,1)},S=()=>{e.value.team||(e.value.team=[]),e.value.team.push({name:"",position:"",photo:""})},j=l=>{e.value.team&&e.value.team.length>l&&e.value.team.splice(l,1)},A=()=>{e.value.benefits||(e.value.benefits=[]),e.value.benefits.push({title:"",description:""})},B=l=>{e.value.benefits&&e.value.benefits.length>l&&e.value.benefits.splice(l,1)},I=(l,g=null,m=null)=>{p.value={type:l,index:g,field:m},f.value=!0},T=l=>{if(!l||l.type!=="photo")return;const g=l.url.replace(/^\//,"");if(p.value){const{type:m,index:u,field:w}=p.value;m==="banner_image"?e.value.banner_image=g:m==="statistics"&&u!==null&&w==="icon"?e.value.statistics&&e.value.statistics[u]&&(e.value.statistics[u].icon=g):m==="clients"&&u!==null&&w==="icon"?e.value.clients&&e.value.clients[u]&&(e.value.clients[u].icon=g):m==="team"&&u!==null&&w==="photo"&&e.value.team&&e.value.team[u]&&(e.value.team[u].photo=g)}f.value=!1,p.value=null},F=l=>l?l.startsWith("data:")||l.startsWith("http://")||l.startsWith("https://")||l.startsWith("/")?l:`/${l}`:"",L=async()=>{o.value=!0,b.value=null;try{const l=await M.put("/api/v1/about-settings",e.value);await U.fire({icon:"success",title:"Успешно!",text:'Настройки страницы "О нас" успешно сохранены.',timer:2e3,showConfirmButton:!1})}catch(l){b.value=l.response?.data?.message||"Ошибка сохранения настроек",await U.fire({icon:"error",title:"Ошибка",text:b.value})}finally{o.value=!1}};return P(()=>{k()}),{loading:x,saving:o,error:b,settings:e,showMediaModal:f,addStatistic:s,removeStatistic:a,addClient:n,removeClient:V,addTeamMember:S,removeTeamMember:j,addBenefit:A,removeBenefit:B,openMediaModal:I,handleImageSelected:T,getImageUrl:F,saveSettings:L}}},H={class:"about-settings-page space-y-6"},J={key:0,class:"flex items-center justify-center py-12"},O={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},G={class:"text-destructive"},K={key:2,class:"space-y-6"},Q={class:"bg-card rounded-lg border border-border p-6 space-y-6"},X={class:"space-y-3"},Y={key:0,class:"relative"},Z=["src"],$={class:"mt-2 flex gap-2"},ee={key:1},te={class:"flex items-center gap-3 cursor-pointer"},oe={class:"bg-card rounded-lg border border-border p-6 space-y-6"},se={class:"flex items-center justify-between"},ne={key:0,class:"text-center py-4 text-muted-foreground"},le={key:1,class:"space-y-4"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re={class:"space-y-2"},ae={key:0,class:"flex items-center gap-3"},ie=["src"],ce={class:"flex-1"},ue=["onUpdate:modelValue"],be=["onClick"],ge={key:1,class:"flex gap-2"},me=["onUpdate:modelValue"],ve=["onClick"],pe={class:"flex gap-2"},xe=["onUpdate:modelValue"],fe=["onClick"],he={class:"bg-card rounded-lg border border-border p-6 space-y-6"},ye={class:"flex items-center justify-between"},_e={key:0,class:"text-center py-4 text-muted-foreground"},ke={key:1,class:"space-y-4"},we={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ce=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Ue={class:"space-y-2"},Ve={key:0,class:"flex items-center gap-3"},Se=["src"],je={class:"flex-1"},Ae=["onUpdate:modelValue"],Be=["onClick"],Ie={key:1,class:"flex gap-2"},Te=["onUpdate:modelValue"],Fe=["onClick"],Le=["onClick"],We={class:"bg-card rounded-lg border border-border p-6 space-y-6"},Ee={class:"flex items-center justify-between"},Ne={key:0,class:"text-center py-4 text-muted-foreground"},De={key:1,class:"space-y-4"},Pe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Re=["onUpdate:modelValue"],qe=["onUpdate:modelValue"],ze={class:"space-y-2"},He={key:0,class:"relative"},Je=["src"],Oe={class:"mt-2 flex gap-2"},Ge=["onClick"],Ke=["onClick"],Qe={key:1},Xe={class:"flex gap-2"},Ye=["onUpdate:modelValue"],Ze=["onClick"],$e=["onClick"],et={class:"bg-card rounded-lg border border-border p-6 space-y-6"},tt={class:"flex items-center justify-between"},ot={key:0,class:"text-center py-4 text-muted-foreground"},st={key:1,class:"space-y-4"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt=["onUpdate:modelValue"],dt={class:"flex gap-2"},rt=["onUpdate:modelValue"],at=["onClick"],it={class:"flex items-center justify-end gap-4"},ct=["disabled"],ut={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col my-auto"},bt={class:"p-4 border-b border-border flex items-center justify-between flex-shrink-0"},gt={class:"flex-1 overflow-auto h-full"};function mt(x,o,b,e,f,p){const k=R("Media");return r(),d("div",H,[o[35]||(o[35]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},'Настройки страницы "О нас"'),t("p",{class:"text-muted-foreground mt-1"},' Редактирование контента, который отображается на странице "О компании". ')],-1)),e.loading?(r(),d("div",J,[...o[13]||(o[13]=[t("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):h("",!0),e.error?(r(),d("div",O,[t("p",G,C(e.error),1)])):h("",!0),!e.loading&&e.settings?(r(),d("div",K,[t("div",Q,[o[19]||(o[19]=t("h2",{class:"text-xl font-semibold text-foreground"},"Баннер и описание",-1)),t("div",null,[o[16]||(o[16]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Изображение баннера ",-1)),t("div",X,[e.settings.banner_image?(r(),d("div",Y,[t("img",{src:e.getImageUrl(e.settings.banner_image),alt:"Banner preview",class:"w-full max-w-md h-auto object-cover rounded-lg border border-border"},null,8,Z),t("div",$,[t("button",{type:"button",onClick:o[0]||(o[0]=s=>e.openMediaModal("banner_image")),class:"px-4 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-sm"}," Изменить изображение "),t("button",{type:"button",onClick:o[1]||(o[1]=s=>e.settings.banner_image=null),class:"px-4 py-2 bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20 text-sm"}," Удалить ")])])):(r(),d("div",ee,[t("button",{type:"button",onClick:o[2]||(o[2]=s=>e.openMediaModal("banner_image")),class:"w-full h-32 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 transition-colors"},[...o[14]||(o[14]=[t("span",{class:"text-muted-foreground"},"Выберите изображение баннера",-1)])])])),t("div",null,[o[15]||(o[15]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"Или введите URL вручную:",-1)),i(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>e.settings.banner_image=s),placeholder:"/img/banner.jpg или полный URL",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[c,e.settings.banner_image]])])])]),t("div",null,[t("label",te,[i(t("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=s=>e.settings.banner_overlay=s),class:"w-4 h-4 rounded border-border"},null,512),[[E,e.settings.banner_overlay]]),o[17]||(o[17]=t("span",{class:"text-sm font-medium text-foreground"},"Наложение (overlay) на баннер",-1))])]),t("div",null,[o[18]||(o[18]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Описание о компании (HTML) ",-1)),i(t("textarea",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.settings.description=s),rows:"6",placeholder:"Введите описание о компании...",class:"w-full px-3 py-2 border border-border rounded bg-background text-sm"},null,512),[[c,e.settings.description]])])]),t("div",oe,[t("div",se,[o[20]||(o[20]=t("h2",{class:"text-xl font-semibold text-foreground"},"Статистика",-1)),t("button",{onClick:o[6]||(o[6]=(...s)=>e.addStatistic&&e.addStatistic(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!e.settings.statistics||e.settings.statistics.length===0?(r(),d("div",ne," Нет элементов статистики ")):(r(),d("div",le,[(r(!0),d(y,null,_(e.settings.statistics,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[t("div",de,[t("div",null,[o[21]||(o[21]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Иконка ",-1)),t("div",re,[s.icon?(r(),d("div",ae,[t("img",{src:e.getImageUrl(s.icon),alt:"Icon preview",class:"w-12 h-12 object-contain border border-border rounded"},null,8,ie),t("div",ce,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/1.svg",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,ue),[[c,s.icon]])]),t("button",{type:"button",onClick:n=>e.openMediaModal("statistics",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,be)])):(r(),d("div",ge,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/1.svg",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,me),[[c,s.icon]]),t("button",{type:"button",onClick:n=>e.openMediaModal("statistics",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,ve)]))])]),t("div",null,[o[22]||(o[22]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Текст ",-1)),t("div",pe,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.text=n,placeholder:"93% клиентов приходят по рекомендации",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,xe),[[c,s.text]]),t("button",{onClick:n=>e.removeStatistic(a),class:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить ",8,fe)])])])]))),128))]))]),t("div",he,[t("div",ye,[o[23]||(o[23]=t("h2",{class:"text-xl font-semibold text-foreground"},"Кому мы помогаем",-1)),t("button",{onClick:o[7]||(o[7]=(...s)=>e.addClient&&e.addClient(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!e.settings.clients||e.settings.clients.length===0?(r(),d("div",_e," Нет элементов ")):(r(),d("div",ke,[(r(!0),d(y,null,_(e.settings.clients,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[t("div",we,[t("div",null,[o[24]||(o[24]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок * ",-1)),i(t("input",{type:"text","onUpdate:modelValue":n=>s.title=n,placeholder:"Девелоперам и застройщикам",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Ce),[[c,s.title]])]),t("div",null,[o[25]||(o[25]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Описание ",-1)),i(t("input",{type:"text","onUpdate:modelValue":n=>s.description=n,placeholder:"Помогаем с подбором участков...",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Me),[[c,s.description]])]),t("div",null,[o[26]||(o[26]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Иконка ",-1)),t("div",Ue,[s.icon?(r(),d("div",Ve,[t("img",{src:e.getImageUrl(s.icon),alt:"Icon preview",class:"w-12 h-12 object-contain border border-border rounded"},null,8,Se),t("div",je,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/4.svg",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Ae),[[c,s.icon]])]),t("button",{type:"button",onClick:n=>e.openMediaModal("clients",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,Be)])):(r(),d("div",Ie,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.icon=n,placeholder:"/img/system/4.svg",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Te),[[c,s.icon]]),t("button",{type:"button",onClick:n=>e.openMediaModal("clients",a,"icon"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,Fe)])),t("button",{onClick:n=>e.removeClient(a),class:"w-full px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить элемент ",8,Le)])])])]))),128))]))]),t("div",We,[t("div",Ee,[o[27]||(o[27]=t("h2",{class:"text-xl font-semibold text-foreground"},"Наша команда",-1)),t("button",{onClick:o[8]||(o[8]=(...s)=>e.addTeamMember&&e.addTeamMember(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!e.settings.team||e.settings.team.length===0?(r(),d("div",Ne," Нет членов команды ")):(r(),d("div",De,[(r(!0),d(y,null,_(e.settings.team,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[t("div",Pe,[t("div",null,[o[28]||(o[28]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Имя * ",-1)),i(t("input",{type:"text","onUpdate:modelValue":n=>s.name=n,placeholder:"Иван Иванов",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Re),[[c,s.name]])]),t("div",null,[o[29]||(o[29]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Должность ",-1)),i(t("input",{type:"text","onUpdate:modelValue":n=>s.position=n,placeholder:"CEO lagom",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,qe),[[c,s.position]])]),t("div",null,[o[30]||(o[30]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Фото ",-1)),t("div",ze,[s.photo?(r(),d("div",He,[t("img",{src:e.getImageUrl(s.photo),alt:"Photo preview",class:"w-full max-w-xs h-auto object-cover rounded-lg border border-border"},null,8,Je),t("div",Oe,[t("button",{type:"button",onClick:n=>e.openMediaModal("team",a,"photo"),class:"px-4 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs"}," Изменить фото ",8,Ge),t("button",{type:"button",onClick:n=>s.photo=null,class:"px-4 py-2 bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20 text-xs"}," Удалить фото ",8,Ke)])])):(r(),d("div",Qe,[t("div",Xe,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.photo=n,placeholder:"/img/team/1.jpg",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,Ye),[[c,s.photo]]),t("button",{type:"button",onClick:n=>e.openMediaModal("team",a,"photo"),class:"px-3 py-2 bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20 text-xs whitespace-nowrap"}," Выбрать ",8,Ze)])])),t("button",{onClick:n=>e.removeTeamMember(a),class:"w-full px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить из команды ",8,$e)])])])]))),128))]))]),t("div",et,[t("div",tt,[o[31]||(o[31]=t("h2",{class:"text-xl font-semibold text-foreground"},"Почему выбирают нас",-1)),t("button",{onClick:o[9]||(o[9]=(...s)=>e.addBenefit&&e.addBenefit(...s)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),!e.settings.benefits||e.settings.benefits.length===0?(r(),d("div",ot," Нет преимуществ ")):(r(),d("div",st,[(r(!0),d(y,null,_(e.settings.benefits,(s,a)=>(r(),d("div",{key:a,class:"p-4 border border-border rounded-lg space-y-3"},[t("div",nt,[t("div",null,[o[32]||(o[32]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок * ",-1)),i(t("input",{type:"text","onUpdate:modelValue":n=>s.title=n,placeholder:"500+ участков в базе",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,lt),[[c,s.title]])]),t("div",null,[o[33]||(o[33]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Описание ",-1)),t("div",dt,[i(t("input",{type:"text","onUpdate:modelValue":n=>s.description=n,placeholder:"Большой выбор готовых предложений",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,rt),[[c,s.description]]),t("button",{onClick:n=>e.removeBenefit(a),class:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить ",8,at)])])])]))),128))]))]),t("div",it,[t("button",{onClick:o[10]||(o[10]=(...s)=>e.saveSettings&&e.saveSettings(...s)),disabled:e.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},C(e.saving?"Сохранение...":"Сохранить настройки"),9,ct)])])):h("",!0),e.showMediaModal?(r(),d("div",{key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto p-4",onClick:o[12]||(o[12]=N(s=>e.showMediaModal=!1,["self"]))},[t("div",ut,[t("div",bt,[o[34]||(o[34]=t("h3",{class:"text-lg font-semibold"},"Выберите изображение",-1)),t("button",{onClick:o[11]||(o[11]=s=>e.showMediaModal=!1),class:"text-muted-foreground hover:text-foreground w-8 h-8 flex items-center justify-center rounded hover:bg-muted/10"}," ✕ ")]),t("div",gt,[D(k,{"selection-mode":!0,"count-file":1,onFileSelected:e.handleImageSelected},null,8,["onFileSelected"])])])])):h("",!0)])}const _t=W(z,[["render",mt]]);export{_t as default};
