import{_ as k,h as g,z as v,i as w,c as a,b as t,d as m,t as u,p as F,l as p,f as y,v as x,x as h,o as i}from"./app-Dfv-mbMf.js";import{S}from"./sweetalert2.esm.all-C0u8rGqG.js";const E={name:"FeedbackForm",props:{title:{type:String,default:"Обратная связь"},description:{type:String,default:"Оставьте ваше сообщение, и мы обязательно свяжемся с вами"}},setup(){const s=g({name:"",phone:"",email:"",message:""}),r=g({}),d=g(!1),e=g(!1),b=g(null),_=l=>{let o=l.replace(/\D/g,"");if(o.length>11&&(o=o.slice(0,11)),o.length>0&&!o.startsWith("7")&&(o.startsWith("8")?o="7"+o.slice(1):o="7"+o),o.length<=1)return o.length===0?"":"+7";let f="+7";const c=o.slice(1);return c.length>0&&(f+=" ("+c.slice(0,3),c.length>3&&(f+=") "+c.slice(3,6),c.length>6&&(f+="-"+c.slice(6,8),c.length>8&&(f+="-"+c.slice(8,10))))),f};v(()=>s.value.phone,l=>{s.value.phone=_(l)}),v(()=>s.value.message,l=>{l.length>5e3&&(s.value.message=l.slice(0,5e3))});const n=w(()=>s.value.name.trim()!==""&&s.value.message.trim()!=="");return{form:s,errors:r,loading:d,success:e,error:b,canSubmit:n,submitForm:async()=>{if(!(!n.value||d.value)){r.value={},b.value=null,d.value=!0;try{const l=await fetch("/api/public/feedback",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:s.value.name.trim(),phone:s.value.phone.trim()||null,email:s.value.email.trim()||null,message:s.value.message.trim()})}),o=await l.json();if(!l.ok)throw o.errors&&(r.value=o.errors),new Error(o.message||"Ошибка при отправке формы");e.value=!0,s.value={name:"",phone:"",email:"",message:""},await S.fire({icon:"success",title:"Спасибо!",text:"Ваше сообщение успешно отправлено. Мы свяжемся с вами в ближайшее время.",timer:3e3,showConfirmButton:!1}),setTimeout(()=>{e.value=!1},5e3)}catch(l){b.value=l.message||"Ошибка при отправке формы",console.error("Error submitting feedback:",l)}finally{d.value=!1}}}}}},V={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},C={class:"w-full max-w-[1200px] mx-auto"},T={class:"feedback-form-container bg-[#F4F6FC] py-8 md:py-12 px-4 md:px-6 rounded-lg"},N={class:"max-w-4xl mx-auto"},j={key:0,class:"text-center mb-8"},B={key:0,class:"text-2xl md:text-3xl font-semibold text-foreground mb-3"},U={key:1,class:"text-muted-foreground text-base md:text-lg"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={key:0,class:"mt-1 text-sm text-red-500"},D={key:0,class:"mt-1 text-sm text-red-500"},O={key:0,class:"mt-1 text-sm text-red-500"},A={key:0,class:"mt-1 text-sm text-red-500"},P={class:"mt-1 text-xs text-muted-foreground"},W={class:"flex justify-center pt-4"},I=["disabled"],J={key:0},K={key:1},M={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800 text-center"},R={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-center"},X={class:"font-medium"};function G(s,r,d,e,b,_){return i(),a("section",V,[t("div",C,[t("div",T,[t("div",N,[d.title||d.description?(i(),a("div",j,[d.title?(i(),a("h2",B,u(d.title),1)):m("",!0),d.description?(i(),a("p",U,u(d.description),1)):m("",!0)])):m("",!0),t("form",{onSubmit:r[4]||(r[4]=F((...n)=>e.submitForm&&e.submitForm(...n),["prevent"])),class:"space-y-6"},[t("div",q,[t("div",null,[r[5]||(r[5]=t("label",{for:"name",class:"block text-sm font-medium text-foreground mb-2"},[y(" Имя "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{id:"name","onUpdate:modelValue":r[0]||(r[0]=n=>e.form.name=n),type:"text",required:"",placeholder:"Ваше имя",class:h(["w-full h-12 px-4 border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.name}])},null,2),[[x,e.form.name]]),e.errors.name?(i(),a("p",z,u(e.errors.name),1)):m("",!0)]),t("div",null,[r[6]||(r[6]=t("label",{for:"phone",class:"block text-sm font-medium text-foreground mb-2"}," Телефон ",-1)),p(t("input",{id:"phone","onUpdate:modelValue":r[1]||(r[1]=n=>e.form.phone=n),type:"tel",placeholder:"+7 (___) ___-__-__",class:h(["w-full h-12 px-4 border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.phone}])},null,2),[[x,e.form.phone]]),e.errors.phone?(i(),a("p",D,u(e.errors.phone),1)):m("",!0)])]),t("div",null,[r[7]||(r[7]=t("label",{for:"email",class:"block text-sm font-medium text-foreground mb-2"}," Email ",-1)),p(t("input",{id:"email","onUpdate:modelValue":r[2]||(r[2]=n=>e.form.email=n),type:"email",placeholder:"your@email.com",class:h(["w-full h-12 px-4 border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.email}])},null,2),[[x,e.form.email]]),e.errors.email?(i(),a("p",O,u(e.errors.email),1)):m("",!0)]),t("div",null,[r[8]||(r[8]=t("label",{for:"message",class:"block text-sm font-medium text-foreground mb-2"},[y(" Сообщение "),t("span",{class:"text-red-500"},"*")],-1)),p(t("textarea",{id:"message","onUpdate:modelValue":r[3]||(r[3]=n=>e.form.message=n),required:"",rows:"6",placeholder:"Введите ваше сообщение...",class:h(["w-full px-4 py-3 border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent resize-none transition-colors",{"border-red-500":e.errors.message}])},null,2),[[x,e.form.message]]),e.errors.message?(i(),a("p",A,u(e.errors.message),1)):m("",!0),t("p",P,u(e.form.message.length)+"/5000 символов ",1)]),t("div",W,[t("button",{type:"submit",disabled:e.loading||!e.canSubmit,class:"px-8 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium text-base min-w-[200px]"},[e.loading?(i(),a("span",J,"Отправка...")):(i(),a("span",K,"Отправить"))],8,I)]),e.success?(i(),a("div",M,[...r[9]||(r[9]=[t("p",{class:"font-medium"},"Спасибо за ваше обращение!",-1),t("p",{class:"text-sm mt-1"},"Мы свяжемся с вами в ближайшее время.",-1)])])):m("",!0),e.error?(i(),a("div",R,[t("p",X,u(e.error),1)])):m("",!0)],32)])])])])}const Y=k(E,[["render",G],["__scopeId","data-v-27123c78"]]);export{Y as F};
