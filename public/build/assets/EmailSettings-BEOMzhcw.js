import{_ as v,c as n,b as s,d,t as m,l as x,v as p,h as i,j as b,J as g,o as l}from"./app-B2iOnv92.js";import{S as f}from"./sweetalert2.esm.all-C0u8rGqG.js";const y={name:"EmailSettings",setup(){const r=i(!0),e=i(!1),o=i(null),t=i(null),c=async()=>{r.value=!0,o.value=null;try{const a=await g.get("/api/v1/email-settings");t.value=a.data.data}catch(a){o.value=a.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching email settings:",a)}finally{r.value=!1}},u=async()=>{e.value=!0,o.value=null;try{await g.put("/api/v1/email-settings",t.value),await f.fire({icon:"success",title:"Успешно!",text:"Настройки email успешно сохранены.",timer:2e3,showConfirmButton:!1})}catch(a){o.value=a.response?.data?.message||"Ошибка сохранения настроек",await f.fire({icon:"error",title:"Ошибка",text:o.value})}finally{e.value=!1}};return b(()=>{c()}),{loading:r,saving:e,error:o,settings:t,saveSettings:u}}},_={class:"email-settings-page space-y-6"},k={key:0,class:"flex items-center justify-center py-12"},w={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},S={class:"text-destructive"},h={key:2,class:"space-y-6"},E={class:"bg-card rounded-lg border border-border p-6 space-y-6"},B={class:"flex justify-end"},j=["disabled"];function C(r,e,o,t,c,u){return l(),n("div",_,[e[6]||(e[6]=s("div",null,[s("h1",{class:"text-3xl font-semibold text-foreground"},"Настройки Email"),s("p",{class:"text-muted-foreground mt-1"}," Настройка email адреса для получения форм с сайта ")],-1)),t.loading?(l(),n("div",k,[...e[2]||(e[2]=[s("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):d("",!0),t.error?(l(),n("div",w,[s("p",S,m(t.error),1)])):d("",!0),!t.loading&&t.settings?(l(),n("div",h,[s("div",E,[e[5]||(e[5]=s("h2",{class:"text-xl font-semibold text-foreground"},"Email для получения форм",-1)),s("div",null,[e[3]||(e[3]=s("label",{class:"block text-sm font-medium text-foreground mb-2"}," Email адрес получателя ",-1)),x(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=a=>t.settings.recipient_email=a),placeholder:"info@mn-ka.ru",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[p,t.settings.recipient_email]]),e[4]||(e[4]=s("p",{class:"text-xs text-muted-foreground mt-2"}," На этот email будут отправляться все формы обратной связи, заявки на продукты и другие формы с сайта ",-1))])]),s("div",B,[s("button",{onClick:e[1]||(e[1]=(...a)=>t.saveSettings&&t.saveSettings(...a)),disabled:t.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},m(t.saving?"Сохранение...":"Сохранить настройки"),9,j)])])):d("",!0)])}const M=v(y,[["render",C]]);export{M as default};
