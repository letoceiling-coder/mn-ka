import{_,c as n,b as t,d as a,f as v,t as i,F as y,k as h,h as m,j as D,C as k,o as d}from"./app-D8FlZlXN.js";const z={name:"QuizDetails",setup(){const c=k(),o=m(!1),u=m(null),r=m(null),g=async()=>{o.value=!0,u.value=null;try{const e=c.query.notification_id;if(!e)throw new Error("ID уведомления не указан");const s=localStorage.getItem("token"),b={Accept:"application/json","Content-Type":"application/json"};s&&(b.Authorization=`Bearer ${s}`);const p=await fetch(`/api/notifications/${e}`,{method:"GET",headers:b});if(!p.ok)throw new Error("Ошибка загрузки данных уведомления");const f=(await p.json()).data;if(!f.data||!f.data.quiz_id)throw new Error("Данные о квизе не найдены");r.value=f.data}catch(e){u.value=e.message||"Ошибка загрузки данных"}finally{o.value=!1}},x=e=>e?new Date(e).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",l=e=>e==null?"Нет ответа":typeof e=="object"?e.text?e.text:e.value?e.value:e.name?e.name:e.title?e.title:Array.isArray(e)?e.map(s=>typeof s=="object"?s.name||s.title||JSON.stringify(s):s).join(", "):JSON.stringify(e,null,2):String(e);return D(()=>{g()}),{loading:o,error:u,quizData:r,formatDate:x,formatAnswer:l}}},q={class:"quiz-details-page space-y-6"},j={class:"flex items-center justify-between"},w={key:0,class:"flex items-center justify-center py-12"},A={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},E={class:"text-destructive"},B={key:2,class:"space-y-6"},C={class:"bg-card rounded-lg border border-border p-6"},N={class:"flex items-start justify-between"},S={class:"text-2xl font-semibold text-foreground mb-2"},Q={key:0,class:"text-sm text-muted-foreground"},T={key:0,class:"bg-card rounded-lg border border-border p-6"},V={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},F={class:"text-foreground font-medium"},I={class:"text-foreground font-medium"},J={class:"text-foreground font-medium"},L={key:1,class:"bg-card rounded-lg border border-border p-6"},M={class:"space-y-4"},O={class:"flex items-start gap-4"},R={class:"flex-shrink-0 w-10 h-10 rounded-full bg-accent text-accent-foreground flex items-center justify-center font-semibold"},G={class:"flex-1 min-w-0"},U={class:"text-lg font-medium text-foreground mb-2"},H={class:"bg-muted/50 rounded-lg p-4 mt-3"},K={class:"text-foreground font-medium text-base"};function P(c,o,u,r,g,x){return d(),n("div",q,[t("div",j,[o[2]||(o[2]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Детали прохождения квиза"),t("p",{class:"text-muted-foreground mt-1"},"Подробная информация о прохождении квиза пользователем")],-1)),t("button",{onClick:o[0]||(o[0]=l=>c.$router.push("/admin/notifications")),class:"px-4 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-lg transition-colors flex items-center gap-2"},[...o[1]||(o[1]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Вернуться к уведомлениям ",-1)])])]),r.loading?(d(),n("div",w,[...o[3]||(o[3]=[t("p",{class:"text-muted-foreground"},"Загрузка данных...",-1)])])):a("",!0),r.error?(d(),n("div",A,[t("p",E,i(r.error),1)])):a("",!0),!r.loading&&r.quizData?(d(),n("div",B,[t("div",C,[t("div",N,[t("div",null,[t("h2",S,i(r.quizData.quiz_title),1),r.quizData.completed_at?(d(),n("p",Q," Завершено: "+i(r.formatDate(r.quizData.completed_at)),1)):a("",!0)]),o[4]||(o[4]=t("span",{class:"px-3 py-1 text-sm bg-green-500/10 text-green-500 rounded-full"}," Успешно завершен ",-1))])]),r.quizData.contact?(d(),n("div",T,[o[8]||(o[8]=t("h3",{class:"text-xl font-semibold text-foreground mb-4"},"Контактная информация",-1)),t("div",V,[t("div",null,[o[5]||(o[5]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Имя",-1)),t("p",F,i(r.quizData.contact.name),1)]),t("div",null,[o[6]||(o[6]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Email",-1)),t("p",I,i(r.quizData.contact.email),1)]),t("div",null,[o[7]||(o[7]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Телефон",-1)),t("p",J,i(r.quizData.contact.phone),1)])])])):a("",!0),r.quizData.answers&&r.quizData.answers.length>0?(d(),n("div",L,[o[10]||(o[10]=t("h3",{class:"text-xl font-semibold text-foreground mb-6"},"Ответы пользователя",-1)),t("div",M,[(d(!0),n(y,null,h(r.quizData.answers,(l,e)=>(d(),n("div",{key:e,class:"border border-border rounded-lg p-5 hover:bg-muted/30 transition-colors"},[t("div",O,[t("div",R,i(e+1),1),t("div",G,[t("h4",U,i(l.question_text||`Вопрос ${e+1}`),1),t("div",H,[o[9]||(o[9]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Ответ:",-1)),t("p",K,i(r.formatAnswer(l.answer)),1)])])])]))),128))])])):a("",!0)])):a("",!0)])}const Y=_(z,[["render",P]]);export{Y as default};
