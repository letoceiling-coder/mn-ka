import{_ as C,d as b,e as N,f as V,c as u,g as v,n as M,b as n,h as E,t as h,w as F,i as O,o as d,j as U,T as W,k as H,F as z,a as q,l as T,r as $,m as D,p as I,v as Q,q as J,s as K,u as G,x as X}from"./app-DGcwVKox.js";import{F as Y,H as Z}from"./Faq-Q3HfLQt7.js";import{D as ee}from"./DecisionCard-CfIeq-7g.js";import{F as te}from"./FeedbackForm-Dwv2UDht.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const se={name:"HeroBanner",props:{slug:{type:String,default:"home-banner"}},setup(o){const t=b(null),r=b(!0),e=async()=>{try{const s=await fetch(`/api/public/banners/${o.slug}`);if(s.ok){const a=await s.json();a.data&&(t.value={...a.data,background_image:a.data.background_image?`/${a.data.background_image.replace(/^\//,"")}`:null,height_desktop:a.data.height_desktop||380,height_mobile:a.data.height_mobile||300})}}catch(s){console.error("Error fetching banner:",s)}finally{r.value=!1}},m=()=>{t.value.button_type==="method"&&console.log("Method button clicked:",t.value.button_value)},c=N(()=>{if(!t.value)return{};const s=t.value.height_desktop||380,a=t.value.height_mobile||300,g=s-a,y=`(${a}px + ${g} * ((100vw - 320px) / 880))`;return{"--banner-height-mobile":`${a}px`,"--banner-height-desktop":`${s}px`,minHeight:`${a}px`,height:`clamp(${a}px, ${y}, ${s}px)`}});return V(()=>{e()}),{banner:t,loading:r,bannerStyle:c,handleButtonClick:m}}},ne={class:"w-full px-3 sm:px-4 md:px-5 mt-3"},oe={class:"w-full max-w-2xl"},ae={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},re={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},ie={key:1,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},le={key:2,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function de(o,t,r,e,m,c){return d(),u("div",ne,[e.banner&&e.banner.is_active?(d(),u("section",{key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg overflow-hidden shadow-sm",style:M(e.bannerStyle)},[n("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:M({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),n("div",{class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full flex items-center",style:M(e.bannerStyle)},[n("div",oe,[e.banner.heading_1||e.banner.heading_2||e.banner.description?(d(),u("div",ae,[e.banner.heading_1?(d(),u("h1",re,h(e.banner.heading_1),1)):v("",!0),e.banner.heading_2?(d(),u("h2",ie,h(e.banner.heading_2),1)):v("",!0),e.banner.description?(d(),u("p",le,h(e.banner.description),1)):v("",!0)])):v("",!0),e.banner.button_text?(d(),E(O(e.banner.button_type==="method"?"button":"router-link"),{key:1,to:e.banner.button_type==="url"?e.banner.button_value:void 0,onClick:e.handleButtonClick,class:"inline-block bg-[#657C6C] hover:bg-[#55695a] active:bg-[#48554a] text-white font-medium text-base sm:text-lg px-8 sm:px-10 md:px-12 py-3 sm:py-3.5 md:py-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-100 shadow-lg"},{default:F(()=>[U(h(e.banner.button_text),1)]),_:1},8,["to","onClick"])):v("",!0)])],4)],4)):v("",!0)])}const ce=C(se,[["render",de]]),ue={name:"Decisions",components:{DecisionCard:ee,Transition:H,TransitionGroup:W},setup(){const o=b("Выберите решение под ваш участок"),t=b([]),r=b(!0),e=b(null),m=async()=>{try{const x=await fetch("/api/public/decision-block/settings");if(!x.ok)throw new Error("Ошибка загрузки настроек");const y=await x.json();y.data&&y.data.title&&(o.value=y.data.title)}catch(x){console.error("Ошибка загрузки настроек:",x)}},c=async()=>{r.value=!0,e.value=null;try{const x=await fetch("/api/public/decision-block/chapters");if(!x.ok)throw new Error("Ошибка загрузки данных");const j=(await x.json()).data||[];t.value=j.map((k,B)=>({id:k.id,name:k.name,active:B===0,items:[...(k.products||[]).map(S=>({...S,category:"products"})),...(k.services||[]).map(S=>({...S,category:"services"}))]})),t.value.length>0&&!t.value.find(k=>k.active)&&(t.value[0].active=!0)}catch(x){console.error("Ошибка загрузки разделов:",x),e.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{r.value=!1}},s=N(()=>t.value.find(x=>x.active)||t.value[0]),a=N(()=>s.value?.items||[]),g=x=>{t.value.forEach(y=>{y.active=y.id===x.id})};return V(async()=>{await Promise.all([m(),c()])}),{title:o,chapters:t,activeChapter:s,activeItems:a,setActiveChapter:g,loading:r,error:e}}},me={class:"w-full px-3 sm:px-4 md:px-5 mt-8 sm:mt-12"},fe={class:"w-full max-w-[1200px] mx-auto"},xe={class:"flex justify-center mb-6 sm:mb-8"},he={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900"},ge={key:0,class:"flex justify-center items-center py-12"},be={key:1,class:"flex justify-center items-center py-12"},pe={class:"text-red-500"},_e={key:0,class:"flex flex-col sm:flex-row gap-3 sm:gap-0 mb-6 sm:mb-8"},ve=["onClick"];function ye(o,t,r,e,m,c){const s=$("DecisionCard");return d(),u("div",me,[n("div",fe,[n("div",xe,[n("h2",he,h(e.title),1)]),e.loading?(d(),u("div",ge,[...t[0]||(t[0]=[n("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(d(),u("div",be,[n("div",pe,h(e.error),1)])):(d(),u(z,{key:2},[e.chapters.length>0?(d(),u("div",_e,[(d(!0),u(z,null,T(e.chapters,(a,g)=>(d(),u("button",{key:a.id,onClick:x=>e.setActiveChapter(a),class:D(["flex-1 px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-normal text-center transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","rounded-lg sm:rounded-none",a.active?"bg-[#657C6C] text-white border border-[#657C6C] hover:bg-[#55695a] focus:ring-[#657C6C] shadow-md":"bg-white text-black border border-[#657C6C] hover:bg-[#D7D7D7] focus:ring-[#657C6C] shadow-sm",g===0?a.active?"sm:rounded-l-lg sm:rounded-r-none":"sm:rounded-l-lg sm:rounded-r-none sm:border-r-0":"",g===e.chapters.length-1?a.active?"sm:rounded-r-lg sm:rounded-l-none":"sm:rounded-r-lg sm:rounded-l-none sm:border-l-0":""])},h(a.name),11,ve))),128))])):v("",!0),q(H,{name:"fade-slide",mode:"out-in"},{default:F(()=>[e.activeItems.length>0?(d(),u("div",{key:`content-${e.activeChapter?.id}`,class:"relative"},[q(W,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:F(()=>[(d(!0),u(z,null,T(e.activeItems,(a,g)=>(d(),E(s,{key:`${a.id}-${a.category}-${e.activeChapter?.id}`,decision:a,slug:a.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(d(),u("div",{key:`empty-${e.activeChapter?.id}`,class:"flex justify-center items-center py-12"},[...t[1]||(t[1]=[n("div",{class:"text-gray-500"},"В этом разделе пока нет элементов",-1)])]))]),_:1})],64))])])}const we=C(ue,[["render",ye],["__scopeId","data-v-9be57a33"]]),ke={name:"ImagesCollect",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(o){const t={id:o.id||o.name,name:o.name||"",title:o.title||o.name||"",text:o.title||o.name||"",src:o.src||o.webp||""};this.$emit("answer",t),o.child?setTimeout(()=>{this.$emit("next",o.child)},300):setTimeout(()=>{this.$emit("next")},300)},handleImageError(o){o.target.src="/upload/quiz/placeholder.jpg"}}},Ce={class:"mt-6"},qe={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},$e={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Se={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},ze={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4"},je=["onClick"],Ie={class:"relative aspect-[245/140] sm:aspect-[245/140] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},Ne=["src","alt"],Te={class:"absolute top-3 left-3 right-3 z-10"},De={class:"text-white font-medium text-base sm:text-lg md:text-xl drop-shadow-lg"};function Qe(o,t,r,e,m,c){return d(),u("div",Ce,[n("div",qe,[n("div",$e,h(r.data.id),1),n("div",Se,h(r.data.question),1)]),n("div",ze,[(d(!0),u(z,null,T(r.data.selects,s=>(d(),u("div",{key:s.id,class:"relative group cursor-pointer",onClick:a=>c.handleSelect(s)},[n("div",Ie,[n("img",{src:s.src||s.webp||"/upload/quiz/placeholder.jpg",alt:s.name||s.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:t[0]||(t[0]=(...a)=>c.handleImageError&&c.handleImageError(...a))},null,40,Ne),t[1]||(t[1]=n("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent pointer-events-none"},null,-1)),n("div",Te,[n("h3",De,h(s.title),1)])])],8,je))),128))])])}const Ee=C(ke,[["render",Qe]]),Fe={name:"Selects",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(o){const t={id:o.id||o.name,name:o.name||"",title:o.title||o.name||"",text:o.name||o.title||""};this.$emit("answer",t),setTimeout(()=>{this.$emit("next")},300)}}},Ve={class:"mt-6"},Be={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Me={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},He={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Ae={class:"space-y-3 sm:space-y-4 max-w-2xl"},Oe=["onClick"];function Ue(o,t,r,e,m,c){return d(),u("div",Ve,[n("div",Be,[n("div",Me,h(r.data.id),1),n("div",He,h(r.data.question),1)]),n("div",Ae,[(d(!0),u(z,null,T(r.data.selects,s=>(d(),u("button",{key:s.id,onClick:a=>c.handleSelect(s),class:"w-full px-6 py-4 text-left bg-white border-2 border-gray-200 rounded-lg hover:border-[#657C6C] hover:bg-gray-50 transition-all duration-200 text-base sm:text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"},h(s.name),9,Oe))),128))])])}const We=C(Fe,[["render",Ue]]),Le={name:"Inputs",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],setup(o,{emit:t}){const r=b(o.data?.answer||""),e=N(()=>{const c=r.value;return c==null?!1:c.toString().trim()!==""});return{answerValue:r,isAnswerValid:e,handleNext:()=>{const c=r.value?.toString().trim()||"";c&&(o.data&&(o.data.answer=c),t("answer",c),o.data?.child?t("next",o.data.child):t("next"))}}}},Pe={class:"mt-6"},Re={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Je={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Ke={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Ge={class:"max-w-2xl"},Xe={class:"block text-sm font-medium text-gray-700 mb-2"},Ye={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},Ze=["placeholder"],et=["disabled"];function tt(o,t,r,e,m,c){return d(),u("div",Pe,[n("div",Re,[n("div",Je,h(r.data.id),1),n("div",Ke,h(r.data.question),1)]),n("div",Ge,[n("label",Xe,h(r.data.label),1),n("div",Ye,[I(n("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.answerValue=s),type:"text",placeholder:r.data.placeholder,onKeyup:t[1]||(t[1]=J((...s)=>e.handleNext&&e.handleNext(...s),["enter"])),class:"flex-1 w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors disabled:opacity-50 focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none"},null,40,Ze),[[Q,e.answerValue]]),n("button",{onClick:t[2]||(t[2]=(...s)=>e.handleNext&&e.handleNext(...s)),disabled:!e.isAnswerValid,class:"px-6 sm:px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Далее ",8,et)])])])}const st=C(Le,[["render",tt]]),nt={name:"Forms",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],computed:{isFormValid(){return this.data.form.name&&this.data.form.name.trim()!==""&&this.data.form.email&&this.data.form.email.trim()!==""&&this.data.form.phone&&this.data.form.phone.trim()!==""&&this.data.form.check}},methods:{async handleSubmit(){this.isFormValid&&(this.$emit("answer",this.data.form),this.$emit("submit",{name:this.data.form.name,email:this.data.form.email,phone:this.data.form.phone}))}}},ot={class:"mt-6"},at={class:"mb-6 px-2"},rt=["innerHTML"],it={class:"max-w-2xl"},lt={class:"flex items-start"},dt=["disabled"];function ct(o,t,r,e,m,c){return d(),u("div",ot,[n("div",at,[n("div",{class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900",innerHTML:r.data.question},null,8,rt)]),n("div",it,[n("form",{onSubmit:t[4]||(t[4]=K((...s)=>c.handleSubmit&&c.handleSubmit(...s),["prevent"])),class:"space-y-4"},[n("div",null,[t[5]||(t[5]=n("label",{for:"quiz-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),I(n("input",{id:"quiz-name","onUpdate:modelValue":t[0]||(t[0]=s=>r.data.form.name=s),type:"text",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"Иван Иванов"},null,512),[[Q,r.data.form.name]])]),n("div",null,[t[6]||(t[6]=n("label",{for:"quiz-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш email ",-1)),I(n("input",{id:"quiz-email","onUpdate:modelValue":t[1]||(t[1]=s=>r.data.form.email=s),type:"email",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"your@email.com"},null,512),[[Q,r.data.form.email]])]),n("div",null,[t[7]||(t[7]=n("label",{for:"quiz-phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш телефон ",-1)),I(n("input",{id:"quiz-phone","onUpdate:modelValue":t[2]||(t[2]=s=>r.data.form.phone=s),type:"tel",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"+7 (999) 123-45-67"},null,512),[[Q,r.data.form.phone]])]),n("div",lt,[I(n("input",{id:"quiz-check","onUpdate:modelValue":t[3]||(t[3]=s=>r.data.form.check=s),type:"checkbox",required:"",class:"mt-1 h-4 w-4 rounded border-gray-300 text-[#657C6C] focus:ring-[#657C6C] focus:ring-2"},null,512),[[G,r.data.form.check]]),t[8]||(t[8]=n("label",{for:"quiz-check",class:"ml-3 text-sm text-gray-600"}," Отправляя данную форму, вы соглашаетесь на обработку персональных данных ",-1))]),n("button",{type:"submit",disabled:!c.isFormValid,class:"w-full sm:w-auto px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Отправить ",8,dt)],32)])])}const ut=C(nt,[["render",ct]]),mt={name:"Thank",props:{data:{type:Object,default:()=>({})},numberQuestion:{type:Number,required:!0}}},ft={class:"mt-6"};function xt(o,t,r,e,m,c){return d(),u("div",ft,[...t[0]||(t[0]=[X('<div class="flex flex-col items-center justify-center py-8 sm:py-12 px-4"><div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-green-100 flex items-center justify-center mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl sm:text-2xl md:text-3xl font-semibold text-gray-900 text-center mb-4"> Спасибо! </h3><p class="text-base sm:text-lg text-gray-600 text-center max-w-md"> Наши специалисты свяжутся с вами в течение 15 минут </p></div>',1)])])}const ht=C(mt,[["render",xt]]),gt={name:"Quiz",components:{"images-collect":Ee,selects:We,inputs:st,forms:ut,thank:ht},props:{title:{type:String,default:"Подберите идеальное решение"},description:{type:String,default:"Ответьте на несколько вопросов, и мы предложим оптимальный вариант"}},setup(){const o=b(!0),t=b(null),r=b(null),e=b([]),m=b(1),c=b([]),s=b(!1),a=b({}),g=b(!1),x=b(!1),y=async()=>{try{const i=await fetch("/api/public/quiz-block/settings");if(!i.ok)throw new Error("Ошибка загрузки настроек");const l=await i.json();l.data?(s.value=l.data.is_active===!0,l.data.quiz_id?await j(l.data.quiz_id):o.value=!1):o.value=!1}catch(i){console.error("Ошибка загрузки настроек блока квиза:",i),o.value=!1}},j=async i=>{o.value=!0,t.value=null;try{const l=await fetch(`/api/public/quiz-block/quiz/${i}`);if(!l.ok)throw new Error("Ошибка загрузки квиза");const f=await l.json();f.data&&(r.value={id:f.data.id,title:f.data.title,description:f.data.description},e.value=(f.data.questions||[]).filter(p=>p.is_active!==!1).sort((p,_)=>(p.order||0)-(_.order||0)).map((p,_)=>({...p,displayId:_+1})),e.value.length>0&&(m.value=e.value[0].displayId,c.value=[]))}catch(l){t.value=l.message||"Ошибка загрузки квиза",console.error("Ошибка загрузки квиза:",l)}finally{o.value=!1}},k=i=>{const l={id:i.displayId||i.id||i.order,question:i.question_text||"",type:i.question_type,...i.question_data||{}};return(i.question_type==="images-collect"||i.question_type==="selects")&&i.question_data?.selects&&(l.selects=i.question_data.selects.map((f,p)=>({id:f.id||p+1,name:f.name||"",src:f.src||"",title:f.title||f.name||"",child:f.child||null}))),i.question_type==="inputs"&&i.question_data&&(l.label=i.question_data.label||"",l.placeholder=i.question_data.placeholder||"",l.child=i.question_data.child||null,l.answer=""),i.question_type==="forms"&&i.question_data&&(l.form=i.question_data.form||{name:"",email:"",phone:"",check:!1},l.child=i.question_data.child||null,l.question=i.question_text||i.question_data.question||""),l},B=N(()=>e.value.find(i=>i.displayId===m.value)),S=i=>{const l=m.value;if(l&&!c.value.includes(l)&&c.value.push(l),i){const f=e.value.findIndex(p=>p.displayId===m.value);i>0&&i<=e.value.length?m.value=i:f<e.value.length-1&&(m.value=e.value[f+1].displayId)}else{const f=e.value.findIndex(p=>p.displayId===m.value);f<e.value.length-1&&(m.value=e.value[f+1].displayId)}},L=()=>{const i=e.value.findIndex(l=>l.displayId===m.value);if(i>0){const l=e.value[i-1];if(l){const f=c.value.lastIndexOf(m.value);f!==-1&&(c.value=c.value.slice(0,f)),m.value=l.displayId}}},P=i=>{const l=e.value.find(f=>f.displayId===m.value);l&&(a.value[l.id]={question_id:l.id,question_text:l.question_text,question_type:l.question_type,answer:i})},A=async i=>{if(!(x.value||g.value)){x.value=!0;try{const l=e.value.filter(w=>a.value[w.id]).map(w=>a.value[w.id].answer),f=await fetch("/api/public/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({quiz_id:r.value.id,answers:l,contact:i})});let p="",_=null;try{if(p=await f.text(),p)try{_=JSON.parse(p)}catch(w){throw console.error("Ошибка парсинга JSON:",w,"Response text:",p.substring(0,200)),new Error("Сервер вернул некорректный ответ. Пожалуйста, попробуйте еще раз.")}}catch(w){throw console.error("Ошибка чтения ответа:",w),new Error("Ошибка получения ответа от сервера")}if(!f.ok){const w=_&&_.message||_&&_.error||`Ошибка сервера: ${f.status} ${f.statusText}`;throw new Error(w)}if(!_)throw console.error("Сервер вернул пустой ответ. Response text:",p.substring(0,200)),new Error("Сервер вернул пустой ответ");if(typeof _!="object")throw console.error("Сервер вернул некорректный тип данных:",typeof _,_),new Error("Сервер вернул некорректный ответ");if(_.success===!0)return g.value=!0,{success:!0,message:_.message||"Спасибо за прохождение квиза!"};{const w=_.message||_.error||"Ошибка отправки результатов квиза";throw new Error(w)}}catch(l){return console.error("Ошибка отправки результатов квиза:",l),{success:!1,message:l.message||"Ошибка отправки результатов квиза. Пожалуйста, попробуйте еще раз."}}finally{x.value=!1}}},R=async i=>{const l=await A(i);l.success?S():alert(l.message||"Произошла ошибка при отправке результатов. Пожалуйста, попробуйте еще раз.")};return V(()=>{y()}),{loading:o,error:t,quizData:r,questions:e,currentQuestionNumber:m,currentQuestion:B,isActive:s,isCompleted:g,isSubmitting:x,formatQuestionData:k,goToNext:S,goToPrevious:L,handleAnswer:P,handleSubmit:R,submitQuiz:A,questionHistory:c}}},bt={key:0,class:"w-full px-3 sm:px-4 md:px-5 mt-8 sm:mt-12 mb-8 sm:mb-12"},pt={class:"w-full max-w-[1200px] mx-auto"},_t={class:"flex flex-col items-center mb-6 sm:mb-8"},vt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900 text-center mb-3"},yt={key:0,class:"text-gray-600 text-center text-base sm:text-lg"},wt={key:0,class:"flex justify-center items-center py-12"},kt={key:1,class:"flex justify-center items-center py-12"},Ct={class:"text-red-500"},qt={key:0,class:"mb-4"};function $t(o,t,r,e,m,c){return e.isActive?(d(),u("div",bt,[n("div",pt,[n("div",_t,[n("h2",vt,h(e.quizData?.title||r.title),1),e.quizData?.description||r.description?(d(),u("p",yt,h(e.quizData?.description||r.description),1)):v("",!0)]),e.loading?(d(),u("div",wt,[...t[1]||(t[1]=[n("div",{class:"text-gray-500"},"Загрузка квиза...",-1)])])):e.error?(d(),u("div",kt,[n("div",Ct,h(e.error),1)])):e.currentQuestion?(d(),E(H,{key:2,name:"quiz-fade",mode:"out-in"},{default:F(()=>[n("div",null,[e.questionHistory.length>0||e.currentQuestionNumber>1?(d(),u("div",qt,[n("button",{onClick:t[0]||(t[0]=(...s)=>e.goToPrevious&&e.goToPrevious(...s)),class:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm sm:text-base"},[...t[2]||(t[2]=[n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),U(" Назад ",-1)])])])):v("",!0),(d(),E(O(e.currentQuestion.question_type),{key:e.currentQuestion.id,data:e.formatQuestionData(e.currentQuestion),"number-question":e.currentQuestion.id,onNext:e.goToNext,onAnswer:e.handleAnswer,onSubmit:e.handleSubmit},null,40,["data","number-question","onNext","onAnswer","onSubmit"]))])]),_:1})):v("",!0)])])):v("",!0)}const St=C(gt,[["render",$t],["__scopeId","data-v-0991a741"]]),zt={name:"WhyChooseUs",setup(){const o=b(null),t=b(!0),r=async()=>{try{const s=await fetch("/api/public/why-choose-us-block/settings");if(s.ok){const a=await s.json();a.data&&(o.value=a.data)}}catch(s){console.error("Error fetching WhyChooseUs block settings:",s)}finally{t.value=!1}},e=(s,a)=>{const g=[3,6,3,6,6,12],x=s.col||g[a]||3;return{3:"w-full md:w-1/4",6:"w-full md:w-1/2",12:"w-full"}[x]||"w-full md:w-1/4"},m=(s,a)=>{const g=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(s.bg||g[a]||"card-blue")==="card-green"?"bg-[#688E67]":"bg-[#F4F6FC]"},c=(s,a)=>{const g=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(s.bg||g[a]||"card-blue")==="card-green"?"text-white":"text-black"};return V(()=>{r()}),{settings:o,loading:t,getCardColumnClass:e,getCardBgClass:m,getCardTextClass:c}}},jt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},It={class:"w-full max-w-[1200px] mx-auto"},Nt={key:0,class:"flex justify-center mb-6 md:mb-8"},Tt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Dt={key:1,class:"flex flex-wrap -mx-3"},Qt={key:0,class:"absolute bottom-[5px] right-[5px]"},Et=["src","alt"],Ft=["innerHTML"];function Vt(o,t,r,e,m,c){return e.settings&&e.settings.is_active?(d(),u("section",jt,[n("div",It,[e.settings.title?(d(),u("div",Nt,[n("h2",Tt,h(e.settings.title),1)])):v("",!0),e.settings.items&&e.settings.items.length>0?(d(),u("div",Dt,[(d(!0),u(z,null,T(e.settings.items,(s,a)=>(d(),u("div",{key:a,class:D([e.getCardColumnClass(s,a),"px-3 mb-3"])},[n("div",{class:D(["relative rounded-2xl h-[140px] overflow-hidden",e.getCardBgClass(s,a)])},[s.icon&&(s.icon.url||s.icon.disk&&s.icon.name)?(d(),u("div",Qt,[n("img",{src:s.icon.url||`/${s.icon.disk}/${s.icon.name}`,alt:s.text,class:"h-auto max-h-[120px] object-contain",loading:"lazy"},null,8,Et)])):v("",!0),s.text?(d(),u("div",{key:1,class:D(["card-title absolute left-5 top-5 text-base sm:text-lg font-medium leading-[22px]",e.getCardTextClass(s,a)]),innerHTML:s.text},null,10,Ft)):v("",!0)],2)],2))),128))])):v("",!0)])])):v("",!0)}const Bt=C(zt,[["render",Vt],["__scopeId","data-v-90ed1ee0"]]),Mt={name:"Home",components:{HeroBanner:ce,HowWork:Z,Decisions:we,Quiz:St,Faq:Y,WhyChooseUs:Bt,FeedbackForm:te}},Ht={class:"home-page"};function At(o,t,r,e,m,c){const s=$("HeroBanner"),a=$("Decisions"),g=$("Quiz"),x=$("HowWork"),y=$("Faq"),j=$("WhyChooseUs"),k=$("FeedbackForm");return d(),u("div",Ht,[q(s),q(a),q(g),q(x),q(y),q(j),q(k,{title:"Остались вопросы?",description:"Напишите нам, и мы с удовольствием ответим на все ваши вопросы"})])}const Rt=C(Mt,[["render",At]]);export{Rt as default};
