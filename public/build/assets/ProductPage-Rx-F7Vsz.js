import{_ as T,h as p,z as j,c as m,b as n,F as U,k as D,A as re,o as l,B as N,t as M,p as ne,l as A,v as B,e as P,d as x,a as ee,w as V,s as be,g as ye,i as C,j as _e,C as Ce,r as L,D as ke,u as Se,f as te}from"./app-ByHzXY6e.js";import{S as Ee}from"./SEOHead-BbS6hLom.js";import{u as Pe}from"./usePreloader-CiHcCAv0.js";import{D as Me}from"./DecisionCard-Bu9uvU4Y.js";import{P as Ie}from"./ProductCard-BKs1bBMM.js";import{L as je}from"./LazyImage-HmYzCRVB.js";import{u as Le,P as Oe}from"./useDebounce-l5mBoO3K.js";const O="product_cache_",oe=300*1e3;function Te(){const g=u=>{try{const a=`${O}${u}`,s=localStorage.getItem(a);if(!s)return null;const{data:o,timestamp:f}=JSON.parse(s);return Date.now()-f>oe?(localStorage.removeItem(a),null):o}catch(a){return console.error("Error reading from cache:",a),null}},t=(u,a)=>{try{const s=`${O}${u}`,o={data:a,timestamp:Date.now()};localStorage.setItem(s,JSON.stringify(o))}catch(s){console.error("Error writing to cache:",s),d()}},d=()=>{try{Object.keys(localStorage).forEach(a=>{if(a.startsWith(O))try{const s=JSON.parse(localStorage.getItem(a));Date.now()-s.timestamp>oe&&localStorage.removeItem(a)}catch{localStorage.removeItem(a)}})}catch(u){console.error("Error clearing old cache:",u)}};return{getCachedProduct:g,setCachedProduct:t,clearProductCache:u=>{try{const a=`${O}${u}`;localStorage.removeItem(a)}catch(a){console.error("Error clearing product cache:",a)}},clearOldCache:d}}const Fe={name:"OptionsStage",props:{product:{type:Object,required:!0}},emits:["update-services"],setup(g,{emit:t}){const d=p([]),e=()=>{g.product?.services&&Array.isArray(g.product.services)&&(d.value=g.product.services.map(a=>({id:a.id,name:a.name||"",slug:a.slug||"",active:!0})),t("update-services",d.value))};e();const u=a=>{a.active=!a.active,re(()=>{t("update-services",d.value)})};return j(()=>g.product?.services?.length,(a,s)=>{(a!==s||a&&a!==d.value.length)&&e()}),j(()=>g.product?.id,()=>{e()}),{services:d,toggleService:u}}},He={class:"w-full max-w-4xl mx-auto"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},Be=["onClick"],Ve={class:"text-sm md:text-base font-normal flex-1"},Ue={class:"ml-4 flex-shrink-0"},De=["checked","onChange"];function Ne(g,t,d,e,u,a){return l(),m("div",He,[n("div",Ae,[(l(!0),m(U,null,D(e.services,s=>(l(),m("div",{key:s.id,class:N(["flex items-center justify-between p-3 md:p-4 rounded-lg border transition-all cursor-pointer",s.active?"bg-[#688E67] border-[#688E67] text-white":"bg-white border-[#688E67] text-foreground hover:bg-muted/5"]),onClick:o=>e.toggleService(s)},[n("div",Ve,M(s.name),1),n("div",Ue,[n("input",{type:"checkbox",checked:s.active,onChange:o=>e.toggleService(s),onClick:t[0]||(t[0]=ne(()=>{},["stop"])),class:N(["w-6 h-6 rounded border-2 border-white cursor-pointer",s.active?"bg-white":"bg-transparent"])},null,42,De)])],10,Be))),128))])])}const ze=T(Fe,[["render",Ne],["__scopeId","data-v-36995037"]]),We={name:"FormsStage",props:{product:{type:Object,required:!0}},emits:["update-form"],setup(g,{emit:t}){const d=p({name:"",phone:"",comment:""}),{debounced:e}=Le(()=>{t("update-form",{...d.value})},300),u=()=>{e()},a=s=>{let o=s.replace(/\D/g,"");if(o.length>11&&(o=o.slice(0,11)),o.length>0&&!o.startsWith("7")&&(o.startsWith("8")?o="7"+o.slice(1):o="7"+o),o.length<=1)return o.length===0?"":"+7";let f="+7";const v=o.slice(1);return v.length>0&&(f+=" ("+v.slice(0,3),v.length>3&&(f+=") "+v.slice(3,6),v.length>6&&(f+="-"+v.slice(6,8),v.length>8&&(f+="-"+v.slice(8,10))))),f};return j(()=>d.value.phone,(s,o)=>{const f=a(s);f!==s&&(d.value.phone=f),u()}),j(()=>d.value.name,()=>{u()}),j(()=>d.value.comment,()=>{u()}),{form:d,updateForm:u}}},Ze={class:"w-full max-w-2xl mx-auto"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},qe={class:"md:col-span-2"};function Ge(g,t,d,e,u,a){return l(),m("div",Ze,[n("div",Re,[n("div",null,[t[6]||(t[6]=n("label",{for:"name",class:"block text-sm font-medium text-foreground mb-2"}," Как к Вам обращаться * ",-1)),A(n("input",{id:"name",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>e.form.name=s),onInput:t[1]||(t[1]=(...s)=>e.updateForm&&e.updateForm(...s)),placeholder:"Ваше имя",class:"w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent",required:""},null,544),[[B,e.form.name]])]),n("div",null,[t[7]||(t[7]=n("label",{for:"phone",class:"block text-sm font-medium text-foreground mb-2"}," Ваш номер телефона * ",-1)),A(n("input",{id:"phone",type:"tel","onUpdate:modelValue":t[2]||(t[2]=s=>e.form.phone=s),onInput:t[3]||(t[3]=(...s)=>e.updateForm&&e.updateForm(...s)),placeholder:"+7 (___) ___-__-__",class:"w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent",required:""},null,544),[[B,e.form.phone]])]),n("div",qe,[t[8]||(t[8]=n("label",{for:"comment",class:"block text-sm font-medium text-foreground mb-2"}," Комментарий (необязательно) ",-1)),A(n("textarea",{id:"comment","onUpdate:modelValue":t[4]||(t[4]=s=>e.form.comment=s),onInput:t[5]||(t[5]=(...s)=>e.updateForm&&e.updateForm(...s)),placeholder:"Введите комментарий или пометку",rows:"4",class:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent resize-none"},null,544),[[B,e.form.comment]])])])])}const Je=T(We,[["render",Ge]]),Ke={name:"SuccessStage",props:{product:{type:Object,required:!0}}},Ye={class:"w-full max-w-md mx-auto text-center"};function Xe(g,t,d,e,u,a){return l(),m("div",Ye,[...t[0]||(t[0]=[n("div",{class:"flex justify-center mb-6"},[n("svg",{width:"116",height:"90",viewBox:"0 0 116 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M5.30078 42.0864L42.8008 79.0864L110.301 5.08636",stroke:"#688E67","stroke-width":"15.095","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),n("h2",{class:"text-xl md:text-2xl font-semibold text-foreground"}," Спасибо за Ваше обращение, в ближайшее время мы свяжемся с Вами ",-1)])])}const Qe=T(Ke,[["render",Xe]]),$e={name:"ProductPage",components:{SEOHead:Ee,DecisionCard:Me,ProductCard:Ie,LazyImage:je,ProductSkeleton:Oe,OptionsStage:ze,FormsStage:Je,SuccessStage:Qe},setup(){const g=ke(),t=Se(),{getCachedProduct:d,setCachedProduct:e}=Te(),{hidePreloader:u}=Pe(),a=p(!1),s=p(null),o=p(null),f=p([]),v=p([]),S=p(!1),c=p("options"),E=p([]),k=p({name:"",phone:"",comment:""}),z=p(window.innerWidth),se=p(!1),W=p(null),F=p(null),I=p(null),ae=C(()=>({options:"OptionsStage",forms:"FormsStage",success:"SuccessStage"})[c.value]||"OptionsStage"),Z=C(()=>o.value?.services?E.value.filter(r=>r.active).length:0),ie=C(()=>{const r=Z.value;return r===0||r>=20?`${r} услуг`:r===1?`${r} услуга`:r>=2&&r<=4?`${r} услуги`:`${r} услуг`}),le=C(()=>c.value==="options"?Z.value>0:c.value==="forms"?k.value.name.trim()!==""&&k.value.phone.trim()!=="":!1),R=()=>{z.value=window.innerWidth},ce=r=>{E.value=r},de=r=>{k.value={...k.value,...r}},ue=async()=>{c.value==="options"?(c.value="forms",await re(),await q()):c.value==="forms"&&await fe()},q=()=>new Promise(r=>{if(!F.value){r();return}setTimeout(()=>{const i=F.value;if(!i){r();return}const _=i.getBoundingClientRect().top+window.pageYOffset-100;me(Math.max(0,_),600).then(r)},150)}),me=(r,i)=>new Promise(w=>{const h=window.pageYOffset,y=r-h;let _=null;const b=Q=>{_===null&&(_=Q);const $=Q-_,we=Math.min($/i,1),xe=.5-Math.cos(we*Math.PI)/2;window.scrollTo(0,h+y*xe),$<i?requestAnimationFrame(b):w()};requestAnimationFrame(b)}),fe=async()=>{a.value=!0;try{const r=await fetch("/api/public/leave-products",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({product_id:o.value.id,name:k.value.name,phone:k.value.phone,comment:k.value.comment||"",services:E.value.filter(i=>i.active).map(i=>({id:i.id,active:i.active}))})});if(r.ok)c.value="success";else{const i=await r.json().catch(()=>({}));s.value=i.message||"Ошибка при отправке заявки"}}catch(r){s.value="Ошибка при отправке заявки",console.error("Error submitting form:",r)}finally{a.value=!1}},G=async()=>{a.value=!0,s.value=null,I.value&&I.value.abort(),I.value=new AbortController;try{const r=g.params.slug,i=d(r);if(i){o.value=i,o.value.services&&Array.isArray(o.value.services)&&(E.value=o.value.services.map(b=>({id:b.id||b,name:b.name||"",active:!0}))),a.value=!1,J(),K(),Y();return}const w=`/api/public/products/${encodeURIComponent(r)}`,h=await fetch(w,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:I.value.signal}),y=h.headers.get("content-type");if(!y||!y.includes("application/json")){const b=await h.text();throw new Error(`Ошибка: сервер вернул не JSON ответ (статус: ${h.status})`)}const _=await h.json();if(!h.ok)throw new Error(_.message||`Ошибка ${h.status}: Продукт не найден`);if(_.data)o.value=_.data,e(r,_.data),o.value.services&&Array.isArray(o.value.services)&&(E.value=o.value.services.map(b=>({id:b.id||b,name:b.name||"",active:!0}))),Promise.all([J(),K(),Y()]);else throw new Error("Продукт не найден")}catch(r){if(r.name==="AbortError")return;console.error("Error fetching product:",r),r instanceof SyntaxError&&r.message.includes("JSON")?s.value="Ошибка: сервер вернул некорректный ответ.":s.value=r.message||"Ошибка загрузки продукта"}finally{a.value=!1,u()}},J=async()=>{if(!S.value){S.value=!0;try{const r=await t.dispatch("fetchPublicProducts",{minimal:!1});f.value=(r||[]).filter(i=>i.id!==o.value?.id).slice(0,8)}catch(r){console.error("Error fetching products list:",r)}finally{S.value=!1}}},K=async()=>{if(!S.value)try{const r=await t.dispatch("fetchPublicServices",{minimal:!0});v.value=(r||[]).slice(0,8)}catch(r){console.error("Error fetching services:",r)}},Y=async()=>{try{const r=await fetch("/api/public/modal-settings/products",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(r.ok){const i=await r.json();i.data&&i.data.is_active&&(W.value=i.data)}}catch(r){console.error("Error fetching modal settings:",r)}};j(()=>g.params.slug,(r,i)=>{r!==i&&(o.value=null,f.value=[],v.value=[],c.value="options",E.value=[],k.value={name:"",phone:"",comment:""},G())}),_e(()=>{window.addEventListener("resize",R),G()}),Ce(()=>{window.removeEventListener("resize",R),I.value&&I.value.abort()});const pe=C(()=>o.value?o.value.seo_title?o.value.seo_title:`${o.value.name} - МНКА | Продукты и услуги`:"Продукт - МНКА"),X=C(()=>{if(!o.value)return"Подробная информация о продукте. Профессиональные услуги по работе с земельными участками.";if(o.value.seo_description)return o.value.seo_description;const r=o.value.description,i=typeof r=="string"?r:r?.ru||"";return i&&i.length>50?i:`${o.value.name} - профессиональные услуги по подбору и оформлению земельных участков. Полная информация о продукте, условиях и преимуществах.`}),ge=C(()=>o.value?o.value.seo_keywords?o.value.seo_keywords:`${o.value.name}, продукт, услуги, земельные участки, недвижимость, МНКА`:"продукт, услуги, земельные участки"),ve=C(()=>o.value?.image?.url?o.value.image.url:""),H=C(()=>o.value?window.location.origin+"/products/"+(o.value.slug||""):""),he=C(()=>{if(!o.value)return null;const r={"@context":"https://schema.org","@type":"Product",name:o.value.name,description:X.value,url:H.value};o.value.image?.url&&(r.image=window.location.origin+o.value.image.url),o.value.services&&o.value.services.length>0&&(r.offers={"@type":"AggregateOffer",priceCurrency:"RUB",availability:"https://schema.org/InStock",offerCount:o.value.services.length});const i={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Главная",item:window.location.origin},{"@type":"ListItem",position:2,name:"Продукты",item:window.location.origin+"/products"},{"@type":"ListItem",position:3,name:o.value.name,item:H.value}]};return[r,i]});return{loading:a,error:s,product:o,productsList:f,servicesList:v,stage:c,selectedServices:E,formData:k,windowWidth:z,showInfoModal:se,modalSettings:W,currentStageComponent:ae,formattedCount:ie,handleShare:async()=>{const r=window.location.href,i=o.value?.name||"Продукт",w=o.value?.description;let h="";if(w&&(typeof w=="string"?h=w:typeof w=="object"&&w!==null&&(h=w.ru||w.short||w.full||"")),navigator.share)try{await navigator.share({title:i,text:h||"",url:r})}catch(y){y.name!=="AbortError"&&console.error("Error sharing:",y)}else try{await navigator.clipboard.writeText(r),alert("Ссылка скопирована в буфер обмена")}catch(y){console.error("Failed to copy:",y)}},canProceed:le,handleServicesUpdate:ce,handleFormUpdate:de,handleNextStage:ue,formContainer:F,scrollToForm:q,loadingLists:S,productTitle:pe,productDescription:X,productKeywords:ge,productImage:ve,canonicalUrl:H,productSchema:he}}},et={class:"product-page min-h-screen bg-background"},tt={class:"w-full px-3 sm:px-4 md:px-5"},ot={class:"w-full max-w-[1200px] mx-auto"},rt={key:1,class:"py-12"},nt={class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},st={class:"text-destructive"},at={key:2},it={class:"hidden md:block mt-4"},lt={class:"flex items-center gap-2 text-sm text-muted-foreground"},ct={class:"text-foreground"},dt={class:"mt-6 md:mt-8 grid md:grid-cols-2 gap-6 md:gap-8 items-center"},ut={class:"text-2xl md:text-3xl font-semibold text-foreground mb-3 md:text-left text-center"},mt=["innerHTML"],ft={class:"relative"},pt=["innerHTML"],gt={class:"mt-8 py-5 relative"},vt={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ht={class:"text-center w-full mt-4 flex items-center justify-center gap-3"},wt={class:"text-sm md:text-base text-muted-foreground"},xt={class:"mt-6 mb-8 flex justify-center"},bt=["disabled"],yt={key:1,class:"mt-12 pb-12"},_t={key:0},Ct={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-5"},kt={key:1,class:"mt-12"},St={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-5"},Et={class:"bg-background rounded-lg p-6 max-w-md w-full"},Pt={class:"text-lg font-semibold mb-4"},Mt=["innerHTML"];function It(g,t,d,e,u,a){const s=L("SEOHead"),o=L("ProductSkeleton"),f=L("router-link"),v=L("LazyImage"),S=L("ProductCard");return l(),m("div",et,[e.product?(l(),P(s,{key:0,title:e.productTitle,description:e.productDescription,keywords:e.productKeywords,"og-image":e.productImage,canonical:e.canonicalUrl,schema:e.productSchema},null,8,["title","description","keywords","og-image","canonical","schema"])):x("",!0),n("div",tt,[n("div",ot,[e.loading&&!e.product?(l(),P(o,{key:0})):x("",!0),e.error&&!e.loading?(l(),m("div",rt,[n("div",nt,[n("p",st,M(e.error),1)])])):x("",!0),e.product&&!e.loading?(l(),m("div",at,[n("div",it,[n("nav",lt,[ee(f,{to:"/",class:"hover:text-foreground transition-colors"},{default:V(()=>[...t[6]||(t[6]=[te("Главная",-1)])]),_:1}),t[8]||(t[8]=n("span",null,"/",-1)),ee(f,{to:"/products",class:"hover:text-foreground transition-colors"},{default:V(()=>[...t[7]||(t[7]=[te("Продукты",-1)])]),_:1}),t[9]||(t[9]=n("span",null,"/",-1)),n("span",ct,M(e.product.name),1)])]),n("div",dt,[n("div",null,[n("h1",ut,M(e.product.name),1),e.product.description?(l(),m("div",{key:0,class:"text-base md:text-lg text-muted-foreground leading-relaxed md:text-left text-center",innerHTML:typeof e.product.description=="string"?e.product.description:e.product.description?.ru||""},null,8,mt)):x("",!0)]),n("div",ft,[e.product.image?(l(),P(v,{key:0,src:e.product.image.url,alt:e.product.name,"image-class":"w-full h-auto rounded-lg shadow-md","container-class":"relative w-full",eager:!0},null,8,["src","alt"])):x("",!0),n("div",{onClick:t[0]||(t[0]=(...c)=>e.handleShare&&e.handleShare(...c)),class:"absolute top-4 right-4 cursor-pointer hidden md:block hover:opacity-80 transition-opacity",title:"Поделиться"},[...t[10]||(t[10]=[be('<svg width="44" height="48" viewBox="0 0 44 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M35.3327 15.2C39.0145 15.2 41.9993 12.2451 41.9993 8.60002C41.9993 4.95493 39.0145 2 35.3327 2C31.6508 2 28.666 4.95493 28.666 8.60002C28.666 12.2451 31.6508 15.2 35.3327 15.2Z" stroke="#688E67" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.66664 30.5998C12.3485 30.5998 15.3333 27.6449 15.3333 23.9998C15.3333 20.3547 12.3485 17.3997 8.66664 17.3997C4.98476 17.3997 2 20.3547 2 23.9998C2 27.6449 4.98476 30.5998 8.66664 30.5998Z" stroke="#688E67" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M35.3327 46C39.0145 46 41.9993 43.0451 41.9993 39.4C41.9993 35.7549 39.0145 32.8 35.3327 32.8C31.6508 32.8 28.666 35.7549 28.666 39.4C28.666 43.0451 31.6508 46 35.3327 46Z" stroke="#688E67" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><g filter="url(#filter0_d_743_2384)"><path d="M14.2227 27.3001L29.7782 36.1002M29.7782 11.9001L14.2227 20.7001" stroke="#688E67" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" shape-rendering="crispEdges"></path></g><defs><filter id="filter0_d_743_2384" x="8.22266" y="9.89972" width="27.5557" height="36.2008" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_743_2384"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_743_2384" result="shape"></feBlend></filter></defs></svg>',1)])])])]),e.product.html_content?(l(),m("div",{key:0,class:"mt-8 product-html-content",innerHTML:e.product.html_content},null,8,pt)):x("",!0),n("div",gt,[n("div",vt,[t[12]||(t[12]=n("div",{class:"flex flex-col gap-2"},[n("span",{class:"text-sm md:text-base text-foreground"},"Необходимые услуги уже включены:"),n("span",{class:"text-sm md:text-base text-[#688E67]"},"по умолчанию, но можно редактировать")],-1)),e.windowWidth>767?(l(),m("button",{key:0,onClick:t[1]||(t[1]=c=>e.showInfoModal=!0),class:"flex items-center justify-center w-10 h-10 hover:bg-muted/10 rounded-lg transition-colors",type:"button"},[...t[11]||(t[11]=[n("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M0 2.22222V37.7778C0 38.3671 0.234126 38.9324 0.650874 39.3491C1.06762 39.7659 1.63285 40 2.22222 40H37.7778C38.3671 40 38.9324 39.7659 39.3491 39.3491C39.7659 38.9324 40 38.3671 40 37.7778V2.22222C40 1.63285 39.7659 1.06762 39.3491 0.650874C38.9324 0.234126 38.3671 0 37.7778 0H2.22222C1.63285 0 1.06762 0.234126 0.650874 0.650874C0.234126 1.06762 0 1.63285 0 2.22222ZM17.7778 10.8889C17.7778 9.78432 18.6732 8.88889 19.7778 8.88889H20.2222C21.3268 8.88889 22.2222 9.78432 22.2222 10.8889V11.3333C22.2222 12.4379 21.3268 13.3333 20.2222 13.3333H19.7778C18.6732 13.3333 17.7778 12.4379 17.7778 11.3333V10.8889ZM17.7778 19.7778C17.7778 18.6732 18.6732 17.7778 19.7778 17.7778H20.2222C21.3268 17.7778 22.2222 18.6732 22.2222 19.7778V29.1111C22.2222 30.2157 21.3268 31.1111 20.2222 31.1111H19.7778C18.6732 31.1111 17.7778 30.2157 17.7778 29.1111V19.7778Z",fill:"#688E67"})],-1)])])):x("",!0)]),n("div",{id:"product-form-container",ref:"formContainer",class:N(["mt-8",e.windowWidth>767?"px-5":""])},[(l(),P(ye(e.currentStageComponent),{product:e.product,onUpdateServices:e.handleServicesUpdate,onUpdateForm:e.handleFormUpdate},null,40,["product","onUpdateServices","onUpdateForm"]))],2),n("div",ht,[n("span",wt," Выбрано "+M(e.formattedCount),1),e.windowWidth<=767?(l(),m("button",{key:0,onClick:t[2]||(t[2]=c=>e.showInfoModal=!0),class:"flex items-center justify-center",type:"button"},[...t[13]||(t[13]=[n("svg",{width:"24",height:"24",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M0 2.22222V37.7778C0 38.3671 0.234126 38.9324 0.650874 39.3491C1.06762 39.7659 1.63285 40 2.22222 40H37.7778C38.3671 40 38.9324 39.7659 39.3491 39.3491C39.7659 38.9324 40 38.3671 40 37.7778V2.22222C40 1.63285 39.7659 1.06762 39.3491 0.650874C38.9324 0.234126 38.3671 0 37.7778 0H2.22222C1.63285 0 1.06762 0.234126 0.650874 0.650874C0.234126 1.06762 0 1.63285 0 2.22222ZM17.7778 10.8889C17.7778 9.78432 18.6732 8.88889 19.7778 8.88889H20.2222C21.3268 8.88889 22.2222 9.78432 22.2222 10.8889V11.3333C22.2222 12.4379 21.3268 13.3333 20.2222 13.3333H19.7778C18.6732 13.3333 17.7778 12.4379 17.7778 11.3333V10.8889ZM17.7778 19.7778C17.7778 18.6732 18.6732 17.7778 19.7778 17.7778H20.2222C21.3268 17.7778 22.2222 18.6732 22.2222 19.7778V29.1111C22.2222 30.2157 21.3268 31.1111 20.2222 31.1111H19.7778C18.6732 31.1111 17.7778 30.2157 17.7778 29.1111V19.7778Z",fill:"#688E67"})],-1)])])):x("",!0)]),n("div",xt,[e.stage!=="success"?(l(),m("button",{key:0,onClick:t[3]||(t[3]=(...c)=>e.handleNextStage&&e.handleNextStage(...c)),disabled:!e.canProceed,class:"w-full md:w-auto md:px-8 h-12 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},M(e.stage==="options"?"Получить услугу":"Отправить заявку"),9,bt)):(l(),P(f,{key:1,to:"/products",class:"inline-flex items-center justify-center w-full md:w-auto md:px-8 h-12 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium"},{default:V(()=>[...t[14]||(t[14]=[n("span",{class:"text-center"},"Смотреть другие услуги",-1)])]),_:1}))])]),e.productsList.length>0||e.servicesList.length>0?(l(),m("div",yt,[e.productsList.length>0?(l(),m("div",_t,[t[15]||(t[15]=n("h2",{class:"text-2xl md:text-3xl font-semibold text-foreground mb-6"},"Продуктовые направления",-1)),n("div",Ct,[(l(!0),m(U,null,D(e.productsList,c=>(l(),P(S,{key:`product-${c.id}`,decision:c,slug:"products",class:"h-full"},null,8,["decision"]))),128))])])):x("",!0),e.servicesList.length>0?(l(),m("div",kt,[t[16]||(t[16]=n("h2",{class:"text-2xl md:text-3xl font-semibold text-foreground mb-6"},"Все услуги",-1)),n("div",St,[(l(!0),m(U,null,D(e.servicesList,c=>(l(),P(S,{key:`service-${c.id}`,decision:c,slug:"services",class:"h-full"},null,8,["decision"]))),128))])])):x("",!0)])):x("",!0)])):x("",!0)])]),e.showInfoModal&&e.modalSettings?(l(),m("div",{key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[5]||(t[5]=ne(c=>e.showInfoModal=!1,["self"]))},[n("div",Et,[n("h3",Pt,M(e.modalSettings.title||"Информация"),1),n("p",{class:"text-muted-foreground mb-4",innerHTML:e.modalSettings.content||"Здесь будет информация о продукте и услугах."},null,8,Mt),n("button",{onClick:t[4]||(t[4]=c=>e.showInfoModal=!1),class:"w-full h-10 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors"}," Закрыть ")])])):x("",!0)])}const Vt=T($e,[["render",It]]);export{Vt as default};
