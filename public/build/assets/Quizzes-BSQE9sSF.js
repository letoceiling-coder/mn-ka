import{_,c as n,b as e,d as l,a as x,w as p,t as a,F as v,k as b,h as m,j as h,r as w,o as i,f as y}from"./app-D8FlZlXN.js";import{a as z,d as k}from"./api-V9GPpd21.js";import{S as f}from"./sweetalert2.esm.all-C0u8rGqG.js";const B={name:"Quizzes",setup(){const c=m(!1),t=m(null),u=m([]),o=async()=>{c.value=!0,t.value=null;try{const r=await z("/quizzes");if(!r.ok)throw new Error("Ошибка загрузки квизов");const d=await r.json();u.value=d.data||[]}catch(r){t.value=r.message||"Ошибка загрузки квизов",console.error("Error fetching quizzes:",r)}finally{c.value=!1}},g=async r=>{if((await f.fire({title:"Удалить квиз?",text:`Вы уверены, что хотите удалить квиз "${r.title}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Да, удалить",cancelButtonText:"Отмена"})).isConfirmed)try{if(!(await k(`/quizzes/${r.id}`)).ok)throw new Error("Ошибка удаления квиза");await f.fire({title:"Квиз удален",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await o()}catch(s){await f.fire({title:"Ошибка",text:s.message||"Ошибка удаления квиза",icon:"error",confirmButtonText:"ОК"})}};return h(()=>{o()}),{loading:c,error:t,quizzes:u,fetchQuizzes:o,deleteQuiz:g}}},C={class:"quizzes-page space-y-6"},j={class:"flex items-center justify-between"},Q={key:0,class:"flex items-center justify-center py-12"},E={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},N={class:"text-destructive"},T={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},V={class:"divide-y divide-border"},q={class:"flex-1"},S={class:"font-medium text-foreground"},D={class:"text-sm text-muted-foreground mt-1"},F={class:"text-sm text-muted-foreground mt-1"},G={class:"flex items-center gap-2"},L=["onClick"],M={key:3,class:"text-center py-12 bg-card rounded-lg border border-border"};function A(c,t,u,o,g,r){const d=w("router-link");return i(),n("div",C,[e("div",j,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Квизы"),e("p",{class:"text-muted-foreground mt-1"},"Управление квизами")],-1)),x(d,{to:{name:"admin.quizzes.create"},class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"},{default:p(()=>[...t[0]||(t[0]=[e("span",null,"+",-1),e("span",null,"Создать квиз",-1)])]),_:1})]),o.loading?(i(),n("div",Q,[...t[2]||(t[2]=[e("p",{class:"text-muted-foreground"},"Загрузка квизов...",-1)])])):l("",!0),o.error?(i(),n("div",E,[e("p",N,a(o.error),1)])):l("",!0),!o.loading&&o.quizzes.length>0?(i(),n("div",T,[e("div",V,[(i(!0),n(v,null,b(o.quizzes,s=>(i(),n("div",{key:s.id,class:"p-4 hover:bg-muted/10 transition-colors flex items-center justify-between"},[e("div",q,[e("h3",S,a(s.title),1),e("p",D,a(s.description||"Без описания"),1),e("p",F," Порядок: "+a(s.order)+" | Вопросов: "+a(s.questions?.length||0)+" | "+a(s.is_active?"Активен":"Неактивен"),1)]),e("div",G,[x(d,{to:{name:"admin.quizzes.edit",params:{id:s.id}},class:"px-3 py-1.5 text-sm bg-muted hover:bg-muted/80 rounded-lg transition-colors inline-block"},{default:p(()=>[...t[3]||(t[3]=[y(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:H=>o.deleteQuiz(s),class:"px-3 py-1.5 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-lg transition-colors"}," Удалить ",8,L)])]))),128))])])):l("",!0),!o.loading&&o.quizzes.length===0?(i(),n("div",M,[...t[4]||(t[4]=[e("p",{class:"text-muted-foreground"},"Квизы не найдены. Создайте первый квиз!",-1)])])):l("",!0)])}const O=_(B,[["render",A]]);export{O as default};
