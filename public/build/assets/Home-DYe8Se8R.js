import{_ as S,r as N,c as f,o as c,d as k,a as V,n as O,b as s,e as z,t as b,w as B,f as P,g as A,h as p,i as q,j as D,T as L,F as I,k as T,u as W,l as F,v as Q,m as K,p as R,q as J,s as G,x as X,y as Y}from"./app-BUNENOjV.js";import{S as Z}from"./SEOHead-Bi5gAwNo.js";import{u as ee}from"./usePreloader-CiHcCAv0.js";import{F as te,W as se,a as oe,H as ne}from"./WhyChooseUs-DUZi7jkp.js";import{D as ae}from"./DecisionCard-PSuiLzb8.js";import{C as ie}from"./CaseCard-AYX-IMx4.js";import{F as re}from"./FeedbackForm-CpIAa1WP.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const le={name:"HeroBanner",components:{FeedbackModal:te},props:{slug:{type:String,default:"home-banner"}},setup(o){const t=p(null),a=p(!0),e=p(!1),d=async()=>{try{const g=await fetch(`/api/public/banners/${o.slug}`);if(g.ok){const _=await g.json();_.data&&(t.value={..._.data,background_image:_.data.background_image?`/${_.data.background_image.replace(/^\//,"")}`:null,height_desktop:_.data.height_desktop||380,height_mobile:_.data.height_mobile||300})}}catch(g){console.error("Error fetching banner:",g)}finally{a.value=!1}},i=()=>{t.value.button_type==="method"&&(!t.value.button_value||t.value.button_value.trim()===""?e.value=!0:console.log("Method button clicked:",t.value.button_value))},n=()=>{e.value=!1},m=q(()=>{if(!t.value)return{};const g=t.value.height_desktop||380,_=t.value.height_mobile||300,w=g-_,E=`(${_}px + ${w} * ((100vw - 320px) / 880))`;return{"--banner-height-mobile":`${_}px`,"--banner-height-desktop":`${g}px`,minHeight:`${_}px`,height:`clamp(${_}px, ${E}, ${g}px)`}});return D(()=>{d()}),{banner:t,loading:a,bannerStyle:m,showFeedbackModal:e,handleButtonClick:i,handleFeedbackSuccess:n}}},de={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},ce={class:"w-full max-w-2xl"},ue={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},me={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},fe={key:1,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},he={key:2,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function ge(o,t,a,e,d,i){const n=N("FeedbackModal");return c(),f("div",de,[e.banner&&e.banner.is_active?(c(),f("section",{key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg overflow-hidden shadow-sm",style:O(e.bannerStyle)},[s("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:O({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",{class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full flex items-center",style:O(e.bannerStyle)},[s("div",ce,[e.banner.heading_1||e.banner.heading_2||e.banner.description?(c(),f("div",ue,[e.banner.heading_1?(c(),f("h1",me,b(e.banner.heading_1),1)):k("",!0),e.banner.heading_2?(c(),f("h2",fe,b(e.banner.heading_2),1)):k("",!0),e.banner.description?(c(),f("p",he,b(e.banner.description),1)):k("",!0)])):k("",!0),e.banner.button_text?(c(),z(A(e.banner.button_type==="method"?"button":"router-link"),{key:1,to:e.banner.button_type==="url"?e.banner.button_value:void 0,onClick:e.handleButtonClick,class:"inline-block bg-[#657C6C] hover:bg-[#55695a] active:bg-[#48554a] text-white font-medium text-base sm:text-lg px-8 sm:px-10 md:px-12 py-3 sm:py-3.5 md:py-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-100 shadow-lg"},{default:B(()=>[P(b(e.banner.button_text),1)]),_:1},8,["to","onClick"])):k("",!0)])],4)],4)):k("",!0),V(n,{"is-open":e.showFeedbackModal,onClose:t[0]||(t[0]=m=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])}const xe=S(le,[["render",ge]]),pe={name:"Decisions",components:{DecisionCard:ae,TransitionGroup:L},setup(){const o=W(),t=p("Выберите решение под ваш участок"),a=p(!0),e=p(null),d=async()=>{try{const m=await fetch("/api/public/decision-block/settings");if(!m.ok)throw new Error("Ошибка загрузки настроек");const g=await m.json();g.data&&g.data.title&&(t.value=g.data.title)}catch(m){console.error("Ошибка загрузки настроек:",m)}},i=p([]),n=async()=>{a.value=!0,e.value=null;try{const g=(await o.dispatch("fetchPublicProducts",{minimal:!1})||[]).map($=>({...$,category:"products"})),w=(await o.dispatch("fetchPublicServices",{minimal:!0})||[]).map($=>({...$,category:"services"}));i.value=[...g,...w]}catch(m){console.error("Ошибка загрузки данных:",m),e.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{a.value=!1}};return D(async()=>{await Promise.all([d(),n()])}),{title:t,allItems:i,loading:a,error:e}}},_e={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},be={class:"w-full max-w-[1200px] mx-auto"},ye={class:"flex justify-center mb-6 sm:mb-8"},ve={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900"},we={key:0,class:"flex justify-center items-center py-12"},ke={key:1,class:"flex justify-center items-center py-12"},Ce={class:"text-red-500"},Se={key:0,class:"relative"},qe={key:1,class:"flex justify-center items-center py-12"};function $e(o,t,a,e,d,i){const n=N("DecisionCard");return c(),f("div",_e,[s("div",be,[s("div",ye,[s("h2",ve,b(e.title),1)]),e.loading?(c(),f("div",we,[...t[0]||(t[0]=[s("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(c(),f("div",ke,[s("div",Ce,b(e.error),1)])):(c(),f(I,{key:2},[e.allItems.length>0?(c(),f("div",Se,[V(L,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:B(()=>[(c(!0),f(I,null,T(e.allItems,(m,g)=>(c(),z(n,{key:`${m.id}-${m.category}`,decision:m,slug:m.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(c(),f("div",qe,[...t[1]||(t[1]=[s("div",{class:"text-gray-500"},"Продукты и услуги не найдены",-1)])]))],64))])])}const je=S(pe,[["render",$e],["__scopeId","data-v-8853eab0"]]),ze={name:"ImagesCollect",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(o){const t={id:o.id||o.name,name:o.name||"",title:o.title||o.name||"",text:o.title||o.name||"",src:o.src||o.webp||""};this.$emit("answer",t),o.child?setTimeout(()=>{this.$emit("next",o.child)},300):setTimeout(()=>{this.$emit("next")},300)},handleImageError(o){o.target.src="/upload/quiz/placeholder.jpg"}}},Ie={class:"mt-6"},Ee={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Fe={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Ne={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},De={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4"},Te=["onClick"],Me={class:"relative aspect-[245/140] sm:aspect-[245/140] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},Qe=["src","alt"],Ve={class:"absolute top-3 left-3 right-3 z-10"},Be={class:"text-white font-medium text-base sm:text-lg md:text-xl drop-shadow-lg"};function He(o,t,a,e,d,i){return c(),f("div",Ie,[s("div",Ee,[s("div",Fe,b(a.data.id),1),s("div",Ne,b(a.data.question),1)]),s("div",De,[(c(!0),f(I,null,T(a.data.selects,n=>(c(),f("div",{key:n.id,class:"relative group cursor-pointer",onClick:m=>i.handleSelect(n)},[s("div",Me,[s("img",{src:n.src||n.webp||"/upload/quiz/placeholder.jpg",alt:n.name||n.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:t[0]||(t[0]=(...m)=>i.handleImageError&&i.handleImageError(...m))},null,40,Qe),t[1]||(t[1]=s("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent pointer-events-none"},null,-1)),s("div",Ve,[s("h3",Be,b(n.title),1)])])],8,Te))),128))])])}const Oe=S(ze,[["render",He]]),Pe={name:"Selects",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(o){const t={id:o.id||o.name,name:o.name||"",title:o.title||o.name||"",text:o.name||o.title||""};this.$emit("answer",t),setTimeout(()=>{this.$emit("next")},300)}}},Ae={class:"mt-6"},Le={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ue={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},We={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Ke={class:"space-y-3 sm:space-y-4 max-w-2xl"},Re=["onClick"];function Je(o,t,a,e,d,i){return c(),f("div",Ae,[s("div",Le,[s("div",Ue,b(a.data.id),1),s("div",We,b(a.data.question),1)]),s("div",Ke,[(c(!0),f(I,null,T(a.data.selects,n=>(c(),f("button",{key:n.id,onClick:m=>i.handleSelect(n),class:"w-full px-6 py-4 text-left bg-white border-2 border-gray-200 rounded-lg hover:border-[#657C6C] hover:bg-gray-50 transition-all duration-200 text-base sm:text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"},b(n.name),9,Re))),128))])])}const Ge=S(Pe,[["render",Je]]),Xe={name:"Inputs",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],setup(o,{emit:t}){const a=p(o.data?.answer||""),e=q(()=>{const i=a.value;return i==null?!1:i.toString().trim()!==""});return{answerValue:a,isAnswerValid:e,handleNext:()=>{const i=a.value?.toString().trim()||"";i&&(o.data&&(o.data.answer=i),t("answer",i),o.data?.child?t("next",o.data.child):t("next"))}}}},Ye={class:"mt-6"},Ze={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},et={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},tt={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},st={class:"max-w-2xl"},ot={class:"block text-sm font-medium text-gray-700 mb-2"},nt={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},at=["placeholder"],it=["disabled"];function rt(o,t,a,e,d,i){return c(),f("div",Ye,[s("div",Ze,[s("div",et,b(a.data.id),1),s("div",tt,b(a.data.question),1)]),s("div",st,[s("label",ot,b(a.data.label),1),s("div",nt,[F(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.answerValue=n),type:"text",placeholder:a.data.placeholder,onKeyup:t[1]||(t[1]=K((...n)=>e.handleNext&&e.handleNext(...n),["enter"])),class:"flex-1 w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors disabled:opacity-50 focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none"},null,40,at),[[Q,e.answerValue]]),s("button",{onClick:t[2]||(t[2]=(...n)=>e.handleNext&&e.handleNext(...n)),disabled:!e.isAnswerValid,class:"px-6 sm:px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Далее ",8,it)])])])}const lt=S(Xe,[["render",rt]]),dt={name:"Forms",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],computed:{isFormValid(){return this.data.form.name&&this.data.form.name.trim()!==""&&this.data.form.email&&this.data.form.email.trim()!==""&&this.data.form.phone&&this.data.form.phone.trim()!==""&&this.data.form.check}},methods:{async handleSubmit(){this.isFormValid&&(this.$emit("answer",this.data.form),this.$emit("submit",{name:this.data.form.name,email:this.data.form.email,phone:this.data.form.phone}))}}},ct={class:"mt-6"},ut={class:"mb-6 px-2"},mt=["innerHTML"],ft={class:"max-w-2xl"},ht={class:"flex items-start"},gt=["disabled"];function xt(o,t,a,e,d,i){return c(),f("div",ct,[s("div",ut,[s("div",{class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900",innerHTML:a.data.question},null,8,mt)]),s("div",ft,[s("form",{onSubmit:t[4]||(t[4]=R((...n)=>i.handleSubmit&&i.handleSubmit(...n),["prevent"])),class:"space-y-4"},[s("div",null,[t[5]||(t[5]=s("label",{for:"quiz-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),F(s("input",{id:"quiz-name","onUpdate:modelValue":t[0]||(t[0]=n=>a.data.form.name=n),type:"text",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"Иван Иванов"},null,512),[[Q,a.data.form.name]])]),s("div",null,[t[6]||(t[6]=s("label",{for:"quiz-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш email ",-1)),F(s("input",{id:"quiz-email","onUpdate:modelValue":t[1]||(t[1]=n=>a.data.form.email=n),type:"email",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"your@email.com"},null,512),[[Q,a.data.form.email]])]),s("div",null,[t[7]||(t[7]=s("label",{for:"quiz-phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш телефон ",-1)),F(s("input",{id:"quiz-phone","onUpdate:modelValue":t[2]||(t[2]=n=>a.data.form.phone=n),type:"tel",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"+7 (999) 123-45-67"},null,512),[[Q,a.data.form.phone]])]),s("div",ht,[F(s("input",{id:"quiz-check","onUpdate:modelValue":t[3]||(t[3]=n=>a.data.form.check=n),type:"checkbox",required:"",class:"mt-1 h-4 w-4 rounded border-gray-300 text-[#657C6C] focus:ring-[#657C6C] focus:ring-2"},null,512),[[J,a.data.form.check]]),t[8]||(t[8]=s("label",{for:"quiz-check",class:"ml-3 text-sm text-gray-600"}," Отправляя данную форму, вы соглашаетесь на обработку персональных данных ",-1))]),s("button",{type:"submit",disabled:!i.isFormValid,class:"w-full sm:w-auto px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Отправить ",8,gt)],32)])])}const pt=S(dt,[["render",xt]]),_t={name:"Thank",props:{data:{type:Object,default:()=>({})},numberQuestion:{type:Number,required:!0}}},bt={class:"mt-6"};function yt(o,t,a,e,d,i){return c(),f("div",bt,[...t[0]||(t[0]=[G('<div class="flex flex-col items-center justify-center py-8 sm:py-12 px-4"><div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-green-100 flex items-center justify-center mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl sm:text-2xl md:text-3xl font-semibold text-gray-900 text-center mb-4"> Спасибо! </h3><p class="text-base sm:text-lg text-gray-600 text-center max-w-md"> Наши специалисты свяжутся с вами в течение 15 минут </p></div>',1)])])}const vt=S(_t,[["render",yt]]),wt={name:"Quiz",components:{"images-collect":Oe,selects:Ge,inputs:lt,forms:pt,thank:vt},props:{title:{type:String,default:"Подберите идеальное решение"},description:{type:String,default:"Ответьте на несколько вопросов, и мы предложим оптимальный вариант"}},setup(){const o=p(!0),t=p(null),a=p(null),e=p([]),d=p(1),i=p([]),n=p(!1),m=p({}),g=p(!1),_=p(!1),w=async()=>{try{const r=await fetch("/api/public/quiz-block/settings");if(!r.ok)throw new Error("Ошибка загрузки настроек");const l=await r.json();l.data?(n.value=l.data.is_active===!0,l.data.quiz_id?await $(l.data.quiz_id):o.value=!1):o.value=!1}catch(r){console.error("Ошибка загрузки настроек блока квиза:",r),o.value=!1}},$=async r=>{o.value=!0,t.value=null;try{const l=await fetch(`/api/public/quiz-block/quiz/${r}`);if(!l.ok)throw new Error("Ошибка загрузки квиза");const h=await l.json();h.data&&(a.value={id:h.data.id,title:h.data.title,description:h.data.description},e.value=(h.data.questions||[]).filter(y=>y.is_active!==!1).sort((y,v)=>(y.order||0)-(v.order||0)).map((y,v)=>({...y,displayId:v+1})),e.value.length>0&&(d.value=e.value[0].displayId,i.value=[]))}catch(l){t.value=l.message||"Ошибка загрузки квиза",console.error("Ошибка загрузки квиза:",l)}finally{o.value=!1}},E=r=>{const l={id:r.displayId||r.id||r.order,question:r.question_text||"",type:r.question_type,...r.question_data||{}};return(r.question_type==="images-collect"||r.question_type==="selects")&&r.question_data?.selects&&(l.selects=r.question_data.selects.map((h,y)=>({id:h.id||y+1,name:h.name||"",src:h.src||"",title:h.title||h.name||"",child:h.child||null}))),r.question_type==="inputs"&&r.question_data&&(l.label=r.question_data.label||"",l.placeholder=r.question_data.placeholder||"",l.child=r.question_data.child||null,l.answer=""),r.question_type==="forms"&&r.question_data&&(l.form=r.question_data.form||{name:"",email:"",phone:"",check:!1},l.child=r.question_data.child||null,l.question=r.question_text||r.question_data.question||""),l},u=q(()=>e.value.find(r=>r.displayId===d.value)),x=r=>{const l=d.value;if(l&&!i.value.includes(l)&&i.value.push(l),r){const h=e.value.findIndex(y=>y.displayId===d.value);r>0&&r<=e.value.length?d.value=r:h<e.value.length-1&&(d.value=e.value[h+1].displayId)}else{const h=e.value.findIndex(y=>y.displayId===d.value);h<e.value.length-1&&(d.value=e.value[h+1].displayId)}},j=()=>{const r=e.value.findIndex(l=>l.displayId===d.value);if(r>0){const l=e.value[r-1];if(l){const h=i.value.lastIndexOf(d.value);h!==-1&&(i.value=i.value.slice(0,h)),d.value=l.displayId}}},H=r=>{const l=e.value.find(h=>h.displayId===d.value);l&&(m.value[l.id]={question_id:l.id,question_text:l.question_text,question_type:l.question_type,answer:r})},M=async r=>{if(!(_.value||g.value)){_.value=!0;try{const l=e.value.filter(C=>m.value[C.id]).map(C=>m.value[C.id].answer),h=await fetch("/api/public/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({quiz_id:a.value.id,answers:l,contact:r})});let y="",v=null;try{if(y=await h.text(),y)try{v=JSON.parse(y)}catch(C){throw console.error("Ошибка парсинга JSON:",C,"Response text:",y.substring(0,200)),new Error("Сервер вернул некорректный ответ. Пожалуйста, попробуйте еще раз.")}}catch(C){throw console.error("Ошибка чтения ответа:",C),new Error("Ошибка получения ответа от сервера")}if(!h.ok){const C=v&&v.message||v&&v.error||`Ошибка сервера: ${h.status} ${h.statusText}`;throw new Error(C)}if(!v)throw console.error("Сервер вернул пустой ответ. Response text:",y.substring(0,200)),new Error("Сервер вернул пустой ответ");if(typeof v!="object")throw console.error("Сервер вернул некорректный тип данных:",typeof v,v),new Error("Сервер вернул некорректный ответ");if(v.success===!0)return g.value=!0,{success:!0,message:v.message||"Спасибо за прохождение квиза!"};{const C=v.message||v.error||"Ошибка отправки результатов квиза";throw new Error(C)}}catch(l){return console.error("Ошибка отправки результатов квиза:",l),{success:!1,message:l.message||"Ошибка отправки результатов квиза. Пожалуйста, попробуйте еще раз."}}finally{_.value=!1}}},U=async r=>{const l=await M(r);l.success?x():alert(l.message||"Произошла ошибка при отправке результатов. Пожалуйста, попробуйте еще раз.")};return D(()=>{w()}),{loading:o,error:t,quizData:a,questions:e,currentQuestionNumber:d,currentQuestion:u,isActive:n,isCompleted:g,isSubmitting:_,formatQuestionData:E,goToNext:x,goToPrevious:j,handleAnswer:H,handleSubmit:U,submitQuiz:M,questionHistory:i}}},kt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},Ct={class:"w-full max-w-[1200px] mx-auto"},St={class:"flex flex-col items-center mb-6 sm:mb-8"},qt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900 text-center mb-3"},$t={key:0,class:"text-gray-600 text-center text-base sm:text-lg"},jt={key:0,class:"flex justify-center items-center py-12"},zt={key:1,class:"flex justify-center items-center py-12"},It={class:"text-red-500"},Et={key:0,class:"mb-4"};function Ft(o,t,a,e,d,i){return e.isActive?(c(),f("div",kt,[s("div",Ct,[s("div",St,[s("h2",qt,b(e.quizData?.title||a.title),1),e.quizData?.description||a.description?(c(),f("p",$t,b(e.quizData?.description||a.description),1)):k("",!0)]),e.loading?(c(),f("div",jt,[...t[1]||(t[1]=[s("div",{class:"text-gray-500"},"Загрузка квиза...",-1)])])):e.error?(c(),f("div",zt,[s("div",It,b(e.error),1)])):e.currentQuestion?(c(),z(X,{key:2,name:"quiz-fade",mode:"out-in"},{default:B(()=>[s("div",null,[e.questionHistory.length>0||e.currentQuestionNumber>1?(c(),f("div",Et,[s("button",{onClick:t[0]||(t[0]=(...n)=>e.goToPrevious&&e.goToPrevious(...n)),class:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm sm:text-base"},[...t[2]||(t[2]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),P(" Назад ",-1)])])])):k("",!0),(c(),z(A(e.currentQuestion.question_type),{key:e.currentQuestion.id,data:e.formatQuestionData(e.currentQuestion),"number-question":e.currentQuestion.id,onNext:e.goToNext,onAnswer:e.handleAnswer,onSubmit:e.handleSubmit},null,40,["data","number-question","onNext","onAnswer","onSubmit"]))])]),_:1})):k("",!0)])])):k("",!0)}const Nt=S(wt,[["render",Ft],["__scopeId","data-v-1bcb4acb"]]),Dt={name:"CasesBlock",components:{CaseCard:ie},setup(){const o=p(null),t=p([]),a=p(!0),e=async()=>{try{const i=await fetch("/api/public/cases-block/settings");if(i.ok){const n=await i.json();n.data&&(o.value=n.data,o.value.case_ids&&o.value.case_ids.length>0&&await d(o.value.case_ids))}}catch(i){console.error("Error fetching Cases block settings:",i)}finally{a.value=!1}},d=async i=>{try{const n=i.join(","),m=await fetch(`/api/public/cases?ids=${n}&with=image,images`);if(m.ok){const g=await m.json();if(g.data){const _=new Map(g.data.map(w=>[w.id,w]));t.value=i.map(w=>_.get(w)).filter(w=>w!==void 0)}}}catch(n){console.error("Error fetching cases:",n)}};return D(()=>{e()}),{settings:o,cases:t,loading:a}}},Tt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},Mt={class:"w-full max-w-[1200px] mx-auto"},Qt={key:0,class:"flex justify-center mb-6 md:mb-8"},Vt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"},Ht={class:"flex justify-center mt-8 md:mt-12"};function Ot(o,t,a,e,d,i){const n=N("CaseCard"),m=N("router-link");return e.settings&&e.settings.is_active&&e.cases.length>0?(c(),f("section",Tt,[s("div",Mt,[e.settings.title?(c(),f("div",Qt,[s("h2",Vt,b(e.settings.title),1)])):k("",!0),s("div",Bt,[(c(!0),f(I,null,T(e.cases,g=>(c(),z(n,{key:g.id,"case-item":g},null,8,["case-item"]))),128))]),s("div",Ht,[V(m,{to:"/cases",class:"inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base md:text-lg"},{default:B(()=>[...t[0]||(t[0]=[P(" Смотреть все кейсы ",-1)])]),_:1})])])])):k("",!0)}const Pt=S(Dt,[["render",Ot]]),At={HeroBanner:xe,HowWork:ne,Decisions:je,Quiz:Nt,Faq:oe,WhyChooseUs:se,CasesBlock:Pt,FeedbackForm:re},Lt={name:"Home",components:{SEOHead:Z},setup(){const{hidePreloader:o}=ee(),t=p([]),a=p(!0),e={site_name:"Lagom - Профессиональные услуги по работе с земельными участками",site_description:"Профессиональные услуги по подбору и оформлению земельных участков. Кадастровые работы, консультации, оформление документов.",site_keywords:"земельные участки, кадастр, оформление документов, недвижимость, Lagom",default_og_image:"",og_type:"website"},d=p(e),i=q(()=>t.value.map(u=>{const x=At[u.component];if(!x)return console.warn(`Component ${u.component} not found`),null;const j=u.settings||{};return{key:u.key,component:x,props:j}}).filter(u=>u!==null)),n=async()=>{try{const u=await fetch("/api/public/home-page-blocks");if(u.ok){const x=await u.json();x.data&&(t.value=x.data)}}catch(u){console.error("Error fetching home page blocks:",u),t.value=[{key:"hero_banner",component:"HeroBanner",settings:{}},{key:"decisions",component:"Decisions",settings:{}},{key:"quiz",component:"Quiz",settings:{}},{key:"how_work",component:"HowWork",settings:{}},{key:"faq",component:"Faq",settings:{}},{key:"why_choose_us",component:"WhyChooseUs",settings:{}},{key:"cases_block",component:"CasesBlock",settings:{}},{key:"feedback_form",component:"FeedbackForm",settings:{title:"Остались вопросы?",description:"Напишите нам, и мы с удовольствием ответим на все ваши вопросы"}}]}finally{a.value=!1,o()}},m=q(()=>window.location.origin+"/"),g=q(()=>{const u=[],x=d.value.website_schema||{"@context":"https://schema.org","@type":"WebSite",name:d.value.site_name||"Lagom",description:d.value.site_description||"Профессиональные услуги по подбору и оформлению земельных участков",url:window.location.origin};u.push(x);const j=d.value.organization_schema||{"@context":"https://schema.org","@type":"Organization",name:d.value.site_name||"Lagom",url:window.location.origin};return u.push(j),u}),_=async()=>{try{const u=await fetch("/api/public/seo-settings");if(u.ok){const x=await u.json();if(x.data){const j=x.data.site_name&&x.data.site_name.trim()!==""&&x.data.site_name!=="Laravel"&&x.data.site_name.toLowerCase()!=="laravel",H=x.data.site_description&&x.data.site_description.trim()!=="",M={...e,...x.data,site_name:j?x.data.site_name:e.site_name,site_description:H?x.data.site_description:e.site_description,site_keywords:x.data.site_keywords&&x.data.site_keywords.trim()!==""?x.data.site_keywords:e.site_keywords};d.value=M}}}catch(u){console.error("Error fetching SEO settings:",u)}};D(()=>{_(),n()});const w=q(()=>{const u=d.value.site_name;return!u||u.trim()===""||u==="Laravel"||u.toLowerCase()==="laravel"?e.site_name:u}),$=q(()=>{const u=d.value.site_description;return!u||u.trim()===""?e.site_description:u}),E=q(()=>{const u=d.value.site_keywords;return!u||u.trim()===""?e.site_keywords:u});return{blocks:t,loading:a,orderedBlocks:i,seoSettings:d,seoTitle:w,seoDescription:$,seoKeywords:E,canonicalUrl:m,combinedSchema:g}}},Ut={class:"home-page"};function Wt(o,t,a,e,d,i){const n=N("SEOHead");return c(),f("div",Ut,[V(n,{title:e.seoTitle,description:e.seoDescription,keywords:e.seoKeywords,"og-image":e.seoSettings.default_og_image,"og-type":e.seoSettings.og_type||"website",canonical:e.canonicalUrl,schema:e.combinedSchema},null,8,["title","description","keywords","og-image","og-type","canonical","schema"]),(c(!0),f(I,null,T(e.orderedBlocks,(m,g)=>(c(),z(A(m.component),Y({key:m.key},{ref_for:!0},m.props),null,16))),128))])}const ts=S(Lt,[["render",Wt]]);export{ts as default};
