import{_ as y,c as r,b as e,d as u,t as a,l as b,a as g,v as k,w as v,F as w,k as C,h as x,i as B,j as L,r as P,J as h,o as n,f as j,x as M}from"./app-B-amqmjt.js";import{S as m}from"./sweetalert2.esm.all-C0u8rGqG.js";const V={name:"Pages",setup(){const l=x(!0),s=x(null),d=x([]),o=x(""),p=B(()=>{if(!o.value)return d.value;const t=o.value.toLowerCase();return d.value.filter(c=>c.title.toLowerCase().includes(t)||c.slug.toLowerCase().includes(t))}),f=async()=>{l.value=!0,s.value=null;try{const t=await h.get("/api/v1/pages");t.data&&t.data.data&&(d.value=t.data.data)}catch(t){s.value=t.response?.data?.message||"Ошибка загрузки страниц",console.error("Error fetching pages:",t)}finally{l.value=!1}},i=async t=>{if((await m.fire({title:"Удалить страницу?",text:"Это действие нельзя отменить",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Да, удалить",cancelButtonText:"Отмена"})).isConfirmed)try{await h.delete(`/api/v1/pages/${t}`),await m.fire("Удалено!","Страница успешно удалена","success"),f()}catch(_){await m.fire("Ошибка!",_.response?.data?.message||"Не удалось удалить страницу","error")}};return L(()=>{f()}),{loading:l,error:s,pages:d,searchQuery:o,filteredPages:p,deletePage:i}}},H={class:"pages-page space-y-6"},N={key:0,class:"flex items-center justify-center py-12"},S={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},T={class:"text-destructive"},E={key:2,class:"space-y-4"},Q={class:"flex items-center justify-between"},U={key:0,class:"text-center py-12 text-muted-foreground"},z={key:1,class:"bg-card border border-border rounded-lg overflow-hidden"},D={class:"w-full"},F={class:"divide-y divide-border"},R={class:"px-4 py-3"},q={class:"font-medium text-foreground"},A={key:0,class:"text-xs text-muted-foreground mt-1"},J={class:"px-4 py-3"},O={class:"text-xs bg-muted px-2 py-1 rounded"},G={class:"px-4 py-3"},I={class:"px-4 py-3"},K={class:"text-sm text-muted-foreground"},W={class:"px-4 py-3"},X={class:"flex items-center justify-end gap-2"},Y=["onClick"];function Z(l,s,d,o,p,f){const i=P("router-link");return n(),r("div",H,[s[7]||(s[7]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Страницы"),e("p",{class:"text-muted-foreground mt-1"},"Управление страницами сайта")],-1)),o.loading?(n(),r("div",N,[...s[1]||(s[1]=[e("div",{class:"flex flex-col items-center gap-4"},[e("div",{class:"w-12 h-12 border-4 border-accent border-t-transparent rounded-full animate-spin"}),e("p",{class:"text-muted-foreground"},"Загрузка страниц...")],-1)])])):u("",!0),o.error?(n(),r("div",S,[e("p",T,a(o.error),1)])):u("",!0),!o.loading&&!o.error?(n(),r("div",E,[e("div",Q,[b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.searchQuery=t),type:"text",placeholder:"Поиск по названию или URL...",class:"px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent max-w-md"},null,512),[[k,o.searchQuery]]),g(i,{to:{name:"admin.pages.create"},class:"px-4 py-2 bg-accent text-accent-foreground rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium flex items-center gap-2"},{default:v(()=>[...s[2]||(s[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),j(" Добавить страницу ",-1)])]),_:1})]),o.filteredPages.length===0?(n(),r("div",U,[...s[3]||(s[3]=[e("p",null,"Страницы не найдены",-1)])])):(n(),r("div",z,[e("table",D,[s[6]||(s[6]=e("thead",{class:"bg-muted/30"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-sm font-medium text-foreground"},"Название"),e("th",{class:"px-4 py-3 text-left text-sm font-medium text-foreground"},"URL"),e("th",{class:"px-4 py-3 text-left text-sm font-medium text-foreground"},"Статус"),e("th",{class:"px-4 py-3 text-left text-sm font-medium text-foreground"},"Порядок"),e("th",{class:"px-4 py-3 text-right text-sm font-medium text-foreground"},"Действия")])],-1)),e("tbody",F,[(n(!0),r(w,null,C(o.filteredPages,t=>(n(),r("tr",{key:t.id,class:"hover:bg-muted/20 transition-colors"},[e("td",R,[e("div",q,a(t.title),1),t.seo_title?(n(),r("div",A," SEO: "+a(t.seo_title),1)):u("",!0)]),e("td",J,[e("code",O,"/"+a(t.slug),1)]),e("td",G,[e("span",{class:M(["px-2 py-1 text-xs rounded",t.is_active?"bg-green-500/20 text-green-600":"bg-muted text-muted-foreground"])},a(t.is_active?"Активна":"Неактивна"),3)]),e("td",I,[e("span",K,a(t.order),1)]),e("td",W,[e("div",X,[g(i,{to:{name:"admin.pages.edit",params:{id:t.id}},class:"p-2 text-accent hover:bg-accent/10 rounded transition-colors inline-block",title:"Редактировать"},{default:v(()=>[...s[4]||(s[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["to"]),e("button",{onClick:c=>o.deletePage(t.id),class:"p-2 text-destructive hover:bg-destructive/10 rounded transition-colors",title:"Удалить"},[...s[5]||(s[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Y)])])]))),128))])])]))])):u("",!0)])}const te=y(V,[["render",Z]]);export{te as default};
