import{_ as q,r as z,c as h,o as c,d as k,a as I,n as P,b as s,e as F,t as b,w as D,f as H,g as A,h as _,i as S,j as T,T as U,F as N,k as V,u as L,l as M,v as B,m as K,p as R,q as J,s as G,x as X}from"./app-D6S8wRp1.js";import{S as Y}from"./SEOHead-olBFQW-U.js";import{u as Z}from"./usePreloader-CiHcCAv0.js";import{F as ee}from"./FeedbackModal-BftdlJoC.js";import{W as te,F as se,H as ne}from"./WhyChooseUs-CPzOFLY1.js";import{D as oe}from"./DecisionCard-Dm0I-nFS.js";import{C as ae}from"./ConsentCheckbox-KHt5l7Oa.js";import{C as re}from"./CaseCard-B8jeVyWC.js";import{F as ie}from"./FeedbackForm-C69YOPjl.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const le={name:"HeroBanner",components:{FeedbackModal:ee},props:{slug:{type:String,default:"home-banner"}},setup(n){const t=_(null),o=_(!0),e=_(!1),l=async()=>{try{const f=await fetch(`/api/public/banners/${n.slug}`);if(f.ok){const p=await f.json();p.data&&(t.value={...p.data,background_image:p.data.background_image?`/${p.data.background_image.replace(/^\//,"")}`:null,height_desktop:p.data.height_desktop||380,height_mobile:p.data.height_mobile||300})}}catch(f){console.error("Error fetching banner:",f)}finally{o.value=!1}},a=()=>{t.value.button_type==="method"&&(!t.value.button_value||t.value.button_value.trim()===""?e.value=!0:console.log("Method button clicked:",t.value.button_value))},r=()=>{e.value=!1},u=S(()=>{if(!t.value)return{};const f=t.value.height_desktop||380,p=t.value.height_mobile||300,w=f-p,j=`(${p}px + ${w} * ((100vw - 320px) / 880))`;return{"--banner-height-mobile":`${p}px`,"--banner-height-desktop":`${f}px`,minHeight:`${p}px`,height:`clamp(${p}px, ${j}, ${f}px)`}});return T(()=>{l()}),{banner:t,loading:o,bannerStyle:u,showFeedbackModal:e,handleButtonClick:a,handleFeedbackSuccess:r}}},de={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},ce={class:"w-full max-w-2xl"},ue={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},me={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},fe={key:1,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},he={key:2,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function xe(n,t,o,e,l,a){const r=z("FeedbackModal");return c(),h("div",de,[e.banner&&e.banner.is_active?(c(),h("section",{key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg overflow-hidden shadow-sm",style:P(e.bannerStyle)},[s("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:P({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",{class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full flex items-center",style:P(e.bannerStyle)},[s("div",ce,[e.banner.heading_1||e.banner.heading_2||e.banner.description?(c(),h("div",ue,[e.banner.heading_1?(c(),h("h1",me,b(e.banner.heading_1),1)):k("",!0),e.banner.heading_2?(c(),h("h2",fe,b(e.banner.heading_2),1)):k("",!0),e.banner.description?(c(),h("p",he,b(e.banner.description),1)):k("",!0)])):k("",!0),e.banner.button_text?(c(),F(A(e.banner.button_type==="method"?"button":"router-link"),{key:1,to:e.banner.button_type==="url"?e.banner.button_value:void 0,onClick:e.handleButtonClick,class:"inline-block bg-[#657C6C] hover:bg-[#55695a] active:bg-[#48554a] text-white font-medium text-base sm:text-lg px-8 sm:px-10 md:px-12 py-3 sm:py-3.5 md:py-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-100 shadow-lg"},{default:D(()=>[H(b(e.banner.button_text),1)]),_:1},8,["to","onClick"])):k("",!0)])],4)],4)):k("",!0),I(r,{"is-open":e.showFeedbackModal,onClose:t[0]||(t[0]=u=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])}const pe=q(le,[["render",xe]]),ge={name:"Decisions",components:{DecisionCard:oe,TransitionGroup:U},setup(){const n=L(),t=_("Выберите решение под ваш участок"),o=_(!0),e=_(null),l=async()=>{try{const f=await fetch("/api/public/decision-block/settings");if(!f.ok)throw new Error("Ошибка загрузки настроек");const p=await f.json();p.data&&p.data.title&&(t.value=p.data.title)}catch(f){console.error("Ошибка загрузки настроек:",f)}},a=_([]),r=S(()=>a.value.slice(0,9)),u=async()=>{o.value=!0,e.value=null;try{const p=(await n.dispatch("fetchPublicProducts",{minimal:!1})||[]).map(j=>({...j,category:"products"})),E=(await n.dispatch("fetchPublicServices",{minimal:!0})||[]).map(j=>({...j,category:"services"}));a.value=[...p,...E]}catch(f){console.error("Ошибка загрузки данных:",f),e.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{o.value=!1}};return T(async()=>{await Promise.all([l(),u()])}),{title:t,allItems:a,displayedItems:r,loading:o,error:e}}},_e={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},be={class:"w-full max-w-[1200px] mx-auto"},ye={class:"flex justify-center mb-6 sm:mb-8"},ve={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900"},we={key:0,class:"flex justify-center items-center py-12"},ke={key:1,class:"flex justify-center items-center py-12"},Ce={class:"text-red-500"},Se={key:0,class:"relative"},qe={key:1,class:"flex justify-center items-center py-12"},je={key:2,class:"flex justify-center mt-8 sm:mt-10"};function $e(n,t,o,e,l,a){const r=z("DecisionCard"),u=z("router-link");return c(),h("div",_e,[s("div",be,[s("div",ye,[s("h2",ve,b(e.title),1)]),e.loading?(c(),h("div",we,[...t[0]||(t[0]=[s("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(c(),h("div",ke,[s("div",Ce,b(e.error),1)])):(c(),h(N,{key:2},[e.displayedItems.length>0?(c(),h("div",Se,[I(U,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:D(()=>[(c(!0),h(N,null,V(e.displayedItems,(f,p)=>(c(),F(r,{key:`${f.id}-${f.category}`,decision:f,slug:f.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(c(),h("div",qe,[...t[1]||(t[1]=[s("div",{class:"text-gray-500"},"Продукты и услуги не найдены",-1)])])),e.displayedItems.length>0?(c(),h("div",je,[I(u,{to:"/services",class:"font-semibold text-xs leading-[15px] text-black bg-white rounded-lg inline-flex items-center justify-center outline-none no-underline shadow-[0_4px_6px_rgba(65,132,144,0.1),0_1px_3px_rgba(0,0,0,0.08)] cursor-pointer select-none h-[45px] transition-all duration-200 border-0 px-[15px] whitespace-nowrap hover:scale-105"},{default:D(()=>[...t[2]||(t[2]=[H(" Услуги ",-1)])]),_:1})])):k("",!0)],64))])])}const ze=q(ge,[["render",$e],["__scopeId","data-v-36180d91"]]),Ee={name:"ImagesCollect",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(n){const t={id:n.id||n.name,name:n.name||"",title:n.title||n.name||"",text:n.title||n.name||"",src:n.src||n.webp||""};this.$emit("answer",t),n.child?setTimeout(()=>{this.$emit("next",n.child)},300):setTimeout(()=>{this.$emit("next")},300)},handleImageError(n){n.target.src="/upload/quiz/placeholder.jpg"}}},Ie={class:"mt-6"},Fe={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ne={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},De={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Te={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4"},Ve=["onClick"],Qe={class:"relative aspect-[245/140] sm:aspect-[245/140] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},Me=["src","alt"],Be={class:"absolute top-3 left-3 right-3 z-10"},He={class:"text-white font-medium text-base sm:text-lg md:text-xl drop-shadow-lg"};function Oe(n,t,o,e,l,a){return c(),h("div",Ie,[s("div",Fe,[s("div",Ne,b(o.data.id),1),s("div",De,b(o.data.question),1)]),s("div",Te,[(c(!0),h(N,null,V(o.data.selects,r=>(c(),h("div",{key:r.id,class:"relative group cursor-pointer",onClick:u=>a.handleSelect(r)},[s("div",Qe,[s("img",{src:r.src||r.webp||"/upload/quiz/placeholder.jpg",alt:r.name||r.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:t[0]||(t[0]=(...u)=>a.handleImageError&&a.handleImageError(...u))},null,40,Me),t[1]||(t[1]=s("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent pointer-events-none"},null,-1)),s("div",Be,[s("h3",He,b(r.title),1)])])],8,Ve))),128))])])}const Pe=q(Ee,[["render",Oe]]),Ae={name:"Selects",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(n){const t={id:n.id||n.name,name:n.name||"",title:n.title||n.name||"",text:n.name||n.title||""};this.$emit("answer",t),setTimeout(()=>{this.$emit("next")},300)}}},Ue={class:"mt-6"},We={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Le={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Ke={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Re={class:"space-y-3 sm:space-y-4 max-w-2xl"},Je=["onClick"];function Ge(n,t,o,e,l,a){return c(),h("div",Ue,[s("div",We,[s("div",Le,b(o.data.id),1),s("div",Ke,b(o.data.question),1)]),s("div",Re,[(c(!0),h(N,null,V(o.data.selects,r=>(c(),h("button",{key:r.id,onClick:u=>a.handleSelect(r),class:"w-full px-6 py-4 text-left bg-white border-2 border-gray-200 rounded-lg hover:border-[#657C6C] hover:bg-gray-50 transition-all duration-200 text-base sm:text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"},b(r.name),9,Je))),128))])])}const Xe=q(Ae,[["render",Ge]]),Ye={name:"Inputs",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],setup(n,{emit:t}){const o=_(n.data?.answer||""),e=S(()=>{const a=o.value;return a==null?!1:a.toString().trim()!==""});return{answerValue:o,isAnswerValid:e,handleNext:()=>{const a=o.value?.toString().trim()||"";a&&(n.data&&(n.data.answer=a),t("answer",a),n.data?.child?t("next",n.data.child):t("next"))}}}},Ze={class:"mt-6"},et={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},tt={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},st={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},nt={class:"max-w-2xl"},ot={class:"block text-sm font-medium text-gray-700 mb-2"},at={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},rt=["placeholder"],it=["disabled"];function lt(n,t,o,e,l,a){return c(),h("div",Ze,[s("div",et,[s("div",tt,b(o.data.id),1),s("div",st,b(o.data.question),1)]),s("div",nt,[s("label",ot,b(o.data.label),1),s("div",at,[M(s("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.answerValue=r),type:"text",placeholder:o.data.placeholder,onKeyup:t[1]||(t[1]=K((...r)=>e.handleNext&&e.handleNext(...r),["enter"])),class:"flex-1 w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors disabled:opacity-50 focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none"},null,40,rt),[[B,e.answerValue]]),s("button",{onClick:t[2]||(t[2]=(...r)=>e.handleNext&&e.handleNext(...r)),disabled:!e.isAnswerValid,class:"px-6 sm:px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Далее ",8,it)])])])}const dt=q(Ye,[["render",lt]]),ct={name:"Forms",components:{ConsentCheckbox:ae},props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],data(){return{consentError:!1}},computed:{isFormValid(){return this.data.form.name&&this.data.form.name.trim()!==""&&this.data.form.email&&this.data.form.email.trim()!==""&&this.data.form.phone&&this.data.form.phone.trim()!==""&&this.data.form.check}},methods:{async handleSubmit(){if(!this.data.form.check){this.consentError=!0;return}this.consentError=!1,this.isFormValid&&(this.$emit("answer",this.data.form),this.$emit("submit",{name:this.data.form.name,email:this.data.form.email,phone:this.data.form.phone}))}}},ut={class:"mt-6"},mt={class:"mb-6 px-2"},ft=["innerHTML"],ht={class:"max-w-2xl"},xt={class:"pt-2"},pt=["disabled"];function gt(n,t,o,e,l,a){const r=z("ConsentCheckbox");return c(),h("div",ut,[s("div",mt,[s("div",{class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900",innerHTML:o.data.question},null,8,ft)]),s("div",ht,[s("form",{onSubmit:t[5]||(t[5]=R((...u)=>a.handleSubmit&&a.handleSubmit(...u),["prevent"])),class:"space-y-4"},[s("div",null,[t[6]||(t[6]=s("label",{for:"quiz-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),M(s("input",{id:"quiz-name","onUpdate:modelValue":t[0]||(t[0]=u=>o.data.form.name=u),type:"text",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"Иван Иванов"},null,512),[[B,o.data.form.name]])]),s("div",null,[t[7]||(t[7]=s("label",{for:"quiz-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш email ",-1)),M(s("input",{id:"quiz-email","onUpdate:modelValue":t[1]||(t[1]=u=>o.data.form.email=u),type:"email",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"your@email.com"},null,512),[[B,o.data.form.email]])]),s("div",null,[t[8]||(t[8]=s("label",{for:"quiz-phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш телефон ",-1)),M(s("input",{id:"quiz-phone","onUpdate:modelValue":t[2]||(t[2]=u=>o.data.form.phone=u),type:"tel",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"+7 (999) 123-45-67"},null,512),[[B,o.data.form.phone]])]),s("div",xt,[I(r,{modelValue:o.data.form.check,"onUpdate:modelValue":t[3]||(t[3]=u=>o.data.form.check=u),error:l.consentError,"onUpdate:error":t[4]||(t[4]=u=>l.consentError=u),"input-id":"quiz-consent-checkbox"},null,8,["modelValue","error"])]),s("button",{type:"submit",disabled:!a.isFormValid,class:"w-full sm:w-auto px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Отправить ",8,pt)],32)])])}const _t=q(ct,[["render",gt]]),bt={name:"Thank",props:{data:{type:Object,default:()=>({})},numberQuestion:{type:Number,required:!0}}},yt={class:"mt-6"};function vt(n,t,o,e,l,a){return c(),h("div",yt,[...t[0]||(t[0]=[J('<div class="flex flex-col items-center justify-center py-8 sm:py-12 px-4"><div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-green-100 flex items-center justify-center mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl sm:text-2xl md:text-3xl font-semibold text-gray-900 text-center mb-4"> Спасибо! </h3><p class="text-base sm:text-lg text-gray-600 text-center max-w-md"> Наши специалисты свяжутся с вами в течение 15 минут </p></div>',1)])])}const wt=q(bt,[["render",vt]]),kt={name:"Quiz",components:{"images-collect":Pe,selects:Xe,inputs:dt,forms:_t,thank:wt},props:{title:{type:String,default:"Подберите идеальное решение"},description:{type:String,default:"Ответьте на несколько вопросов, и мы предложим оптимальный вариант"}},setup(){const n=_(!0),t=_(null),o=_(null),e=_([]),l=_(1),a=_([]),r=_(!1),u=_({}),f=_(!1),p=_(!1),w=async()=>{try{const i=await fetch("/api/public/quiz-block/settings");if(!i.ok)throw new Error("Ошибка загрузки настроек");const d=await i.json();d.data?(r.value=d.data.is_active===!0,d.data.quiz_id?await E(d.data.quiz_id):n.value=!1):n.value=!1}catch(i){console.error("Ошибка загрузки настроек блока квиза:",i),n.value=!1}},E=async i=>{n.value=!0,t.value=null;try{const d=await fetch(`/api/public/quiz-block/quiz/${i}`);if(!d.ok)throw new Error("Ошибка загрузки квиза");const x=await d.json();x.data&&(o.value={id:x.data.id,title:x.data.title,description:x.data.description},e.value=(x.data.questions||[]).filter(y=>y.is_active!==!1).sort((y,v)=>(y.order||0)-(v.order||0)).map((y,v)=>({...y,displayId:v+1})),e.value.length>0&&(l.value=e.value[0].displayId,a.value=[]))}catch(d){t.value=d.message||"Ошибка загрузки квиза",console.error("Ошибка загрузки квиза:",d)}finally{n.value=!1}},j=i=>{const d={id:i.displayId||i.id||i.order,question:i.question_text||"",type:i.question_type,...i.question_data||{}};return(i.question_type==="images-collect"||i.question_type==="selects")&&i.question_data?.selects&&(d.selects=i.question_data.selects.map((x,y)=>({id:x.id||y+1,name:x.name||"",src:x.src||"",title:x.title||x.name||"",child:x.child||null}))),i.question_type==="inputs"&&i.question_data&&(d.label=i.question_data.label||"",d.placeholder=i.question_data.placeholder||"",d.child=i.question_data.child||null,d.answer=""),i.question_type==="forms"&&i.question_data&&(d.form=i.question_data.form||{name:"",email:"",phone:"",check:!1},d.child=i.question_data.child||null,d.question=i.question_text||i.question_data.question||""),d},m=S(()=>e.value.find(i=>i.displayId===l.value)),g=i=>{const d=l.value;if(d&&!a.value.includes(d)&&a.value.push(d),i){const x=e.value.findIndex(y=>y.displayId===l.value);i>0&&i<=e.value.length?l.value=i:x<e.value.length-1&&(l.value=e.value[x+1].displayId)}else{const x=e.value.findIndex(y=>y.displayId===l.value);x<e.value.length-1&&(l.value=e.value[x+1].displayId)}},$=()=>{const i=e.value.findIndex(d=>d.displayId===l.value);if(i>0){const d=e.value[i-1];if(d){const x=a.value.lastIndexOf(l.value);x!==-1&&(a.value=a.value.slice(0,x)),l.value=d.displayId}}},O=i=>{const d=e.value.find(x=>x.displayId===l.value);d&&(u.value[d.id]={question_id:d.id,question_text:d.question_text,question_type:d.question_type,answer:i})},Q=async i=>{if(!(p.value||f.value)){p.value=!0;try{const d=e.value.filter(C=>u.value[C.id]).map(C=>u.value[C.id].answer),x=await fetch("/api/public/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({quiz_id:o.value.id,answers:d,contact:i})});let y="",v=null;try{if(y=await x.text(),y)try{v=JSON.parse(y)}catch(C){throw console.error("Ошибка парсинга JSON:",C,"Response text:",y.substring(0,200)),new Error("Сервер вернул некорректный ответ. Пожалуйста, попробуйте еще раз.")}}catch(C){throw console.error("Ошибка чтения ответа:",C),new Error("Ошибка получения ответа от сервера")}if(!x.ok){const C=v&&v.message||v&&v.error||`Ошибка сервера: ${x.status} ${x.statusText}`;throw new Error(C)}if(!v)throw console.error("Сервер вернул пустой ответ. Response text:",y.substring(0,200)),new Error("Сервер вернул пустой ответ");if(typeof v!="object")throw console.error("Сервер вернул некорректный тип данных:",typeof v,v),new Error("Сервер вернул некорректный ответ");if(v.success===!0)return f.value=!0,{success:!0,message:v.message||"Спасибо за прохождение квиза!"};{const C=v.message||v.error||"Ошибка отправки результатов квиза";throw new Error(C)}}catch(d){return console.error("Ошибка отправки результатов квиза:",d),{success:!1,message:d.message||"Ошибка отправки результатов квиза. Пожалуйста, попробуйте еще раз."}}finally{p.value=!1}}},W=async i=>{const d=await Q(i);d.success?g():alert(d.message||"Произошла ошибка при отправке результатов. Пожалуйста, попробуйте еще раз.")};return T(()=>{w()}),{loading:n,error:t,quizData:o,questions:e,currentQuestionNumber:l,currentQuestion:m,isActive:r,isCompleted:f,isSubmitting:p,formatQuestionData:j,goToNext:g,goToPrevious:$,handleAnswer:O,handleSubmit:W,submitQuiz:Q,questionHistory:a}}},Ct={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},St={class:"w-full max-w-[1200px] mx-auto"},qt={class:"flex flex-col items-center mb-6 sm:mb-8"},jt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900 text-center mb-3"},$t={key:0,class:"text-gray-600 text-center text-base sm:text-lg"},zt={key:0,class:"flex justify-center items-center py-12"},Et={key:1,class:"flex justify-center items-center py-12"},It={class:"text-red-500"},Ft={key:0,class:"mb-4"};function Nt(n,t,o,e,l,a){return e.isActive?(c(),h("div",Ct,[s("div",St,[s("div",qt,[s("h2",jt,b(e.quizData?.title||o.title),1),e.quizData?.description||o.description?(c(),h("p",$t,b(e.quizData?.description||o.description),1)):k("",!0)]),e.loading?(c(),h("div",zt,[...t[1]||(t[1]=[s("div",{class:"text-gray-500"},"Загрузка квиза...",-1)])])):e.error?(c(),h("div",Et,[s("div",It,b(e.error),1)])):e.currentQuestion?(c(),F(G,{key:2,name:"quiz-fade",mode:"out-in"},{default:D(()=>[s("div",null,[e.questionHistory.length>0||e.currentQuestionNumber>1?(c(),h("div",Ft,[s("button",{onClick:t[0]||(t[0]=(...r)=>e.goToPrevious&&e.goToPrevious(...r)),class:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm sm:text-base"},[...t[2]||(t[2]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),H(" Назад ",-1)])])])):k("",!0),(c(),F(A(e.currentQuestion.question_type),{key:e.currentQuestion.id,data:e.formatQuestionData(e.currentQuestion),"number-question":e.currentQuestion.id,onNext:e.goToNext,onAnswer:e.handleAnswer,onSubmit:e.handleSubmit},null,40,["data","number-question","onNext","onAnswer","onSubmit"]))])]),_:1})):k("",!0)])])):k("",!0)}const Dt=q(kt,[["render",Nt],["__scopeId","data-v-1bcb4acb"]]),Tt={name:"CasesBlock",components:{CaseCard:re},setup(){const n=_(null),t=_([]),o=_(!0),e=async()=>{try{const a=await fetch("/api/public/cases-block/settings");if(a.ok){const r=await a.json();r.data&&(n.value=r.data,n.value.case_ids&&n.value.case_ids.length>0&&await l(n.value.case_ids))}}catch(a){console.error("Error fetching Cases block settings:",a)}finally{o.value=!1}},l=async a=>{try{const r=a.join(","),u=await fetch(`/api/public/cases?ids=${r}&with=image,images`);if(u.ok){const f=await u.json();if(f.data){const p=new Map(f.data.map(w=>[w.id,w]));t.value=a.map(w=>p.get(w)).filter(w=>w!==void 0)}}}catch(r){console.error("Error fetching cases:",r)}};return T(()=>{e()}),{settings:n,cases:t,loading:o}}},Vt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},Qt={class:"w-full max-w-[1200px] mx-auto"},Mt={key:0,class:"flex justify-center mb-6 md:mb-8"},Bt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Ht={class:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"},Ot={class:"flex justify-center mt-8 md:mt-12"};function Pt(n,t,o,e,l,a){const r=z("CaseCard"),u=z("router-link");return e.settings&&e.settings.is_active&&e.cases.length>0?(c(),h("section",Vt,[s("div",Qt,[e.settings.title?(c(),h("div",Mt,[s("h2",Bt,b(e.settings.title),1)])):k("",!0),s("div",Ht,[(c(!0),h(N,null,V(e.cases,f=>(c(),F(r,{key:f.id,"case-item":f},null,8,["case-item"]))),128))]),s("div",Ot,[I(u,{to:"/cases",class:"inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base md:text-lg"},{default:D(()=>[...t[0]||(t[0]=[H(" Смотреть все кейсы ",-1)])]),_:1})])])])):k("",!0)}const At=q(Tt,[["render",Pt]]),Ut={HeroBanner:pe,HowWork:ne,Decisions:ze,Quiz:Dt,Faq:se,WhyChooseUs:te,CasesBlock:At,FeedbackForm:ie},Wt={name:"Home",components:{SEOHead:Y},setup(){const{hidePreloader:n}=Z(),t=_([]),o=_(!0),e={site_name:"МНКА - Профессиональные услуги по работе с земельными участками",site_description:"Профессиональные услуги по подбору и оформлению земельных участков. Кадастровые работы, консультации, оформление документов.",site_keywords:"земельные участки, кадастр, оформление документов, недвижимость, МНКА",default_og_image:"",og_type:"website"},l=_(e),a=S(()=>t.value.map(m=>{const g=Ut[m.component];if(!g)return console.warn(`Component ${m.component} not found`),null;const $=m.settings||{};return{key:m.key,component:g,props:$}}).filter(m=>m!==null)),r=async()=>{try{const m=await fetch("/api/public/home-page-blocks");if(m.ok){const g=await m.json();g.data&&(t.value=g.data)}}catch(m){console.error("Error fetching home page blocks:",m),t.value=[{key:"hero_banner",component:"HeroBanner",settings:{}},{key:"decisions",component:"Decisions",settings:{}},{key:"quiz",component:"Quiz",settings:{}},{key:"how_work",component:"HowWork",settings:{}},{key:"faq",component:"Faq",settings:{}},{key:"why_choose_us",component:"WhyChooseUs",settings:{}},{key:"cases_block",component:"CasesBlock",settings:{}},{key:"feedback_form",component:"FeedbackForm",settings:{title:"Остались вопросы?",description:"Напишите нам, и мы с удовольствием ответим на все ваши вопросы"}}]}finally{o.value=!1,n()}},u=S(()=>window.location.origin+"/"),f=S(()=>{const m=[],g=l.value.website_schema||{"@context":"https://schema.org","@type":"WebSite",name:l.value.site_name||"МНКА",description:l.value.site_description||"Профессиональные услуги по подбору и оформлению земельных участков",url:window.location.origin};m.push(g);const $=l.value.organization_schema||{"@context":"https://schema.org","@type":"Organization",name:l.value.site_name||"МНКА",url:window.location.origin};return m.push($),m}),p=async()=>{try{const m=await fetch("/api/public/seo-settings");if(m.ok){const g=await m.json();if(g.data){const $=g.data.site_name&&g.data.site_name.trim()!==""&&g.data.site_name!=="Laravel"&&g.data.site_name.toLowerCase()!=="laravel",O=g.data.site_description&&g.data.site_description.trim()!=="",Q={...e,...g.data,site_name:$?g.data.site_name:e.site_name,site_description:O?g.data.site_description:e.site_description,site_keywords:g.data.site_keywords&&g.data.site_keywords.trim()!==""?g.data.site_keywords:e.site_keywords};l.value=Q}}}catch(m){console.error("Error fetching SEO settings:",m)}};T(()=>{p(),r()});const w=S(()=>{const m=l.value.site_name;return!m||m.trim()===""||m==="Laravel"||m.toLowerCase()==="laravel"?e.site_name:m}),E=S(()=>{const m=l.value.site_description;return!m||m.trim()===""?e.site_description:m}),j=S(()=>{const m=l.value.site_keywords;return!m||m.trim()===""?e.site_keywords:m});return{blocks:t,loading:o,orderedBlocks:a,seoSettings:l,seoTitle:w,seoDescription:E,seoKeywords:j,canonicalUrl:u,combinedSchema:f}}},Lt={class:"home-page"};function Kt(n,t,o,e,l,a){const r=z("SEOHead");return c(),h("div",Lt,[I(r,{title:e.seoTitle,description:e.seoDescription,keywords:e.seoKeywords,"og-image":e.seoSettings.default_og_image,"og-type":e.seoSettings.og_type||"website",canonical:e.canonicalUrl,schema:e.combinedSchema},null,8,["title","description","keywords","og-image","og-type","canonical","schema"]),(c(!0),h(N,null,V(e.orderedBlocks,(u,f)=>(c(),F(A(u.component),X({key:u.key},{ref_for:!0},u.props),null,16))),128))])}const os=q(Wt,[["render",Kt]]);export{os as default};
