import{_ as g,c as t,b as s,p as x,d as b,t as f,l as m,v as u,a as w,w as y,h as l,j as v,C as k,r as _,J as h,E as V,o as d,f as S}from"./app-B-amqmjt.js";const q={name:"ResetPassword",setup(){const c=k(),e=V(),a=l(!1),o=l(""),n=l(""),i=l({email:"",password:"",password_confirmation:"",token:""});return v(()=>{i.value.token=c.query.token||""}),{form:i,loading:a,error:o,success:n,handleSubmit:async()=>{a.value=!0,o.value="",n.value="";try{await h.post("/api/auth/reset-password",i.value),n.value="Пароль успешно изменен",setTimeout(()=>{e.push("/login")},2e3)}catch(r){o.value=r.response?.data?.message||"Ошибка при изменении пароля"}a.value=!1}}}},C={class:"flex min-h-screen items-center justify-center bg-background px-4"},N={class:"w-full max-w-md space-y-6"},R={class:"rounded-lg border bg-card p-6 shadow-sm"},B={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-3 text-sm text-red-800 dark:text-red-200"},E={key:1,class:"rounded-md bg-green-50 dark:bg-green-900/20 p-3 text-sm text-green-800 dark:text-green-200"},M=["disabled"],T={key:0},U={key:1},j={class:"text-center text-sm text-muted-foreground"};function D(c,e,a,o,n,i){const p=_("router-link");return d(),t("div",C,[s("div",N,[e[8]||(e[8]=s("div",{class:"text-center"},[s("h1",{class:"text-3xl font-bold"},"Сброс пароля"),s("p",{class:"text-muted-foreground mt-2"},"Введите новый пароль")],-1)),s("div",R,[s("form",{onSubmit:e[3]||(e[3]=x((...r)=>o.handleSubmit&&o.handleSubmit(...r),["prevent"])),class:"space-y-4"},[o.error?(d(),t("div",B,f(o.error),1)):b("",!0),o.success?(d(),t("div",E,f(o.success),1)):b("",!0),s("div",null,[e[4]||(e[4]=s("label",{for:"email",class:"block text-sm font-medium mb-2"},"Email",-1)),m(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=r=>o.form.email=r),type:"email",required:"",class:"w-full rounded-md border bg-background px-3 py-2 text-sm transition-colors disabled:opacity-50 border-input focus:border-ring focus:ring-ring/20",placeholder:"your@email.com"},null,512),[[u,o.form.email]])]),s("div",null,[e[5]||(e[5]=s("label",{for:"password",class:"block text-sm font-medium mb-2"},"Новый пароль",-1)),m(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=r=>o.form.password=r),type:"password",required:"",class:"w-full rounded-md border bg-background px-3 py-2 text-sm transition-colors disabled:opacity-50 border-input focus:border-ring focus:ring-ring/20",placeholder:"Минимум 8 символов"},null,512),[[u,o.form.password]])]),s("div",null,[e[6]||(e[6]=s("label",{for:"password_confirmation",class:"block text-sm font-medium mb-2"},"Подтверждение пароля",-1)),m(s("input",{id:"password_confirmation","onUpdate:modelValue":e[2]||(e[2]=r=>o.form.password_confirmation=r),type:"password",required:"",class:"w-full rounded-md border bg-background px-3 py-2 text-sm transition-colors disabled:opacity-50 border-input focus:border-ring focus:ring-ring/20",placeholder:"Повторите пароль"},null,512),[[u,o.form.password_confirmation]])]),s("button",{type:"submit",disabled:o.loading,class:"w-full rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed"},[o.loading?(d(),t("span",U,"Изменение...")):(d(),t("span",T,"Изменить пароль"))],8,M)],32)]),s("p",j,[w(p,{to:"/login",class:"text-primary hover:underline"},{default:y(()=>[...e[7]||(e[7]=[S("Вернуться к входу",-1)])]),_:1})])])])}const J=g(q,[["render",D]]);export{J as default};
