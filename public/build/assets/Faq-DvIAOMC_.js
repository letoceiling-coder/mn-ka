import{_ as C,d as h,y as F,e as E,c as r,g as m,b as o,s as k,p as w,j as M,v as y,m as p,t as b,o as l,f as A,a as q,F as j,l as S,D as T,r as D,z as B,q as L,w as H,k as I}from"./app-BTbmnJkn.js";import{S as V}from"./sweetalert2.esm.all-C0u8rGqG.js";const U={name:"FeedbackModal",props:{isOpen:{type:Boolean,default:!1}},emits:["close","success"],setup(v,{emit:t}){const u=h(!1),e=h(null),x=h(!1),g=h({}),s=h({name:"",phone:"",email:"",message:""}),n=i=>{const f=i.replace(/\D/g,"");if(f.startsWith("8")){const d=f.slice(1).match(/^(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})$/);if(d)return"+7 ("+(d[1]?d[1]:"")+(d[2]?") "+d[2]:"")+(d[3]?"-"+d[3]:"")+(d[4]?"-"+d[4]:"")}else if(f.startsWith("7")){const d=f.slice(1).match(/^(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})$/);if(d)return"+7 ("+(d[1]?d[1]:"")+(d[2]?") "+d[2]:"")+(d[3]?"-"+d[3]:"")+(d[4]?"-"+d[4]:"")}return i};F(()=>s.value.phone,i=>{const f=n(i);f!==i&&(s.value.phone=f)}),F(()=>s.value.message,i=>{i.length>5e3&&(s.value.message=i.slice(0,5e3))}),F(()=>v.isOpen,i=>{i||setTimeout(()=>{s.value={name:"",phone:"",email:"",message:""},g.value={},e.value=null,x.value=!1},300)});const c=E(()=>s.value.name.trim()!==""&&s.value.message.trim()!=="");return{form:s,errors:g,error:e,success:x,loading:u,canSubmit:c,closeModal:()=>{t("close")},submitForm:async()=>{if(!(!c.value||u.value)){g.value={},e.value=null,u.value=!0;try{const i=await fetch("/api/public/feedback",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:s.value.name.trim(),phone:s.value.phone.trim()||null,email:s.value.email.trim()||null,message:s.value.message.trim()})}),f=await i.json();if(!i.ok)throw f.errors&&(g.value=f.errors),new Error(f.message||"Ошибка при отправке формы");x.value=!0,s.value={name:"",phone:"",email:"",message:""},await V.fire({icon:"success",title:"Спасибо!",text:"Ваше сообщение успешно отправлено. Мы свяжемся с вами в ближайшее время.",timer:3e3,showConfirmButton:!1}),setTimeout(()=>{t("success"),t("close")},500)}catch(i){e.value=i.message||"Ошибка при отправке формы",console.error("Error submitting feedback:",i)}finally{u.value=!1}}}}}},W={class:"bg-background rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},z={class:"flex items-center justify-between p-6 border-b border-border"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={key:0,class:"mt-1 text-sm text-red-500"},K={key:0,class:"mt-1 text-sm text-red-500"},R={key:0,class:"mt-1 text-sm text-red-500"},J={key:0,class:"mt-1 text-sm text-red-500"},P={class:"mt-1 text-xs text-muted-foreground"},Q={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},X={class:"text-sm text-red-600"},Z={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},G={class:"flex justify-end gap-4 pt-4"},Y=["disabled"],$=["disabled"],ee={key:0},te={key:1};function oe(v,t,u,e,x,g){return u.isOpen?(l(),r("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[7]||(t[7]=k((...s)=>e.closeModal&&e.closeModal(...s),["self"]))},[o("div",W,[o("div",z,[t[9]||(t[9]=o("h2",{class:"text-2xl font-semibold text-foreground"},"Обратная связь",-1)),o("button",{onClick:t[0]||(t[0]=(...s)=>e.closeModal&&e.closeModal(...s)),class:"text-muted-foreground hover:text-foreground transition-colors",type:"button"},[...t[8]||(t[8]=[o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),o("form",{onSubmit:t[6]||(t[6]=k((...s)=>e.submitForm&&e.submitForm(...s),["prevent"])),class:"p-6 space-y-6"},[o("div",N,[o("div",null,[t[10]||(t[10]=o("label",{for:"modal-name",class:"block text-sm font-medium text-foreground mb-2"},[M(" Имя "),o("span",{class:"text-red-500"},"*")],-1)),w(o("input",{id:"modal-name","onUpdate:modelValue":t[1]||(t[1]=s=>e.form.name=s),type:"text",required:"",placeholder:"Ваше имя",class:p(["w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.name}])},null,2),[[y,e.form.name]]),e.errors.name?(l(),r("p",O,b(e.errors.name),1)):m("",!0)]),o("div",null,[t[11]||(t[11]=o("label",{for:"modal-phone",class:"block text-sm font-medium text-foreground mb-2"}," Телефон ",-1)),w(o("input",{id:"modal-phone","onUpdate:modelValue":t[2]||(t[2]=s=>e.form.phone=s),type:"tel",placeholder:"+7 (___) ___-__-__",class:p(["w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.phone}])},null,2),[[y,e.form.phone]]),e.errors.phone?(l(),r("p",K,b(e.errors.phone),1)):m("",!0)])]),o("div",null,[t[12]||(t[12]=o("label",{for:"modal-email",class:"block text-sm font-medium text-foreground mb-2"}," Email ",-1)),w(o("input",{id:"modal-email","onUpdate:modelValue":t[3]||(t[3]=s=>e.form.email=s),type:"email",placeholder:"your@email.com",class:p(["w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.email}])},null,2),[[y,e.form.email]]),e.errors.email?(l(),r("p",R,b(e.errors.email),1)):m("",!0)]),o("div",null,[t[13]||(t[13]=o("label",{for:"modal-message",class:"block text-sm font-medium text-foreground mb-2"},[M(" Сообщение "),o("span",{class:"text-red-500"},"*")],-1)),w(o("textarea",{id:"modal-message","onUpdate:modelValue":t[4]||(t[4]=s=>e.form.message=s),required:"",rows:"6",placeholder:"Введите ваше сообщение...",class:p(["w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent resize-none transition-colors",{"border-red-500":e.errors.message}])},null,2),[[y,e.form.message]]),e.errors.message?(l(),r("p",J,b(e.errors.message),1)):m("",!0),o("p",P,b(e.form.message.length)+"/5000 символов ",1)]),e.error?(l(),r("div",Q,[o("p",X,b(e.error),1)])):m("",!0),e.success?(l(),r("div",Z,[...t[14]||(t[14]=[o("p",{class:"text-sm text-green-600"}," Спасибо за ваше обращение! Мы свяжемся с вами в ближайшее время. ",-1)])])):m("",!0),o("div",G,[o("button",{type:"button",onClick:t[5]||(t[5]=(...s)=>e.closeModal&&e.closeModal(...s)),class:"px-6 py-3 border border-border rounded-lg hover:bg-muted transition-colors font-medium",disabled:e.loading}," Отмена ",8,Y),o("button",{type:"submit",disabled:e.loading||!e.canSubmit,class:"px-6 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[e.loading?(l(),r("span",ee,"Отправка...")):(l(),r("span",te,"Отправить"))],8,$)])],32)])])):m("",!0)}const se=C(U,[["render",oe]]),ne={name:"HowWork",components:{FeedbackModal:se},setup(){const v=T(),t=h(null),u=h(!0),e=h(!1),x=async()=>{try{const c=await fetch("/api/public/how-work-block/settings");if(c.ok){const _=await c.json();_.data&&(t.value=_.data)}}catch(c){console.error("Error fetching HowWork block settings:",c)}finally{u.value=!1}},g=E(()=>{if(!t.value?.image)return null;const c=t.value.image;return typeof c=="string"?c.startsWith("/")?c:`/${c}`:null}),s=()=>{t.value&&(t.value.button_type==="url"&&t.value.button_value?t.value.button_value.startsWith("http")?window.open(t.value.button_value,"_blank"):v.push(t.value.button_value):t.value.button_type==="method"&&(!t.value.button_value||t.value.button_value.trim()===""?e.value=!0:console.log("Method button clicked:",t.value.button_value)))},n=()=>{e.value=!1};return A(()=>{x()}),{settings:t,loading:u,imageUrl:g,showFeedbackModal:e,handleButtonClick:s,handleFeedbackSuccess:n}}},re={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},le={class:"w-full max-w-[1200px] mx-auto"},ae={key:0,class:"flex justify-center mb-8 sm:mb-12"},ie={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground"},de={class:"flex flex-col md:flex-row gap-6 md:gap-8"},ce={class:"w-full md:w-1/2 order-2 md:order-1"},me={class:"space-y-0"},ue={class:"flex flex-col items-center flex-shrink-0"},fe={class:"w-5 h-5 flex-shrink-0"},ge={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},be={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he={key:0,class:"w-0.5 bg-[#306221] flex-1 min-h-[50px] mt-2"},xe={class:"flex-1 pb-6 md:pb-8"},ve=["innerHTML"],pe=["innerHTML"],_e={class:"w-full md:w-1/2 order-1 md:order-2"},we={key:0,class:"overflow-hidden rounded-[18px] mb-6"},ye=["src","alt"];function ke(v,t,u,e,x,g){const s=D("FeedbackModal");return e.settings&&e.settings.is_active?(l(),r("section",re,[o("div",le,[e.settings.title?(l(),r("div",ae,[o("h2",ie,b(e.settings.title),1)])):m("",!0),o("div",de,[o("div",ce,[o("div",me,[(l(!0),r(j,null,S(e.settings.steps,(n,c)=>(l(),r("div",{key:c,class:"flex gap-4 relative"},[o("div",ue,[o("div",fe,[n.point==="disc"?(l(),r("svg",ge,[...t[3]||(t[3]=[o("rect",{width:"20",height:"20",rx:"10",fill:"#6C7B6D"},null,-1)])])):n.point==="star"?(l(),r("svg",be,[...t[4]||(t[4]=[o("path",{d:"M3.825 20L5.45 12.6053L0 7.63158L7.2 6.97368L10 0L12.8 6.97368L20 7.63158L14.55 12.6053L16.175 20L10 16.0789L3.825 20Z",fill:"#6C7B6D"},null,-1)])])):m("",!0)]),c<e.settings.steps.length-1?(l(),r("div",he)):m("",!0)]),o("div",xe,[n.title?(l(),r("h3",{key:0,class:"text-base sm:text-lg font-medium text-[#424448] leading-[22px] mb-2",innerHTML:n.title},null,8,ve)):m("",!0),n.description?(l(),r("p",{key:1,class:"text-sm sm:text-base font-normal text-[#424448] leading-[20px]",innerHTML:n.description},null,8,pe)):m("",!0)])]))),128))]),e.settings.button_text?(l(),r("button",{key:0,onClick:t[0]||(t[0]=(...n)=>e.handleButtonClick&&e.handleButtonClick(...n)),class:"mt-6 w-full md:hidden px-6 py-3 bg-[#6C7B6D] hover:bg-[#55695a] text-white font-medium rounded-lg transition-colors"},b(e.settings.button_text),1)):m("",!0)]),o("div",_e,[e.settings.image&&e.imageUrl?(l(),r("div",we,[o("img",{src:e.imageUrl,alt:e.settings.image_alt||"Как мы работаем",class:"w-full h-auto object-cover"},null,8,ye)])):m("",!0),e.settings.button_text?(l(),r("button",{key:1,onClick:t[1]||(t[1]=(...n)=>e.handleButtonClick&&e.handleButtonClick(...n)),class:"hidden md:block w-full px-6 py-3 bg-[#6C7B6D] hover:bg-[#55695a] text-white font-medium rounded-lg transition-colors"},b(e.settings.button_text),1)):m("",!0)])])]),q(s,{"is-open":e.showFeedbackModal,onClose:t[2]||(t[2]=n=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])):m("",!0)}const We=C(ne,[["render",ke],["__scopeId","data-v-34ce3e32"]]),Fe={name:"Faq",setup(){const v=h(null),t=h(!0),u=h({}),e=async()=>{try{const a=await fetch("/api/public/faq-block/settings");if(a.ok){const i=await a.json();i.data&&(v.value=i.data,i.data.faq_items&&Array.isArray(i.data.faq_items)&&i.data.faq_items.forEach((f,d)=>{u.value[d]=!1}))}}catch(a){console.error("Error fetching FAQ block settings:",a)}finally{t.value=!1}},x=a=>{u.value[a]=!u.value[a]},g=a=>a?/<[a-z][\s\S]*>/i.test(a)?a:a.replace(/\n/g,"<br>"):"",s=a=>{a.style.height="0",a.style.opacity="0"},n=a=>{B(()=>{a.style.height=`${a.scrollHeight}px`,a.style.opacity="1"})},c=a=>{a.style.height=`${a.scrollHeight}px`,a.style.opacity="1",B(()=>{a.style.height="0",a.style.opacity="0"})},_=a=>{a.style.height="",a.style.opacity=""};return A(()=>{e()}),{settings:v,loading:t,openItems:u,toggleAnswer:x,formatAnswer:g,onEnter:s,onAfterEnter:n,onLeave:c,onAfterLeave:_}}},Ce={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-gradient-to-b from-[#F4F6FC] to-white","aria-label":"Часто задаваемые вопросы"},Me={class:"w-full max-w-[1200px] mx-auto"},Be={key:0,class:"text-center mb-10 sm:mb-12 md:mb-16"},Le={class:"text-3xl sm:text-4xl md:text-5xl font-bold text-[#424448] mb-3 sm:mb-4"},Ee={key:1,class:"flex items-center justify-center py-16"},Ae={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-5 md:gap-6 items-stretch",role:"list"},qe=["onClick","onKeydown","aria-expanded","aria-controls"],je={class:"flex-1 text-base sm:text-lg md:text-xl font-semibold text-[#424448] leading-relaxed pr-4"},Se=["id","aria-labelledby"],Te={class:"px-5 sm:px-6 pb-5 sm:pb-6 pt-4"},De=["innerHTML"],He={key:3,class:"text-center py-16"};function Ie(v,t,u,e,x,g){return e.settings&&e.settings.is_active?(l(),r("section",Ce,[o("div",Me,[e.settings.title?(l(),r("div",Be,[o("h2",Le,b(e.settings.title),1),t[0]||(t[0]=o("div",{class:"w-20 h-1 bg-[#306221] mx-auto rounded-full"},null,-1))])):m("",!0),e.loading?(l(),r("div",Ee,[...t[1]||(t[1]=[o("div",{class:"flex flex-col items-center gap-4"},[o("div",{class:"w-12 h-12 border-4 border-[#306221] border-t-transparent rounded-full animate-spin"}),o("p",{class:"text-[#6C7B6D] text-sm"},"Загрузка вопросов...")],-1)])])):e.settings.faq_items&&e.settings.faq_items.length>0?(l(),r("div",Ae,[(l(!0),r(j,null,S(e.settings.faq_items,(s,n)=>(l(),r("div",{key:`faq-${n}-${s.question}`,class:"group h-full",role:"listitem"},[o("div",{class:p(["border border-[#E5E7EB] rounded-xl sm:rounded-2xl shadow-sm transition-all duration-300 h-full flex flex-col overflow-hidden",[e.openItems[n]?"border-[#306221] shadow-md bg-[#F9FAFB]":"bg-white group-hover:bg-[#F4F6FC]/50 group-hover:shadow-lg group-hover:border-[#657C6C]"]])},[o("button",{onClick:c=>e.toggleAnswer(n),onKeydown:[L(k(c=>e.toggleAnswer(n),["prevent"]),["enter"]),L(k(c=>e.toggleAnswer(n),["prevent"]),["space"])],"aria-expanded":e.openItems[n],"aria-controls":`faq-answer-${n}`,class:p(["w-full flex items-center justify-between gap-4 p-5 sm:p-6 text-left focus:outline-none focus:ring-2 focus:ring-[#306221] focus:ring-offset-2 transition-colors flex-shrink-0",e.openItems[n]?"bg-[#F9FAFB]":"bg-transparent"])},[o("h3",je,b(s.question),1),o("div",{class:p(["flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-[#F4F6FC] group-hover:bg-[#657C6C]/10 transition-all duration-300",e.openItems[n]?"bg-[#306221]/10":""])},[(l(),r("svg",{class:p(["w-5 h-5 text-[#6C7B6D] transition-transform duration-300 ease-in-out",e.openItems[n]?"rotate-180 text-[#306221]":""]),fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24","aria-hidden":"true"},[...t[2]||(t[2]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2)],42,qe),q(I,{name:"faq-accordion",onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onLeave:e.onLeave,onAfterLeave:e.onAfterLeave},{default:H(()=>[e.openItems[n]?(l(),r("div",{key:0,id:`faq-answer-${n}`,class:"overflow-hidden flex-1 bg-[#F9FAFB]",role:"region","aria-labelledby":`faq-question-${n}`},[o("div",Te,[o("div",{class:"text-sm sm:text-base text-[#424448] leading-relaxed prose prose-sm max-w-none",innerHTML:e.formatAnswer(s.answer)},null,8,De)])],8,Se)):m("",!0)]),_:2},1032,["onEnter","onAfterEnter","onLeave","onAfterLeave"])],2)]))),128))])):e.loading?m("",!0):(l(),r("div",He,[...t[3]||(t[3]=[o("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#F4F6FC] mb-4"},[o("svg",{class:"w-8 h-8 text-[#6C7B6D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),o("p",{class:"text-[#6C7B6D] text-base"},"Вопросы не настроены. Добавьте вопросы в настройках блока.",-1)])]))])])):m("",!0)}const ze=C(Fe,[["render",Ie],["__scopeId","data-v-3de277b9"]]);export{se as F,We as H,ze as a};
