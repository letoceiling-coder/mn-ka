import{_ as C,h as x,z as F,i as q,c as r,d,b as s,p as k,l as w,f as E,v as y,B as p,t as v,o as l,j as M,a as S,F as B,k as L,G as T,r as H,A,m as j,w as W,x as D}from"./app-A-FoUqfi.js";import{S as I}from"./sweetalert2.esm.all-C0u8rGqG.js";const U={name:"FeedbackModal",props:{isOpen:{type:Boolean,default:!1}},emits:["close","success"],setup(g,{emit:t}){const m=x(!1),e=x(null),b=x(!1),f=x({}),o=x({name:"",phone:"",email:"",message:""}),n=c=>{const h=c.replace(/\D/g,"");if(h.startsWith("8")){const u=h.slice(1).match(/^(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})$/);if(u)return"+7 ("+(u[1]?u[1]:"")+(u[2]?") "+u[2]:"")+(u[3]?"-"+u[3]:"")+(u[4]?"-"+u[4]:"")}else if(h.startsWith("7")){const u=h.slice(1).match(/^(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})$/);if(u)return"+7 ("+(u[1]?u[1]:"")+(u[2]?") "+u[2]:"")+(u[3]?"-"+u[3]:"")+(u[4]?"-"+u[4]:"")}return c};F(()=>o.value.phone,c=>{const h=n(c);h!==c&&(o.value.phone=h)}),F(()=>o.value.message,c=>{c.length>5e3&&(o.value.message=c.slice(0,5e3))}),F(()=>g.isOpen,c=>{c||setTimeout(()=>{o.value={name:"",phone:"",email:"",message:""},f.value={},e.value=null,b.value=!1},300)});const i=q(()=>o.value.name.trim()!==""&&o.value.message.trim()!=="");return{form:o,errors:f,error:e,success:b,loading:m,canSubmit:i,closeModal:()=>{t("close")},submitForm:async()=>{if(!(!i.value||m.value)){f.value={},e.value=null,m.value=!0;try{const c=await fetch("/api/public/feedback",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:o.value.name.trim(),phone:o.value.phone.trim()||null,email:o.value.email.trim()||null,message:o.value.message.trim()})}),h=await c.json();if(!c.ok)throw h.errors&&(f.value=h.errors),new Error(h.message||"Ошибка при отправке формы");b.value=!0,o.value={name:"",phone:"",email:"",message:""},await I.fire({icon:"success",title:"Спасибо!",text:"Ваше сообщение успешно отправлено. Мы свяжемся с вами в ближайшее время.",timer:3e3,showConfirmButton:!1}),setTimeout(()=>{t("success"),t("close")},500)}catch(c){e.value=c.message||"Ошибка при отправке формы",console.error("Error submitting feedback:",c)}finally{m.value=!1}}}}}},z={class:"bg-background rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},V={class:"flex items-center justify-between p-6 border-b border-border"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={key:0,class:"mt-1 text-sm text-red-500"},K={key:0,class:"mt-1 text-sm text-red-500"},R={key:0,class:"mt-1 text-sm text-red-500"},G={key:0,class:"mt-1 text-sm text-red-500"},J={class:"mt-1 text-xs text-muted-foreground"},P={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Q={class:"text-sm text-red-600"},X={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Z={class:"flex justify-end gap-4 pt-4"},Y=["disabled"],$=["disabled"],ee={key:0},te={key:1};function oe(g,t,m,e,b,f){return m.isOpen?(l(),r("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[7]||(t[7]=k((...o)=>e.closeModal&&e.closeModal(...o),["self"]))},[s("div",z,[s("div",V,[t[9]||(t[9]=s("h2",{class:"text-2xl font-semibold text-foreground"},"Обратная связь",-1)),s("button",{onClick:t[0]||(t[0]=(...o)=>e.closeModal&&e.closeModal(...o)),class:"text-muted-foreground hover:text-foreground transition-colors",type:"button"},[...t[8]||(t[8]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),s("form",{onSubmit:t[6]||(t[6]=k((...o)=>e.submitForm&&e.submitForm(...o),["prevent"])),class:"p-6 space-y-6"},[s("div",O,[s("div",null,[t[10]||(t[10]=s("label",{for:"modal-name",class:"block text-sm font-medium text-foreground mb-2"},[E(" Имя "),s("span",{class:"text-red-500"},"*")],-1)),w(s("input",{id:"modal-name","onUpdate:modelValue":t[1]||(t[1]=o=>e.form.name=o),type:"text",required:"",placeholder:"Ваше имя",class:p(["w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.name}])},null,2),[[y,e.form.name]]),e.errors.name?(l(),r("p",N,v(e.errors.name),1)):d("",!0)]),s("div",null,[t[11]||(t[11]=s("label",{for:"modal-phone",class:"block text-sm font-medium text-foreground mb-2"}," Телефон ",-1)),w(s("input",{id:"modal-phone","onUpdate:modelValue":t[2]||(t[2]=o=>e.form.phone=o),type:"tel",placeholder:"+7 (___) ___-__-__",class:p(["w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.phone}])},null,2),[[y,e.form.phone]]),e.errors.phone?(l(),r("p",K,v(e.errors.phone),1)):d("",!0)])]),s("div",null,[t[12]||(t[12]=s("label",{for:"modal-email",class:"block text-sm font-medium text-foreground mb-2"}," Email ",-1)),w(s("input",{id:"modal-email","onUpdate:modelValue":t[3]||(t[3]=o=>e.form.email=o),type:"email",placeholder:"your@email.com",class:p(["w-full h-12 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent transition-colors",{"border-red-500":e.errors.email}])},null,2),[[y,e.form.email]]),e.errors.email?(l(),r("p",R,v(e.errors.email),1)):d("",!0)]),s("div",null,[t[13]||(t[13]=s("label",{for:"modal-message",class:"block text-sm font-medium text-foreground mb-2"},[E(" Сообщение "),s("span",{class:"text-red-500"},"*")],-1)),w(s("textarea",{id:"modal-message","onUpdate:modelValue":t[4]||(t[4]=o=>e.form.message=o),required:"",rows:"6",placeholder:"Введите ваше сообщение...",class:p(["w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-[#688E67] focus:border-transparent resize-none transition-colors",{"border-red-500":e.errors.message}])},null,2),[[y,e.form.message]]),e.errors.message?(l(),r("p",G,v(e.errors.message),1)):d("",!0),s("p",J,v(e.form.message.length)+"/5000 символов ",1)]),e.error?(l(),r("div",P,[s("p",Q,v(e.error),1)])):d("",!0),e.success?(l(),r("div",X,[...t[14]||(t[14]=[s("p",{class:"text-sm text-green-600"}," Спасибо за ваше обращение! Мы свяжемся с вами в ближайшее время. ",-1)])])):d("",!0),s("div",Z,[s("button",{type:"button",onClick:t[5]||(t[5]=(...o)=>e.closeModal&&e.closeModal(...o)),class:"px-6 py-3 border border-border rounded-lg hover:bg-muted transition-colors font-medium",disabled:e.loading}," Отмена ",8,Y),s("button",{type:"submit",disabled:e.loading||!e.canSubmit,class:"px-6 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[e.loading?(l(),r("span",ee,"Отправка...")):(l(),r("span",te,"Отправить"))],8,$)])],32)])])):d("",!0)}const se=C(U,[["render",oe]]),ne={name:"HowWork",components:{FeedbackModal:se},setup(){const g=T(),t=x(null),m=x(!0),e=x(!1),b=async()=>{try{const i=await fetch("/api/public/how-work-block/settings");if(i.ok){const _=await i.json();_.data&&(t.value=_.data)}}catch(i){console.error("Error fetching HowWork block settings:",i)}finally{m.value=!1}},f=q(()=>{if(!t.value?.image)return null;const i=t.value.image;return typeof i=="string"?i.startsWith("/")?i:`/${i}`:null}),o=()=>{if(!t.value){console.warn("HowWork: settings not loaded");return}console.log("HowWork button clicked:",{button_type:t.value.button_type,button_value:t.value.button_value}),t.value.button_type==="url"&&t.value.button_value?t.value.button_value.startsWith("http")?window.open(t.value.button_value,"_blank"):g.push(t.value.button_value):(console.log("Opening feedback modal"),e.value=!0)},n=()=>{e.value=!1};return M(()=>{b()}),{settings:t,loading:m,imageUrl:f,showFeedbackModal:e,handleButtonClick:o,handleFeedbackSuccess:n}}},re={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},le={class:"w-full max-w-[1200px] mx-auto"},ae={key:0,class:"flex justify-center mb-8 sm:mb-12"},ie={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground"},de={class:"flex flex-col md:flex-row gap-6 md:gap-8"},ce={class:"w-full md:w-1/2 order-2 md:order-1"},ue={class:"space-y-0"},me={class:"flex flex-col items-center flex-shrink-0"},fe={class:"w-5 h-5 flex-shrink-0"},ge={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},be={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xe={key:0,class:"w-0.5 bg-[#306221] flex-1 min-h-[50px] mt-2"},he={class:"flex-1 pb-6 md:pb-8"},ve=["innerHTML"],pe=["innerHTML"],_e={class:"w-full md:w-1/2 order-1 md:order-2"},we={key:0,class:"overflow-hidden rounded-[18px] mb-6"},ye=["src","alt"];function ke(g,t,m,e,b,f){const o=H("FeedbackModal");return e.settings&&e.settings.is_active?(l(),r("section",re,[s("div",le,[e.settings.title?(l(),r("div",ae,[s("h2",ie,v(e.settings.title),1)])):d("",!0),s("div",de,[s("div",ce,[s("div",ue,[(l(!0),r(B,null,L(e.settings.steps,(n,i)=>(l(),r("div",{key:i,class:"flex gap-4 relative"},[s("div",me,[s("div",fe,[n.point==="disc"?(l(),r("svg",ge,[...t[3]||(t[3]=[s("rect",{width:"20",height:"20",rx:"10",fill:"#6C7B6D"},null,-1)])])):n.point==="star"?(l(),r("svg",be,[...t[4]||(t[4]=[s("path",{d:"M3.825 20L5.45 12.6053L0 7.63158L7.2 6.97368L10 0L12.8 6.97368L20 7.63158L14.55 12.6053L16.175 20L10 16.0789L3.825 20Z",fill:"#6C7B6D"},null,-1)])])):d("",!0)]),i<e.settings.steps.length-1?(l(),r("div",xe)):d("",!0)]),s("div",he,[n.title?(l(),r("h3",{key:0,class:"text-base sm:text-lg font-medium text-[#424448] leading-[22px] mb-2",innerHTML:n.title},null,8,ve)):d("",!0),n.description?(l(),r("p",{key:1,class:"text-sm sm:text-base font-normal text-[#424448] leading-[20px]",innerHTML:n.description},null,8,pe)):d("",!0)])]))),128))]),e.settings.button_text?(l(),r("button",{key:0,onClick:t[0]||(t[0]=(...n)=>e.handleButtonClick&&e.handleButtonClick(...n)),class:"mt-6 w-full md:hidden px-6 py-3 bg-[#6C7B6D] hover:bg-[#55695a] text-white font-medium rounded-lg transition-colors"},v(e.settings.button_text),1)):d("",!0)]),s("div",_e,[e.settings.image&&e.imageUrl?(l(),r("div",we,[s("img",{src:e.imageUrl,alt:e.settings.image_alt||"Как мы работаем",class:"w-full h-auto object-cover"},null,8,ye)])):d("",!0),e.settings.button_text?(l(),r("button",{key:1,onClick:t[1]||(t[1]=(...n)=>e.handleButtonClick&&e.handleButtonClick(...n)),class:"hidden md:block w-full px-6 py-3 bg-[#6C7B6D] hover:bg-[#55695a] text-white font-medium rounded-lg transition-colors"},v(e.settings.button_text),1)):d("",!0)])])]),S(o,{"is-open":e.showFeedbackModal,onClose:t[2]||(t[2]=n=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])):d("",!0)}const Xe=C(ne,[["render",ke],["__scopeId","data-v-f582156e"]]),Ce={name:"Faq",setup(){const g=x(null),t=x(!0),m=x({}),e=async()=>{try{const a=await fetch("/api/public/faq-block/settings");if(a.ok){const c=await a.json();c.data&&(g.value=c.data,c.data.faq_items&&Array.isArray(c.data.faq_items)&&c.data.faq_items.forEach((h,u)=>{m.value[u]=!1}))}}catch(a){console.error("Error fetching FAQ block settings:",a)}finally{t.value=!1}},b=a=>{m.value[a]=!m.value[a]},f=a=>a?/<[a-z][\s\S]*>/i.test(a)?a:a.replace(/\n/g,"<br>"):"",o=a=>{a.style.height="0",a.style.opacity="0"},n=a=>{A(()=>{a.style.height=`${a.scrollHeight}px`,a.style.opacity="1"})},i=a=>{a.style.height=`${a.scrollHeight}px`,a.style.opacity="1",A(()=>{a.style.height="0",a.style.opacity="0"})},_=a=>{a.style.height="",a.style.opacity=""};return M(()=>{e()}),{settings:g,loading:t,openItems:m,toggleAnswer:b,formatAnswer:f,onEnter:o,onAfterEnter:n,onLeave:i,onAfterLeave:_}}},Fe={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-gradient-to-b from-[#F4F6FC] to-white","aria-label":"Часто задаваемые вопросы"},Me={class:"w-full max-w-[1200px] mx-auto"},Be={key:0,class:"text-center mb-10 sm:mb-12 md:mb-16"},Le={class:"text-3xl sm:text-4xl md:text-5xl font-bold text-[#424448] mb-3 sm:mb-4"},Ee={key:1,class:"flex items-center justify-center py-16"},Ae={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-5 md:gap-6 items-stretch",role:"list"},je=["onClick","onKeydown","aria-expanded","aria-controls"],qe={class:"flex-1 text-base sm:text-lg md:text-xl font-semibold text-[#424448] leading-relaxed pr-4"},Se=["id","aria-labelledby"],Te={class:"px-5 sm:px-6 pb-5 sm:pb-6 pt-4"},He=["innerHTML"],We={key:3,class:"text-center py-16"};function De(g,t,m,e,b,f){return e.settings&&e.settings.is_active?(l(),r("section",Fe,[s("div",Me,[e.settings.title?(l(),r("div",Be,[s("h2",Le,v(e.settings.title),1),t[0]||(t[0]=s("div",{class:"w-20 h-1 bg-[#306221] mx-auto rounded-full"},null,-1))])):d("",!0),e.loading?(l(),r("div",Ee,[...t[1]||(t[1]=[s("div",{class:"flex flex-col items-center gap-4"},[s("div",{class:"w-12 h-12 border-4 border-[#306221] border-t-transparent rounded-full animate-spin"}),s("p",{class:"text-[#6C7B6D] text-sm"},"Загрузка вопросов...")],-1)])])):e.settings.faq_items&&e.settings.faq_items.length>0?(l(),r("div",Ae,[(l(!0),r(B,null,L(e.settings.faq_items,(o,n)=>(l(),r("div",{key:`faq-${n}-${o.question}`,class:"group h-full",role:"listitem"},[s("div",{class:p(["border border-[#E5E7EB] rounded-xl sm:rounded-2xl shadow-sm transition-all duration-300 h-full flex flex-col overflow-hidden",[e.openItems[n]?"border-[#306221] shadow-md bg-[#F9FAFB]":"bg-white group-hover:bg-[#F4F6FC]/50 group-hover:shadow-lg group-hover:border-[#657C6C]"]])},[s("button",{onClick:i=>e.toggleAnswer(n),onKeydown:[j(k(i=>e.toggleAnswer(n),["prevent"]),["enter"]),j(k(i=>e.toggleAnswer(n),["prevent"]),["space"])],"aria-expanded":e.openItems[n],"aria-controls":`faq-answer-${n}`,class:p(["w-full flex items-center justify-between gap-4 p-5 sm:p-6 text-left focus:outline-none focus:ring-2 focus:ring-[#306221] focus:ring-offset-2 transition-colors flex-shrink-0",e.openItems[n]?"bg-[#F9FAFB]":"bg-transparent"])},[s("h3",qe,v(o.question),1),s("div",{class:p(["flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-[#F4F6FC] group-hover:bg-[#657C6C]/10 transition-all duration-300",e.openItems[n]?"bg-[#306221]/10":""])},[(l(),r("svg",{class:p(["w-5 h-5 text-[#6C7B6D] transition-transform duration-300 ease-in-out",e.openItems[n]?"rotate-180 text-[#306221]":""]),fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24","aria-hidden":"true"},[...t[2]||(t[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2)],42,je),S(D,{name:"faq-accordion",onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onLeave:e.onLeave,onAfterLeave:e.onAfterLeave},{default:W(()=>[e.openItems[n]?(l(),r("div",{key:0,id:`faq-answer-${n}`,class:"overflow-hidden flex-1 bg-[#F9FAFB]",role:"region","aria-labelledby":`faq-question-${n}`},[s("div",Te,[s("div",{class:"text-sm sm:text-base text-[#424448] leading-relaxed prose prose-sm max-w-none",innerHTML:e.formatAnswer(o.answer)},null,8,He)])],8,Se)):d("",!0)]),_:2},1032,["onEnter","onAfterEnter","onLeave","onAfterLeave"])],2)]))),128))])):e.loading?d("",!0):(l(),r("div",We,[...t[3]||(t[3]=[s("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#F4F6FC] mb-4"},[s("svg",{class:"w-8 h-8 text-[#6C7B6D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),s("p",{class:"text-[#6C7B6D] text-base"},"Вопросы не настроены. Добавьте вопросы в настройках блока.",-1)])]))])])):d("",!0)}const Ze=C(Ce,[["render",De],["__scopeId","data-v-3de277b9"]]),Ie={name:"WhyChooseUs",setup(){const g=x(null),t=x(!0),m=async()=>{try{const o=await fetch("/api/public/why-choose-us-block/settings");if(o.ok){const n=await o.json();n.data&&(g.value=n.data)}}catch(o){console.error("Error fetching WhyChooseUs block settings:",o)}finally{t.value=!1}},e=(o,n)=>{const i=[3,6,3,6,6,12],_=o.col||i[n]||3;return{3:"w-full md:w-1/4",6:"w-full md:w-1/2",12:"w-full"}[_]||"w-full md:w-1/4"},b=(o,n)=>{const i=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(o.bg||i[n]||"card-blue")==="card-green"?"bg-[#688E67]":"bg-[#F4F6FC]"},f=(o,n)=>{const i=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(o.bg||i[n]||"card-blue")==="card-green"?"text-white":"text-black"};return M(()=>{m()}),{settings:g,loading:t,getCardColumnClass:e,getCardBgClass:b,getCardTextClass:f}}},Ue={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},ze={class:"w-full max-w-[1200px] mx-auto"},Ve={key:0,class:"flex justify-center mb-6 md:mb-8"},Oe={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Ne={key:1,class:"flex flex-wrap -mx-3"},Ke={key:0,class:"absolute bottom-[5px] right-[5px]"},Re=["src","alt"],Ge=["innerHTML"];function Je(g,t,m,e,b,f){return e.settings&&e.settings.is_active?(l(),r("section",Ue,[s("div",ze,[e.settings.title?(l(),r("div",Ve,[s("h2",Oe,v(e.settings.title),1)])):d("",!0),e.settings.items&&e.settings.items.length>0?(l(),r("div",Ne,[(l(!0),r(B,null,L(e.settings.items,(o,n)=>(l(),r("div",{key:n,class:p([e.getCardColumnClass(o,n),"px-3 mb-3"])},[s("div",{class:p(["relative rounded-2xl h-[140px] overflow-hidden",e.getCardBgClass(o,n)])},[o.icon&&(o.icon.url||o.icon.disk&&o.icon.name)?(l(),r("div",Ke,[s("img",{src:o.icon.url||`/${o.icon.disk}/${o.icon.name}`,alt:o.text,class:"h-auto max-h-[120px] object-contain",loading:"lazy"},null,8,Re)])):d("",!0),o.text?(l(),r("div",{key:1,class:p(["card-title absolute left-5 top-5 text-base sm:text-lg font-medium leading-[22px]",e.getCardTextClass(o,n)]),innerHTML:o.text},null,10,Ge)):d("",!0)],2)],2))),128))])):d("",!0)])])):d("",!0)}const Ye=C(Ie,[["render",Je],["__scopeId","data-v-90ed1ee0"]]);export{se as F,Xe as H,Ye as W,Ze as a};
