import{_ as h,c as n,b as e,d as c,a as g,w as x,t as l,F as v,k as _,h as f,j as b,r as w,o as a,f as y}from"./app-B6aL35le.js";import{a as k,d as C}from"./api-V9GPpd21.js";import{S as m}from"./sweetalert2.esm.all-C0u8rGqG.js";const B={name:"Chapters",setup(){const d=f(!1),t=f(null),u=f([]),r=async()=>{d.value=!0,t.value=null;try{const s=await k("/chapters");if(!s.ok)throw new Error("Ошибка загрузки разделов");const i=await s.json();u.value=i.data||[]}catch(s){t.value=s.message||"Ошибка загрузки разделов",console.error("Error fetching chapters:",s)}finally{d.value=!1}},p=async s=>{if((await m.fire({title:"Удалить раздел?",text:`Вы уверены, что хотите удалить раздел "${s.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Да, удалить",cancelButtonText:"Отмена",confirmButtonColor:"#dc2626"})).isConfirmed)try{if(!(await C(`/chapters/${s.id}`)).ok)throw new Error("Ошибка удаления раздела");await m.fire({title:"Раздел удален",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await r()}catch(o){await m.fire({title:"Ошибка",text:o.message||"Ошибка удаления раздела",icon:"error",confirmButtonText:"ОК"})}};return b(()=>{r()}),{loading:d,error:t,chapters:u,fetchChapters:r,deleteChapter:p}}},j={class:"chapters-page space-y-6"},E={class:"flex items-center justify-between"},N={key:0,class:"flex items-center justify-center py-12"},T={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},V={class:"text-destructive"},S={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},D={class:"divide-y divide-border"},F={class:"flex-1"},G={class:"font-medium text-foreground"},L={class:"text-sm text-muted-foreground"},M={class:"flex items-center gap-2"},q=["onClick"],z={key:3,class:"text-center py-12 bg-card rounded-lg border border-border"};function A(d,t,u,r,p,s){const i=w("router-link");return a(),n("div",j,[e("div",E,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Разделы"),e("p",{class:"text-muted-foreground mt-1"},"Управление разделами для блока решений")],-1)),g(i,{to:{name:"admin.decisions.chapters.create"},class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"},{default:x(()=>[...t[0]||(t[0]=[e("span",null,"+",-1),e("span",null,"Создать раздел",-1)])]),_:1})]),r.loading?(a(),n("div",N,[...t[2]||(t[2]=[e("p",{class:"text-muted-foreground"},"Загрузка разделов...",-1)])])):c("",!0),r.error?(a(),n("div",T,[e("p",V,l(r.error),1)])):c("",!0),!r.loading&&r.chapters.length>0?(a(),n("div",S,[e("div",D,[(a(!0),n(v,null,_(r.chapters,o=>(a(),n("div",{key:o.id,class:"p-4 hover:bg-muted/10 transition-colors flex items-center justify-between"},[e("div",F,[e("h3",G,l(o.name),1),e("p",L," Порядок: "+l(o.order)+" | "+l(o.is_active?"Активен":"Неактивен"),1)]),e("div",M,[g(i,{to:{name:"admin.decisions.chapters.edit",params:{id:o.id}},class:"px-3 py-1.5 text-sm bg-muted hover:bg-muted/80 rounded-lg transition-colors inline-block"},{default:x(()=>[...t[3]||(t[3]=[y(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:H=>r.deleteChapter(o),class:"px-3 py-1.5 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-lg transition-colors"}," Удалить ",8,q)])]))),128))])])):c("",!0),!r.loading&&r.chapters.length===0?(a(),n("div",z,[...t[4]||(t[4]=[e("p",{class:"text-muted-foreground"},"Разделы не найдены",-1)])])):c("",!0)])}const O=h(B,[["render",A]]);export{O as default};
