import{_ as E,r as B,c as f,o as m,d as j,a as F,n as O,b as n,e as I,t as b,w as D,f as L,g as W,h as x,i as C,j as V,T as A,F as N,k as Q,u as U,l as M,v as H,m as K,p as R,q as J,s as G,x as X}from"./app-B_qSWCTG.js";import{S as Y}from"./SEOHead-XiZUm880.js";import{u as Z}from"./usePreloader-CiHcCAv0.js";import{F as ee}from"./FeedbackModal-BaDeKxzf.js";import{W as te,F as se,H as ne}from"./WhyChooseUs-DrjR2ePS.js";import{D as oe}from"./DecisionCard-Chi47ARF.js";import{C as ae}from"./ConsentCheckbox-CGFciQA8.js";import{C as ie}from"./CaseCard-WoHOtPln.js";import{F as re}from"./FeedbackForm-Dk4PQnIU.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const le={name:"HeroBanner",components:{FeedbackModal:ee},props:{slug:{type:String,default:"home-banner"},title:{type:String,default:null},subtitle:{type:String,default:null},buttonText:{type:String,default:null},buttonLink:{type:String,default:null}},setup(s){const t=x(null),a=x(!0),e=x(!1),d=C(()=>s.title||t.value?.heading_1||t.value?.heading_2||null),o=C(()=>s.subtitle||t.value?.description||null),r=C(()=>s.buttonText||t.value?.button_text||null),u=C(()=>s.buttonLink||(t.value?.button_type==="url"?t.value?.button_value:null)),_=async()=>{try{const q=await fetch(`/api/public/banners/${s.slug}`);if(q.ok){const v=await q.json();v.data&&(t.value={...v.data,background_image:v.data.background_image?`/${v.data.background_image.replace(/^\//,"")}`:null,height_desktop:v.data.height_desktop||380,height_mobile:v.data.height_mobile||300})}}catch(q){console.error("Error fetching banner:",q)}finally{a.value=!1}},S=()=>{t.value.button_type==="method"&&(!t.value.button_value||t.value.button_value.trim()===""?e.value=!0:console.log("Method button clicked:",t.value.button_value))},y=()=>{e.value=!1},T=C(()=>{if(!t.value)return{};const q=t.value.height_desktop||380,v=t.value.height_mobile||300,z=q-v,p=`(${v}px + ${z} * ((100vw - 320px) / 880))`;return{"--banner-height-mobile":`${v}px`,"--banner-height-desktop":`${q}px`,minHeight:`${v}px`,height:`clamp(${v}px, ${p}, ${q}px)`}});return V(()=>{_()}),{banner:t,loading:a,bannerStyle:T,showFeedbackModal:e,displayTitle:d,displaySubtitle:o,displayButtonText:r,displayButtonLink:u,handleButtonClick:S,handleFeedbackSuccess:y}}},de={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},ce={class:"w-full max-w-2xl"},ue={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},me={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},fe={key:1,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function he(s,t,a,e,d,o){const r=B("FeedbackModal");return m(),f("div",de,[e.banner&&e.banner.is_active?(m(),f("section",{key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg overflow-hidden shadow-sm",style:O(e.bannerStyle)},[n("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:O({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),n("div",{class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full flex items-center",style:O(e.bannerStyle)},[n("div",ce,[e.displayTitle||e.displaySubtitle?(m(),f("div",ue,[e.displayTitle?(m(),f("h1",me,b(e.displayTitle),1)):j("",!0),e.displaySubtitle?(m(),f("p",fe,b(e.displaySubtitle),1)):j("",!0)])):j("",!0),e.displayButtonText?(m(),I(W(e.displayButtonLink?"a":"button"),{key:1,href:e.displayButtonLink||void 0,to:e.displayButtonLink&&!e.displayButtonLink.startsWith("http")?e.displayButtonLink:void 0,onClick:t[0]||(t[0]=u=>!e.displayButtonLink&&e.handleButtonClick),class:"inline-block px-8 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base"},{default:D(()=>[L(b(e.displayButtonText),1)]),_:1},8,["href","to"])):j("",!0)])],4)],4)):j("",!0),F(r,{"is-open":e.showFeedbackModal,onClose:t[1]||(t[1]=u=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])}const pe=E(le,[["render",he]]),ge={name:"Decisions",components:{DecisionCard:oe,TransitionGroup:A},props:{title:{type:String,default:null},subtitle:{type:String,default:null}},setup(s){const t=U(),a=x("Выберите решение под ваш участок"),e=x(!0),d=x(null),o=C(()=>s.title||a.value),r=async()=>{try{const y=await fetch("/api/public/decision-block/settings");if(!y.ok)throw new Error("Ошибка загрузки настроек");const T=await y.json();T.data&&T.data.title&&(a.value=T.data.title)}catch(y){console.error("Ошибка загрузки настроек:",y)}},u=x([]),_=C(()=>u.value.slice(0,9)),S=async()=>{e.value=!0,d.value=null;try{const T=(await t.dispatch("fetchPublicProducts",{minimal:!1})||[]).map(z=>({...z,category:"products"})),v=(await t.dispatch("fetchPublicServices",{minimal:!0})||[]).map(z=>({...z,category:"services"}));u.value=[...T,...v]}catch(y){console.error("Ошибка загрузки данных:",y),d.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{e.value=!1}};return V(async()=>{await Promise.all([r(),S()])}),{displayTitle:o,allItems:u,displayedItems:_,loading:e,error:d}}},xe={class:"w-full px-3 sm:px-4 md:px-5 py-20 md:py-24"},_e={class:"w-full max-w-[1200px] mx-auto"},ye={class:"flex justify-center mb-6 sm:mb-8"},be={class:"text-2xl md:text-3xl font-semibold text-gray-900"},ve={key:0,class:"flex justify-center mb-6 sm:mb-8"},we={class:"text-base sm:text-lg text-gray-600 text-center max-w-3xl"},ke={key:1,class:"flex justify-center items-center py-12"},Ce={key:2,class:"flex justify-center items-center py-12"},Se={class:"text-red-500"},qe={key:0,class:"relative"},je={key:1,class:"flex justify-center items-center py-12"},Te={key:2,class:"flex justify-center mt-8 sm:mt-10"};function $e(s,t,a,e,d,o){const r=B("DecisionCard"),u=B("router-link");return m(),f("div",xe,[n("div",_e,[n("div",ye,[n("h2",be,b(e.displayTitle),1)]),s.props.subtitle?(m(),f("div",ve,[n("p",we,b(s.props.subtitle),1)])):j("",!0),e.loading?(m(),f("div",ke,[...t[0]||(t[0]=[n("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(m(),f("div",Ce,[n("div",Se,b(e.error),1)])):(m(),f(N,{key:3},[e.displayedItems.length>0?(m(),f("div",qe,[F(A,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:D(()=>[(m(!0),f(N,null,Q(e.displayedItems,(_,S)=>(m(),I(r,{key:`${_.id}-${_.category}`,decision:_,slug:_.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(m(),f("div",je,[...t[1]||(t[1]=[n("div",{class:"text-gray-500"},"Продукты и услуги не найдены",-1)])])),e.displayedItems.length>0?(m(),f("div",Te,[F(u,{to:"/services",class:"px-8 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base inline-flex items-center justify-center"},{default:D(()=>[...t[2]||(t[2]=[L(" Услуги ",-1)])]),_:1})])):j("",!0)],64))])])}const ze=E(ge,[["render",$e],["__scopeId","data-v-adbd1fa7"]]),Ee={name:"ImagesCollect",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(s){const t={id:s.id||s.name,name:s.name||"",title:s.title||s.name||"",text:s.title||s.name||"",src:s.src||s.webp||""};this.$emit("answer",t),s.child?setTimeout(()=>{this.$emit("next",s.child)},300):setTimeout(()=>{this.$emit("next")},300)},handleImageError(s){s.target.src="/upload/quiz/placeholder.jpg"}}},Be={class:"mt-6"},Fe={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ie={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Ne={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},De={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4"},Ve=["onClick"],Qe={class:"relative aspect-[245/140] sm:aspect-[245/140] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},Me=["src","alt"],He={class:"absolute top-3 left-3 right-3 z-10"},Le={class:"text-white font-medium text-base sm:text-lg md:text-xl drop-shadow-lg"};function Pe(s,t,a,e,d,o){return m(),f("div",Be,[n("div",Fe,[n("div",Ie,b(a.data.id),1),n("div",Ne,b(a.data.question),1)]),n("div",De,[(m(!0),f(N,null,Q(a.data.selects,r=>(m(),f("div",{key:r.id,class:"relative group cursor-pointer",onClick:u=>o.handleSelect(r)},[n("div",Qe,[n("img",{src:r.src||r.webp||"/upload/quiz/placeholder.jpg",alt:r.name||r.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:t[0]||(t[0]=(...u)=>o.handleImageError&&o.handleImageError(...u))},null,40,Me),t[1]||(t[1]=n("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent pointer-events-none"},null,-1)),n("div",He,[n("h3",Le,b(r.title),1)])])],8,Ve))),128))])])}const Oe=E(Ee,[["render",Pe]]),We={name:"Selects",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(s){const t={id:s.id||s.name,name:s.name||"",title:s.title||s.name||"",text:s.name||s.title||""};this.$emit("answer",t),setTimeout(()=>{this.$emit("next")},300)}}},Ae={class:"mt-6"},Ue={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ke={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Re={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Je={class:"space-y-3 sm:space-y-4 max-w-2xl"},Ge=["onClick"];function Xe(s,t,a,e,d,o){return m(),f("div",Ae,[n("div",Ue,[n("div",Ke,b(a.data.id),1),n("div",Re,b(a.data.question),1)]),n("div",Je,[(m(!0),f(N,null,Q(a.data.selects,r=>(m(),f("button",{key:r.id,onClick:u=>o.handleSelect(r),class:"w-full px-6 py-4 text-left bg-white border-2 border-gray-200 rounded-lg hover:border-[#657C6C] hover:bg-gray-50 transition-all duration-200 text-base sm:text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"},b(r.name),9,Ge))),128))])])}const Ye=E(We,[["render",Xe]]),Ze={name:"Inputs",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],setup(s,{emit:t}){const a=x(s.data?.answer||""),e=C(()=>{const o=a.value;return o==null?!1:o.toString().trim()!==""});return{answerValue:a,isAnswerValid:e,handleNext:()=>{const o=a.value?.toString().trim()||"";o&&(s.data&&(s.data.answer=o),t("answer",o),s.data?.child?t("next",s.data.child):t("next"))}}}},et={class:"mt-6"},tt={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},st={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},nt={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},ot={class:"max-w-2xl"},at={class:"block text-sm font-medium text-gray-700 mb-2"},it={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},rt=["placeholder"],lt=["disabled"];function dt(s,t,a,e,d,o){return m(),f("div",et,[n("div",tt,[n("div",st,b(a.data.id),1),n("div",nt,b(a.data.question),1)]),n("div",ot,[n("label",at,b(a.data.label),1),n("div",it,[M(n("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.answerValue=r),type:"text",placeholder:a.data.placeholder,onKeyup:t[1]||(t[1]=K((...r)=>e.handleNext&&e.handleNext(...r),["enter"])),class:"flex-1 w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors disabled:opacity-50 focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none"},null,40,rt),[[H,e.answerValue]]),n("button",{onClick:t[2]||(t[2]=(...r)=>e.handleNext&&e.handleNext(...r)),disabled:!e.isAnswerValid,class:"px-6 sm:px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Далее ",8,lt)])])])}const ct=E(Ze,[["render",dt]]),ut={name:"Forms",components:{ConsentCheckbox:ae},props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],data(){return{consentError:!1}},computed:{isFormValid(){return this.data.form.name&&this.data.form.name.trim()!==""&&this.data.form.email&&this.data.form.email.trim()!==""&&this.data.form.phone&&this.data.form.phone.trim()!==""&&this.data.form.check}},methods:{async handleSubmit(){if(!this.data.form.check){this.consentError=!0;return}this.consentError=!1,this.isFormValid&&(this.$emit("answer",this.data.form),this.$emit("submit",{name:this.data.form.name,email:this.data.form.email,phone:this.data.form.phone}))}}},mt={class:"mt-6"},ft={class:"mb-6 px-2"},ht=["innerHTML"],pt={class:"max-w-2xl"},gt={class:"pt-2"},xt=["disabled"];function _t(s,t,a,e,d,o){const r=B("ConsentCheckbox");return m(),f("div",mt,[n("div",ft,[n("div",{class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900",innerHTML:a.data.question},null,8,ht)]),n("div",pt,[n("form",{onSubmit:t[5]||(t[5]=R((...u)=>o.handleSubmit&&o.handleSubmit(...u),["prevent"])),class:"space-y-4"},[n("div",null,[t[6]||(t[6]=n("label",{for:"quiz-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),M(n("input",{id:"quiz-name","onUpdate:modelValue":t[0]||(t[0]=u=>a.data.form.name=u),type:"text",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"Иван Иванов"},null,512),[[H,a.data.form.name]])]),n("div",null,[t[7]||(t[7]=n("label",{for:"quiz-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш email ",-1)),M(n("input",{id:"quiz-email","onUpdate:modelValue":t[1]||(t[1]=u=>a.data.form.email=u),type:"email",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"your@email.com"},null,512),[[H,a.data.form.email]])]),n("div",null,[t[8]||(t[8]=n("label",{for:"quiz-phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш телефон ",-1)),M(n("input",{id:"quiz-phone","onUpdate:modelValue":t[2]||(t[2]=u=>a.data.form.phone=u),type:"tel",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"+7 (999) 123-45-67"},null,512),[[H,a.data.form.phone]])]),n("div",gt,[F(r,{modelValue:a.data.form.check,"onUpdate:modelValue":t[3]||(t[3]=u=>a.data.form.check=u),error:d.consentError,"onUpdate:error":t[4]||(t[4]=u=>d.consentError=u),"input-id":"quiz-consent-checkbox"},null,8,["modelValue","error"])]),n("button",{type:"submit",disabled:!o.isFormValid,class:"w-full sm:w-auto px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Отправить ",8,xt)],32)])])}const yt=E(ut,[["render",_t]]),bt={name:"Thank",props:{data:{type:Object,default:()=>({})},numberQuestion:{type:Number,required:!0}}},vt={class:"mt-6"};function wt(s,t,a,e,d,o){return m(),f("div",vt,[...t[0]||(t[0]=[J('<div class="flex flex-col items-center justify-center py-8 sm:py-12 px-4"><div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-green-100 flex items-center justify-center mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl sm:text-2xl md:text-3xl font-semibold text-gray-900 text-center mb-4"> Спасибо! </h3><p class="text-base sm:text-lg text-gray-600 text-center max-w-md"> Наши специалисты свяжутся с вами в течение 15 минут </p></div>',1)])])}const kt=E(bt,[["render",wt]]),Ct={name:"Quiz",components:{"images-collect":Oe,selects:Ye,inputs:ct,forms:yt,thank:kt},props:{title:{type:String,default:"Подберите идеальное решение"},description:{type:String,default:"Ответьте на несколько вопросов, и мы предложим оптимальный вариант"}},setup(){const s=x(!0),t=x(null),a=x(null),e=x([]),d=x(1),o=x([]),r=x(!1),u=x({}),_=x(!1),S=x(!1),y=async()=>{try{const l=await fetch("/api/public/quiz-block/settings");if(!l.ok)throw new Error("Ошибка загрузки настроек");const c=await l.json();c.data?(r.value=c.data.is_active===!0,c.data.quiz_id?await T(c.data.quiz_id):s.value=!1):s.value=!1}catch(l){console.error("Ошибка загрузки настроек блока квиза:",l),s.value=!1}},T=async l=>{s.value=!0,t.value=null;try{const c=await fetch(`/api/public/quiz-block/quiz/${l}`);if(!c.ok)throw new Error("Ошибка загрузки квиза");const h=await c.json();h.data&&(a.value={id:h.data.id,title:h.data.title,description:h.data.description},e.value=(h.data.questions||[]).filter(w=>w.is_active!==!1).sort((w,k)=>(w.order||0)-(k.order||0)).map((w,k)=>({...w,displayId:k+1})),e.value.length>0&&(d.value=e.value[0].displayId,o.value=[]))}catch(c){t.value=c.message||"Ошибка загрузки квиза",console.error("Ошибка загрузки квиза:",c)}finally{s.value=!1}},q=l=>{const c={id:l.displayId||l.id||l.order,question:l.question_text||"",type:l.question_type,...l.question_data||{}};return(l.question_type==="images-collect"||l.question_type==="selects")&&l.question_data?.selects&&(c.selects=l.question_data.selects.map((h,w)=>({id:h.id||w+1,name:h.name||"",src:h.src||"",title:h.title||h.name||"",child:h.child||null}))),l.question_type==="inputs"&&l.question_data&&(c.label=l.question_data.label||"",c.placeholder=l.question_data.placeholder||"",c.child=l.question_data.child||null,c.answer=""),l.question_type==="forms"&&l.question_data&&(c.form=l.question_data.form||{name:"",email:"",phone:"",check:!1},c.child=l.question_data.child||null,c.question=l.question_text||l.question_data.question||""),c},v=C(()=>e.value.find(l=>l.displayId===d.value)),z=l=>{const c=d.value;if(c&&!o.value.includes(c)&&o.value.push(c),l){const h=e.value.findIndex(w=>w.displayId===d.value);l>0&&l<=e.value.length?d.value=l:h<e.value.length-1&&(d.value=e.value[h+1].displayId)}else{const h=e.value.findIndex(w=>w.displayId===d.value);h<e.value.length-1&&(d.value=e.value[h+1].displayId)}},i=()=>{const l=e.value.findIndex(c=>c.displayId===d.value);if(l>0){const c=e.value[l-1];if(c){const h=o.value.lastIndexOf(d.value);h!==-1&&(o.value=o.value.slice(0,h)),d.value=c.displayId}}},p=l=>{const c=e.value.find(h=>h.displayId===d.value);c&&(u.value[c.id]={question_id:c.id,question_text:c.question_text,question_type:c.question_type,answer:l})},g=async l=>{if(!(S.value||_.value)){S.value=!0;try{const c=e.value.filter($=>u.value[$.id]).map($=>u.value[$.id].answer),h=await fetch("/api/public/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({quiz_id:a.value.id,answers:c,contact:l})});let w="",k=null;try{if(w=await h.text(),w)try{k=JSON.parse(w)}catch($){throw console.error("Ошибка парсинга JSON:",$,"Response text:",w.substring(0,200)),new Error("Сервер вернул некорректный ответ. Пожалуйста, попробуйте еще раз.")}}catch($){throw console.error("Ошибка чтения ответа:",$),new Error("Ошибка получения ответа от сервера")}if(!h.ok){const $=k&&k.message||k&&k.error||`Ошибка сервера: ${h.status} ${h.statusText}`;throw new Error($)}if(!k)throw console.error("Сервер вернул пустой ответ. Response text:",w.substring(0,200)),new Error("Сервер вернул пустой ответ");if(typeof k!="object")throw console.error("Сервер вернул некорректный тип данных:",typeof k,k),new Error("Сервер вернул некорректный ответ");if(k.success===!0)return _.value=!0,{success:!0,message:k.message||"Спасибо за прохождение квиза!"};{const $=k.message||k.error||"Ошибка отправки результатов квиза";throw new Error($)}}catch(c){return console.error("Ошибка отправки результатов квиза:",c),{success:!1,message:c.message||"Ошибка отправки результатов квиза. Пожалуйста, попробуйте еще раз."}}finally{S.value=!1}}},P=async l=>{const c=await g(l);c.success?z():alert(c.message||"Произошла ошибка при отправке результатов. Пожалуйста, попробуйте еще раз.")};return V(()=>{y()}),{loading:s,error:t,quizData:a,questions:e,currentQuestionNumber:d,currentQuestion:v,isActive:r,isCompleted:_,isSubmitting:S,formatQuestionData:q,goToNext:z,goToPrevious:i,handleAnswer:p,handleSubmit:P,submitQuiz:g,questionHistory:o}}},St={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},qt={class:"w-full max-w-[1200px] mx-auto"},jt={class:"flex flex-col items-center mb-6 sm:mb-8"},Tt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900 text-center mb-3"},$t={key:0,class:"text-gray-600 text-center text-base sm:text-lg"},zt={key:0,class:"flex justify-center items-center py-12"},Et={key:1,class:"flex justify-center items-center py-12"},Bt={class:"text-red-500"},Ft={key:0,class:"mb-4"};function It(s,t,a,e,d,o){return e.isActive?(m(),f("div",St,[n("div",qt,[n("div",jt,[n("h2",Tt,b(e.quizData?.title||a.title),1),e.quizData?.description||a.description?(m(),f("p",$t,b(e.quizData?.description||a.description),1)):j("",!0)]),e.loading?(m(),f("div",zt,[...t[1]||(t[1]=[n("div",{class:"text-gray-500"},"Загрузка квиза...",-1)])])):e.error?(m(),f("div",Et,[n("div",Bt,b(e.error),1)])):e.currentQuestion?(m(),I(G,{key:2,name:"quiz-fade",mode:"out-in"},{default:D(()=>[n("div",null,[e.questionHistory.length>0||e.currentQuestionNumber>1?(m(),f("div",Ft,[n("button",{onClick:t[0]||(t[0]=(...r)=>e.goToPrevious&&e.goToPrevious(...r)),class:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm sm:text-base"},[...t[2]||(t[2]=[n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),L(" Назад ",-1)])])])):j("",!0),(m(),I(W(e.currentQuestion.question_type),{key:e.currentQuestion.id,data:e.formatQuestionData(e.currentQuestion),"number-question":e.currentQuestion.id,onNext:e.goToNext,onAnswer:e.handleAnswer,onSubmit:e.handleSubmit},null,40,["data","number-question","onNext","onAnswer","onSubmit"]))])]),_:1})):j("",!0)])])):j("",!0)}const Nt=E(Ct,[["render",It],["__scopeId","data-v-1bcb4acb"]]),Dt={name:"CasesBlock",components:{CaseCard:ie},setup(){const s=x(null),t=x([]),a=x(!0),e=async()=>{try{const o=await fetch("/api/public/cases-block/settings");if(o.ok){const r=await o.json();r.data&&(s.value=r.data,s.value.case_ids&&s.value.case_ids.length>0&&await d(s.value.case_ids))}}catch(o){console.error("Error fetching Cases block settings:",o)}finally{a.value=!1}},d=async o=>{try{const r=o.join(","),u=await fetch(`/api/public/cases?ids=${r}&with=image,images`);if(u.ok){const _=await u.json();if(_.data){const S=new Map(_.data.map(y=>[y.id,y]));t.value=o.map(y=>S.get(y)).filter(y=>y!==void 0)}}}catch(r){console.error("Error fetching cases:",r)}};return V(()=>{e()}),{settings:s,cases:t,loading:a}}},Vt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-20 md:py-24 bg-background"},Qt={class:"w-full max-w-[1200px] mx-auto"},Mt={key:0,class:"flex justify-center mb-6 md:mb-8"},Ht={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Lt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"},Pt={class:"flex justify-center mt-8 md:mt-12"};function Ot(s,t,a,e,d,o){const r=B("CaseCard"),u=B("router-link");return e.settings&&e.settings.is_active&&e.cases.length>0?(m(),f("section",Vt,[n("div",Qt,[e.settings.title?(m(),f("div",Mt,[n("h2",Ht,b(e.settings.title),1)])):j("",!0),n("div",Lt,[(m(!0),f(N,null,Q(e.cases,_=>(m(),I(r,{key:_.id,"case-item":_},null,8,["case-item"]))),128))]),n("div",Pt,[F(u,{to:"/cases",class:"inline-flex items-center justify-center px-8 py-3 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base"},{default:D(()=>[...t[0]||(t[0]=[L(" Смотреть все кейсы ",-1)])]),_:1})])])])):j("",!0)}const Wt=E(Dt,[["render",Ot]]),At={HeroBanner:pe,HowWork:ne,Decisions:ze,Quiz:Nt,Faq:se,WhyChooseUs:te,CasesBlock:Wt,FeedbackForm:re},Ut={name:"Home",components:{SEOHead:Y},setup(){const{hidePreloader:s}=Z(),t=x([]),a=x(!0),e=x(null),d={site_name:"МНКА - Профессиональные услуги по работе с земельными участками",site_description:"Профессиональные услуги по подбору и оформлению земельных участков. Кадастровые работы, консультации, оформление документов.",site_keywords:"земельные участки, кадастр, оформление документов, недвижимость, МНКА",default_og_image:"",og_type:"website"},o=x(d),r=C(()=>t.value.map(i=>{const p=At[i.component];if(!p)return console.warn(`Component ${i.component} not found`),null;const g=i.settings||{};return e.value&&(i.component==="HeroBanner"&&e.value.hero_title?(g.title=e.value.hero_title,g.subtitle=e.value.hero_subtitle,g.buttonText=e.value.hero_button_text,g.buttonLink=e.value.hero_button_link):i.component==="Decisions"&&e.value.select_title?(g.title=e.value.select_title,g.subtitle=e.value.select_subtitle):i.component==="HowWork"&&e.value.work_title?(g.title=e.value.work_title,g.items=e.value.work_items,g.buttonText=e.value.work_button_text,g.buttonLink=e.value.work_button_link):i.component==="Faq"&&e.value.faq_title?(g.title=e.value.faq_title,g.items=e.value.faq_items):i.component==="WhyChooseUs"&&e.value.benefits_title?(g.title=e.value.benefits_title,g.items=e.value.benefits_items):i.component==="FeedbackForm"&&e.value.contact_title&&(g.title=e.value.contact_title,g.subtitle=e.value.contact_subtitle,g.hintText=e.value.contact_form_hint_text)),{key:i.key,component:p,props:g}}).filter(i=>i!==null)),u=async()=>{try{const i=await fetch("/api/public/home-page-blocks");if(i.ok){const p=await i.json();p.data&&(t.value=p.data)}}catch(i){console.error("Error fetching home page blocks:",i),t.value=[{key:"hero_banner",component:"HeroBanner",settings:{}},{key:"decisions",component:"Decisions",settings:{}},{key:"quiz",component:"Quiz",settings:{}},{key:"how_work",component:"HowWork",settings:{}},{key:"faq",component:"Faq",settings:{}},{key:"why_choose_us",component:"WhyChooseUs",settings:{}},{key:"cases_block",component:"CasesBlock",settings:{}},{key:"feedback_form",component:"FeedbackForm",settings:{title:"Остались вопросы?",description:"Напишите нам, и мы с удовольствием ответим на все ваши вопросы"}}]}finally{a.value=!1,s()}},_=C(()=>window.location.origin+"/"),S=C(()=>{const i=[],p=o.value.website_schema||{"@context":"https://schema.org","@type":"WebSite",name:o.value.site_name||"МНКА",description:o.value.site_description||"Профессиональные услуги по подбору и оформлению земельных участков",url:window.location.origin};i.push(p);const g=o.value.organization_schema||{"@context":"https://schema.org","@type":"Organization",name:o.value.site_name||"МНКА",url:window.location.origin};return i.push(g),i}),y=async()=>{try{const i=await fetch("/api/public/seo-settings");if(i.ok){const p=await i.json();if(p.data){const g=p.data.site_name&&p.data.site_name.trim()!==""&&p.data.site_name!=="Laravel"&&p.data.site_name.toLowerCase()!=="laravel",P=p.data.site_description&&p.data.site_description.trim()!=="",l={...d,...p.data,site_name:g?p.data.site_name:d.site_name,site_description:P?p.data.site_description:d.site_description,site_keywords:p.data.site_keywords&&p.data.site_keywords.trim()!==""?p.data.site_keywords:d.site_keywords};o.value=l}}}catch(i){console.error("Error fetching SEO settings:",i)}},T=async()=>{try{const i=await fetch("/api/public/home-page-settings");if(i.ok){const p=await i.json();p.data&&(e.value=p.data)}}catch(i){console.error("Error fetching home page settings:",i)}};V(()=>{y(),T(),u()});const q=C(()=>{const i=o.value.site_name;return!i||i.trim()===""||i==="Laravel"||i.toLowerCase()==="laravel"?d.site_name:i}),v=C(()=>{const i=o.value.site_description;return!i||i.trim()===""?d.site_description:i}),z=C(()=>{const i=o.value.site_keywords;return!i||i.trim()===""?d.site_keywords:i});return{blocks:t,loading:a,orderedBlocks:r,seoSettings:o,seoTitle:q,seoDescription:v,seoKeywords:z,canonicalUrl:_,combinedSchema:S}}},Kt={class:"home-page"};function Rt(s,t,a,e,d,o){const r=B("SEOHead");return m(),f("div",Kt,[F(r,{title:e.seoTitle,description:e.seoDescription,keywords:e.seoKeywords,"og-image":e.seoSettings.default_og_image,"og-type":e.seoSettings.og_type||"website",canonical:e.canonicalUrl,schema:e.combinedSchema},null,8,["title","description","keywords","og-image","og-type","canonical","schema"]),(m(!0),f(N,null,Q(e.orderedBlocks,(u,_)=>(m(),I(W(u.component),X({key:u.key},{ref_for:!0},u.props),null,16))),128))])}const as=E(Ut,[["render",Rt]]);export{as as default};
