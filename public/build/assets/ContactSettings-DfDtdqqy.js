import{_ as y,c as r,b as e,d as b,t as p,l as a,v as i,F as k,k as h,h as g,j as w,J as v,o as d}from"./app-Dfv-mbMf.js";import{S as f}from"./sweetalert2.esm.all-C0u8rGqG.js";const _={name:"ContactSettings",setup(){const u=g(!0),t=g(!1),n=g(null),s=g(null),m=async()=>{u.value=!0,n.value=null;try{const l=await v.get("/api/v1/contact-settings");s.value=l.data.data,(!s.value.socials||!Array.isArray(s.value.socials))&&(s.value.socials=[])}catch(l){n.value=l.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching contact settings:",l)}finally{u.value=!1}},x=()=>{s.value.socials||(s.value.socials=[]),s.value.socials.push({icon:"",title:"",link:""})},o=l=>{s.value.socials&&s.value.socials.length>l&&s.value.socials.splice(l,1)},c=async()=>{t.value=!0,n.value=null;try{const l=await v.put("/api/v1/contact-settings",s.value);await f.fire({icon:"success",title:"Успешно!",text:"Настройки контактов успешно сохранены.",timer:2e3,showConfirmButton:!1})}catch(l){n.value=l.response?.data?.message||"Ошибка сохранения настроек",await f.fire({icon:"error",title:"Ошибка",text:n.value})}finally{t.value=!1}};return w(()=>{m()}),{loading:u,saving:t,error:n,settings:s,addSocial:x,removeSocial:o,saveSettings:c}}},S={class:"contact-settings-page space-y-6"},V={key:0,class:"flex items-center justify-center py-12"},U={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},C={class:"text-destructive"},j={key:2,class:"space-y-6"},B={class:"bg-card rounded-lg border border-border p-6 space-y-6"},E={class:"space-y-4"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D={class:"bg-card rounded-lg border border-border p-6 space-y-6"},F={class:"flex items-center justify-between"},M={key:0,class:"text-center py-4 text-muted-foreground"},N={key:1,class:"space-y-4"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},L=["onUpdate:modelValue"],T=["onUpdate:modelValue"],q={class:"flex gap-2"},z=["onUpdate:modelValue"],G=["onClick"],H={class:"flex items-center justify-end gap-4"},I=["disabled"];function K(u,t,n,s,m,x){return d(),r("div",S,[t[16]||(t[16]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"Настройки контактов"),e("p",{class:"text-muted-foreground mt-1"}," Редактирование контактной информации, которая отображается на странице контактов. ")],-1)),s.loading?(d(),r("div",V,[...t[6]||(t[6]=[e("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):b("",!0),s.error?(d(),r("div",U,[e("p",C,p(s.error),1)])):b("",!0),!s.loading&&s.settings?(d(),r("div",j,[e("div",B,[e("div",E,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-foreground"},"Контактная информация",-1)),e("div",A,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Телефон ",-1)),a(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.settings.phone=o),placeholder:"+7 (495) 123-45-67",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,s.settings.phone]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Email ",-1)),a(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=o=>s.settings.email=o),placeholder:"info@example.com",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,s.settings.email]])])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Адрес ",-1)),a(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.settings.address=o),rows:"2",placeholder:"г. Москва, ул. Примерная, д. 1",class:"w-full px-3 py-2 border border-border rounded bg-background text-sm"},null,512),[[i,s.settings.address]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Время работы ",-1)),a(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.settings.working_hours=o),placeholder:"Пн-Пт: 9:00 - 18:00",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[i,s.settings.working_hours]])])])]),e("div",D,[e("div",F,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-foreground"},"Социальные сети",-1)),e("button",{onClick:t[4]||(t[4]=(...o)=>s.addSocial&&s.addSocial(...o)),class:"px-4 py-2 text-sm bg-accent text-accent-foreground rounded hover:bg-accent/90"}," + Добавить ")]),s.settings.socials&&s.settings.socials.length===0?(d(),r("div",M," Нет добавленных социальных сетей ")):(d(),r("div",N,[(d(!0),r(k,null,h(s.settings.socials,(o,c)=>(d(),r("div",{key:c,class:"p-4 border border-border rounded-lg space-y-3"},[e("div",J,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Иконка (vk, telegram, instagram) ",-1)),a(e("input",{type:"text","onUpdate:modelValue":l=>o.icon=l,placeholder:"vk",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,L),[[i,o.icon]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Название ",-1)),a(e("input",{type:"text","onUpdate:modelValue":l=>o.title=l,placeholder:"ВКонтакте",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,8,T),[[i,o.title]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Ссылка ",-1)),e("div",q,[a(e("input",{type:"url","onUpdate:modelValue":l=>o.link=l,placeholder:"https://vk.com/...",class:"flex-1 h-10 px-3 border border-border rounded bg-background text-sm"},null,8,z),[[i,o.link]]),e("button",{onClick:l=>s.removeSocial(c),class:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," Удалить ",8,G)])])])]))),128))]))]),e("div",H,[e("button",{onClick:t[5]||(t[5]=(...o)=>s.saveSettings&&s.saveSettings(...o)),disabled:s.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},p(s.saving?"Сохранение...":"Сохранить настройки"),9,I)])])):b("",!0)])}const Q=y(_,[["render",K]]);export{Q as default};
