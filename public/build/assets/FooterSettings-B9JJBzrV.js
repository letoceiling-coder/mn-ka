import{_ as j,c as d,b as t,d as x,t as p,l as n,v as r,p as I,a as C,h as g,j as M,r as U,J as k,o as i}from"./app-CFNk1V-e.js";import{S as y}from"./sweetalert2.esm.all-C0u8rGqG.js";import F from"./Media-BR9d4NIS.js";import"./api-V9GPpd21.js";import"./index-D5r8uFEE.js";/* empty css                        */const G={name:"FooterSettings",components:{Media:F},setup(){const c=g(!0),e=g(!1),a=g(null),o=g(null),m=g(!1),u=g(null),f=s=>((!s.social_networks||typeof s.social_networks!="object")&&(s.social_networks={vk:null,instagram:null,telegram:null}),typeof s.vk_icon_id>"u"&&(s.vk_icon_id=null),typeof s.instagram_icon_id>"u"&&(s.instagram_icon_id=null),typeof s.telegram_icon_id>"u"&&(s.telegram_icon_id=null),typeof s.vk_icon>"u"&&(s.vk_icon=null),typeof s.instagram_icon>"u"&&(s.instagram_icon=null),typeof s.telegram_icon>"u"&&(s.telegram_icon=null),typeof s.vk_icon_svg>"u"&&(s.vk_icon_svg=null),typeof s.instagram_icon_svg>"u"&&(s.instagram_icon_svg=null),typeof s.telegram_icon_svg>"u"&&(s.telegram_icon_svg=null),s),l=async()=>{c.value=!0,a.value=null;try{const s=await k.get("/api/v1/footer-settings"),b=f(s.data.data||{});o.value=b}catch(s){a.value=s.response?.data?.message||"Ошибка загрузки настроек",console.error("Error fetching footer settings:",s)}finally{c.value=!1}},_=async()=>{if(o.value){e.value=!0,a.value=null;try{const s={...o.value};await k.put("/api/v1/footer-settings",s),await y.fire({icon:"success",title:"Успешно!",text:"Настройки футера успешно сохранены.",timer:2e3,showConfirmButton:!1})}catch(s){a.value=s.response?.data?.message||"Ошибка сохранения настроек",await y.fire({icon:"error",title:"Ошибка",text:a.value})}finally{e.value=!1}}},w=s=>{u.value=s,m.value=!0},V=s=>{if(!s||s.type!=="photo"||!u.value||!o.value)return;const b=u.value,v=`${b}_icon_id`,h=`${b}_icon`;o.value[v]=s.id,o.value[h]=s,u.value=null,m.value=!1},S=s=>{if(!o.value)return;const b=`${s}_icon_id`,v=`${s}_icon`;o.value[b]=null,o.value[v]=null};return M(()=>{l()}),{loading:c,saving:e,error:a,settings:o,saveSettings:_,showMediaModal:m,selectedSocialKey:u,selectIcon:w,handleIconSelected:V,clearIcon:S}}},K={class:"footer-settings-page space-y-6"},T={key:0,class:"flex items-center justify-center py-12"},B={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},N={class:"text-destructive"},D={key:2,class:"space-y-6"},E={class:"bg-card rounded-lg border border-border p-6 space-y-6"},z={class:"bg-card rounded-lg border border-border p-6 space-y-6"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"bg-card rounded-lg border border-border p-6 space-y-6"},L={class:"space-y-6"},O={class:"space-y-3"},P={class:"space-y-2"},Q={key:0,class:"flex items-center gap-3"},R=["src"],W={class:"flex gap-2"},X={key:1},Y={class:"space-y-3"},Z={class:"space-y-2"},$={key:0,class:"flex items-center gap-3"},ee=["src"],te={class:"flex gap-2"},oe={key:1},le={class:"space-y-3"},se={class:"space-y-2"},ne={key:0,class:"flex items-center gap-3"},re=["src"],de={class:"flex gap-2"},ie={key:1},ae={class:"flex justify-end"},ue=["disabled"],be={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col my-auto"},ge={class:"p-4 border-b border-border flex items-center justify-between flex-shrink-0"},ce={class:"flex-1 overflow-auto h-full"};function me(c,e,a,o,m,u){const f=U("Media");return i(),d("div",K,[e[50]||(e[50]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Настройки футера"),t("p",{class:"text-muted-foreground mt-1"}," Редактирование настроек футера сайта ")],-1)),o.loading?(i(),d("div",T,[...e[27]||(e[27]=[t("p",{class:"text-muted-foreground"},"Загрузка настроек...",-1)])])):x("",!0),o.error?(i(),d("div",B,[t("p",N,p(o.error),1)])):x("",!0),!o.loading&&o.settings?(i(),d("div",D,[t("div",E,[e[31]||(e[31]=t("h2",{class:"text-xl font-semibold text-foreground"},"Основная информация",-1)),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Заголовок ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o.settings.title=l),placeholder:"Контакты",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.title]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Копирайт ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>o.settings.copyright=l),placeholder:"MNKA 2025. Все права защищены",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.copyright]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Ссылка на политику конфиденциальности ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>o.settings.privacy_policy_link=l),placeholder:"/police",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.privacy_policy_link]])])]),t("div",z,[e[38]||(e[38]=t("h2",{class:"text-xl font-semibold text-foreground"},"Контактная информация",-1)),t("div",A,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Метка отдела ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>o.settings.department_label=l),placeholder:"Отдел",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.department_label]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Телефон отдела ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>o.settings.department_phone=l),placeholder:"+7 (495) 123-45-67",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.department_phone]])])]),t("div",J,[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Метка объектов ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>o.settings.objects_label=l),placeholder:"Объекты",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.objects_label]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Телефон объектов ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>o.settings.objects_phone=l),placeholder:"+7 (495) 123-45-68",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.objects_phone]])])]),t("div",q,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Метка вопросов ",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>o.settings.issues_label=l),placeholder:"Вопросы",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.issues_label]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Email для вопросов ",-1)),n(t("input",{type:"email","onUpdate:modelValue":e[8]||(e[8]=l=>o.settings.issues_email=l),placeholder:"info@example.com",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.issues_email]])])])]),t("div",H,[e[48]||(e[48]=t("h2",{class:"text-xl font-semibold text-foreground"},"Социальные сети",-1)),t("div",L,[t("div",O,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," VK ",-1)),n(t("input",{type:"url","onUpdate:modelValue":e[9]||(e[9]=l=>o.settings.social_networks.vk=l),placeholder:"https://vk.com/example",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.social_networks.vk]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Иконка для VK (SVG код) ",-1)),n(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.settings.vk_icon_svg=l),placeholder:"Вставьте SVG код иконки",rows:"4",class:"w-full px-3 py-2 border border-border rounded bg-background text-xs font-mono"},null,512),[[r,o.settings.vk_icon_svg]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Или выберите изображение из медиа ",-1)),t("div",P,[o.settings.vk_icon?(i(),d("div",Q,[t("img",{src:o.settings.vk_icon.url,alt:"VK icon",class:"w-[60px] h-[60px] object-contain rounded border border-border bg-background"},null,8,R),t("div",W,[t("button",{type:"button",onClick:e[11]||(e[11]=l=>o.selectIcon("vk")),class:"px-3 py-1.5 text-xs bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20"}," Изменить "),t("button",{type:"button",onClick:e[12]||(e[12]=l=>o.clearIcon("vk")),class:"px-3 py-1.5 text-xs bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20"}," Удалить ")])])):(i(),d("div",X,[t("button",{type:"button",onClick:e[13]||(e[13]=l=>o.selectIcon("vk")),class:"w-full h-10 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 text-xs text-muted-foreground"}," Выбрать иконку VK из медиа ")]))])])]),t("div",Y,[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Instagram ",-1)),n(t("input",{type:"url","onUpdate:modelValue":e[14]||(e[14]=l=>o.settings.social_networks.instagram=l),placeholder:"https://instagram.com/example",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.social_networks.instagram]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Иконка для Instagram (SVG код) ",-1)),n(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=l=>o.settings.instagram_icon_svg=l),placeholder:"Вставьте SVG код иконки",rows:"4",class:"w-full px-3 py-2 border border-border rounded bg-background text-xs font-mono"},null,512),[[r,o.settings.instagram_icon_svg]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Или выберите изображение из медиа ",-1)),t("div",Z,[o.settings.instagram_icon?(i(),d("div",$,[t("img",{src:o.settings.instagram_icon.url,alt:"Instagram icon",class:"w-[60px] h-[60px] object-contain rounded border border-border bg-background"},null,8,ee),t("div",te,[t("button",{type:"button",onClick:e[16]||(e[16]=l=>o.selectIcon("instagram")),class:"px-3 py-1.5 text-xs bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20"}," Изменить "),t("button",{type:"button",onClick:e[17]||(e[17]=l=>o.clearIcon("instagram")),class:"px-3 py-1.5 text-xs bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20"}," Удалить ")])])):(i(),d("div",oe,[t("button",{type:"button",onClick:e[18]||(e[18]=l=>o.selectIcon("instagram")),class:"w-full h-10 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 text-xs text-muted-foreground"}," Выбрать иконку Instagram из медиа ")]))])])]),t("div",le,[t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-foreground mb-2"}," Telegram ",-1)),n(t("input",{type:"url","onUpdate:modelValue":e[19]||(e[19]=l=>o.settings.social_networks.telegram=l),placeholder:"https://t.me/example",class:"w-full h-10 px-3 border border-border rounded bg-background text-sm"},null,512),[[r,o.settings.social_networks.telegram]])]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Иконка для Telegram (SVG код) ",-1)),n(t("textarea",{"onUpdate:modelValue":e[20]||(e[20]=l=>o.settings.telegram_icon_svg=l),placeholder:"Вставьте SVG код иконки",rows:"4",class:"w-full px-3 py-2 border border-border rounded bg-background text-xs font-mono"},null,512),[[r,o.settings.telegram_icon_svg]])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-xs font-medium text-muted-foreground mb-1"}," Или выберите изображение из медиа ",-1)),t("div",se,[o.settings.telegram_icon?(i(),d("div",ne,[t("img",{src:o.settings.telegram_icon.url,alt:"Telegram icon",class:"w-[60px] h-[60px] object-contain rounded border border-border bg-background"},null,8,re),t("div",de,[t("button",{type:"button",onClick:e[21]||(e[21]=l=>o.selectIcon("telegram")),class:"px-3 py-1.5 text-xs bg-accent/10 text-accent border border-accent/40 rounded hover:bg-accent/20"}," Изменить "),t("button",{type:"button",onClick:e[22]||(e[22]=l=>o.clearIcon("telegram")),class:"px-3 py-1.5 text-xs bg-destructive/10 text-destructive border border-destructive/40 rounded hover:bg-destructive/20"}," Удалить ")])])):(i(),d("div",ie,[t("button",{type:"button",onClick:e[23]||(e[23]=l=>o.selectIcon("telegram")),class:"w-full h-10 border-2 border-dashed border-border rounded flex items-center justify-center hover:bg-muted/10 text-xs text-muted-foreground"}," Выбрать иконку Telegram из медиа ")]))])])])])]),t("div",ae,[t("button",{onClick:e[24]||(e[24]=(...l)=>o.saveSettings&&o.saveSettings(...l)),disabled:o.saving,class:"px-6 py-2 bg-accent text-accent-foreground rounded hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},p(o.saving?"Сохранение...":"Сохранить настройки"),9,ue)])])):x("",!0),o.showMediaModal?(i(),d("div",{key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto p-4",onClick:e[26]||(e[26]=I(l=>o.showMediaModal=!1,["self"]))},[t("div",be,[t("div",ge,[e[49]||(e[49]=t("h3",{class:"text-lg font-semibold"},"Выберите иконку",-1)),t("button",{onClick:e[25]||(e[25]=l=>o.showMediaModal=!1),class:"text-muted-foreground hover:text-foreground w-8 h-8 flex items-center justify-center rounded hover:bg-muted/10"}," ✕ ")]),t("div",ce,[C(f,{"selection-mode":!0,"count-file":1,onFileSelected:o.handleIconSelected},null,8,["onFileSelected"])])])])):x("",!0)])}const _e=j(G,[["render",me]]);export{_e as default};
