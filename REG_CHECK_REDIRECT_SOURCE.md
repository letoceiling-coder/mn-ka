# Проверка источника редиректа 301 на HTTPS

## Диагностика

```bash
cd /var/www/u3384357/data/www/mn-ka.ru

# 1. Проверьте полный ответ с переходом по редиректам
curl -v -L https://mn-ka.ru 2>&1 | grep -i "location\|301\|302\|< HTTP"

# 2. Проверьте, что возвращает сайт (HTML)
curl -s https://mn-ka.ru | head -30

# 3. Проверьте, может ли сайт открыться напрямую
curl -s https://mn-ka.ru/public/index.php | head -30

# 4. Проверьте конфигурацию nginx (если доступна)
# Обычно конфигурация находится в ISPmanager и недоступна через SSH
```

## Возможные причины редиректа 301

1. **Правило "Redirect Trailing Slashes" в `public/.htaccess`** — но оно должно срабатывать только для URI, оканчивающихся на `/`
2. **Редирект в настройках ISPmanager/nginx** — проверьте настройки сайта в панели
3. **Кеш браузера** — очистите кеш или откройте в режиме инкогнито

## Решение

Если редирект 301 происходит от nginx/ISPmanager:
- Отключите редирект HTTP → HTTPS в настройках сайта в ISPmanager
- Редирект уже настроен в `.htaccess`

Если редирект от правила "Redirect Trailing Slashes":
- Это нормальное поведение Laravel (редирект `/` → `/`)
- Проверьте, открывается ли сайт в браузере корректно

