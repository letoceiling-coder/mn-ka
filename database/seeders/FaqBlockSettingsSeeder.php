<?php

namespace Database\Seeders;

use App\Models\FaqBlockSettings;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class FaqBlockSettingsSeeder extends Seeder
{
    use WithoutModelEvents;

    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $this->command->info('Начало создания настроек блока FAQ...');

        // Проверяем, существует ли уже запись
        $existing = FaqBlockSettings::first();
        if ($existing) {
            $this->command->warn('Настройки блока FAQ уже существуют. Обновляю данные...');
            
            // Обновляем данные из HTML
            $existing->update([
                'title' => 'Частые вопросы',
                'is_active' => true,
                'faq_items' => $this->getFaqItems(),
            ]);
            
            $this->command->info("✓ Настройки блока FAQ обновлены (ID: {$existing->id})");
            return;
        }

        // Данные для блока FAQ из предоставленного HTML
        $faqItems = $this->getFaqItems();

        // Создаем настройки блока
        $settings = FaqBlockSettings::create([
            'title' => 'Частые вопросы',
            'is_active' => true,
            'faq_items' => $faqItems,
            'additional_settings' => null,
        ]);

        $this->command->info("✓ Настройки блока FAQ созданы (ID: {$settings->id})");
        $this->command->info("✓ Добавлено вопросов: " . count($faqItems));
        $this->command->info('Готово! Блок FAQ успешно создан.');
    }

    /**
     * Получить массив вопросов и ответов из HTML
     */
    private function getFaqItems(): array
    {
        return [
            [
                'question' => 'Сколько лет вы работаете в этой сфере?',
                'answer' => 'Компания «МНКА» ведёт деятельность в сфере девелопмента, землеустроительных и инженерных услуг с 2013 года, то есть более 12 лет. За это время сформирована команда экспертов с опытом работы в государственных структурах, проектных институтах и частных девелоперских компаниях.',
            ],
            [
                'question' => 'В каких городах/регионах ведёте деятельность?',
                'answer' => 'География проектов MNKA охватывает всю России, обеспечивая комплексное сопровождение девелоперских проектов — от анализа земельных активов до получения разрешительной документации. Мы особенно активно развиваем направления в регионах с высоким потенциалом девелопмента: Москва и Московская область, Свердловская область, Татарстан, Юг России (Краснодар, Ставрополь, Ростов-на-Дону, Волгоград), Республика Крым, Севастополь, Северный Кавказ и Северо-Запад (Санкт-Петербург и Ленинградская область).',
            ],
            [
                'question' => 'Какая основная специализация - проектирование, сопровождение, экспертизы, изыскания и т.д.?',
                'answer' => 'Наша основная специализация - комплексное проектирование и сопровождение объектов строительства: от концепции и инженерных изысканий до прохождения экспертиз и получения разрешительной документации.',
            ],
            [
                'question' => 'Кто ваши основные клиенты - физлица, застройщики, девелоперы, государственные структуры, подрядчики?',
                'answer' => 'Физлица

Застройщики

Девелоперы

Технические заказчики',
            ],
            [
                'question' => 'Есть ли у компании лицензии, СРО, сертификаты, допуски?',
                'answer' => 'Нет, мы работаем через подрядчиков с наличием лицензии, СРО, сертификатов, различных допусков.',
            ],
            [
                'question' => 'Какой у вас масштаб - собственное проектное бюро, команда специалистов, партнёрская сеть?',
                'answer' => 'Группа компаний МНКА Девелопмент представляет собой комплексную структуру, объединяющую собственную команду специалистов, проектное бюро и широкую партнёрскую сеть по всей России.',
            ],
        ];
    }
}
