# –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –¥–µ–ø–ª–æ—è

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –£–±—Ä–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `/public/build` –∏–∑ `.gitignore`
2. ‚úÖ –°–æ–∑–¥–∞–Ω middleware `VerifyDeployToken` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞
3. ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä `DeployController` —Å –ø–æ–ª–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –¥–µ–ø–ª–æ—è
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `POST /api/deploy` –≤ `routes/api.php`
5. ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω middleware `deploy.token` –≤ `bootstrap/app.php`
6. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ Artisan –∫–æ–º–∞–Ω–¥–∞ `Deploy` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
7. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `.env.example` —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
8. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `SERVER_SETUP.md` –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìã –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

#### 1.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```env
# Deploy Configuration
SERVER_URL=https://post-ads.ru
DEPLOY_TOKEN=your-secure-deploy-token-here-min-32-chars
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** 
- `DEPLOY_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π —Ç–æ–∫–µ–Ω (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `openssl rand -hex 32`
- `SERVER_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–∞–∑–æ–≤—ã–º URL –±–µ–∑ –ø—É—Ç–∏ `/api/deploy` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://post-ads.ru`)

#### 1.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞:

```bash
php artisan list | grep deploy
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `deploy`

#### 1.3. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (dry-run)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```bash
php artisan deploy --dry-run
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ —à–∞–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### 2.1. –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∏ –ø—É—à–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–≤—ã–π —Ä–∞–∑:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/your/project
git pull origin main
composer install --no-dev --optimize-autoloader
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

#### 2.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```env
# Deploy Configuration
DEPLOY_TOKEN=your-secure-deploy-token-here-min-32-chars  # –¢–û–¢ –ñ–ï, —á—Ç–æ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
PHP_PATH=php8.2  # –∏–ª–∏ –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É PHP
```

#### 2.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞:
- –ù–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `git`, `composer`, `php`
- –ù–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
- –ù–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `git pull` (–Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã SSH –∫–ª—é—á–∏ –∏–ª–∏ credentials)

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–º. –≤ `SERVER_SETUP.md`.

---

### –®–∞–≥ 3: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π

#### 3.1. –¢–µ—Å—Ç API endpoint –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API endpoint –¥–æ—Å—Ç—É–ø–µ–Ω:

```bash
curl -X POST https://post-ads.ru/api/deploy \
  -H "X-Deploy-Token: your-deploy-token" \
  -H "Content-Type: application/json"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
- –ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–µ–ø–ª–æ—è
- –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π: `{"success":false,"message":"–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–µ–ø–ª–æ—è"}` (401)
- –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `{"success":false,"message":"DEPLOY_TOKEN –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"}` (500)

#### 3.2. –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—É—à–∞, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ):

```bash
php artisan deploy --dry-run --skip-build
```

–ò–ª–∏ –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥–µ–ø–ª–æ–µ–º:

```bash
php artisan deploy
```

---

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 4.1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª/–≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ `/api/deploy` —Ç–æ–ª—å–∫–æ —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP –∞–¥—Ä–µ—Å–æ–≤.

**Nginx:**
```nginx
location /api/deploy {
    allow YOUR_IP_ADDRESS;
    deny all;
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ...
}
```

**Apache:**
```apache
<Location /api/deploy>
    Require ip YOUR_IP_ADDRESS
</Location>
```

#### 4.2. Rate Limiting

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∞—Ç–∞–∫.

**Nginx:**
```nginx
limit_req_zone $binary_remote_addr zone=deploy_limit:10m rate=1r/m;

location /api/deploy {
    limit_req zone=deploy_limit burst=2 nodelay;
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ...
}
```

---

### –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ public/build –≤ Git

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `public/build` –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git add public/build
git commit -m "Add public/build directory"
git push origin main
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** 
- –§–∞–π–ª—ã –≤ `public/build` —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ Git
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `npm run build` –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –∫–æ–º–º–∏—Ç–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] `DEPLOY_TOKEN` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π)
- [ ] `SERVER_URL` —É–∫–∞–∑–∞–Ω –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
- [ ] `PHP_PATH` —É–∫–∞–∑–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∏–ª–∏ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
- [ ] Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- [ ] –¢–µ—Å—Ç API endpoint `/api/deploy` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å–ø–µ—à–µ–Ω
- [ ] –ö–æ–º–∞–Ω–¥–∞ `php artisan deploy` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
- [ ] –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ

---

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π

```bash
php artisan deploy
```

–ö–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–±–µ—Ä–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (`npm run build`)
2. –î–æ–±–∞–≤–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
3. –°–æ–∑–¥–∞—Å—Ç –∫–æ–º–º–∏—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "Deploy: YYYY-MM-DD HH:MM:SS"
4. –û—Ç–ø—Ä–∞–≤–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
5. –û—Ç–ø—Ä–∞–≤–∏—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –î–µ–ø–ª–æ–π —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

```bash
php artisan deploy --message="–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"
```

### –î–µ–ø–ª–æ–π –±–µ–∑ —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
php artisan deploy --skip-build
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –µ—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –∏–∑–º–µ–Ω—è–ª—Å—è.

### –ü—Ä–æ—Å–º–æ—Ç—Ä —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ (–±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

```bash
php artisan deploy --dry-run
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–æ–∫–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π —Ç–æ–∫–µ–Ω (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
   - –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω —Ç–æ–ª—å–∫–æ –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ Git)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è dev –∏ production

2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∏–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏ –¥–ª—è git pull –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
   - –°–æ–∑–¥–∞–π—Ç–µ backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–µ–ø–ª–æ–µ–º

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: `storage/logs/laravel.log`
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –¥–µ–ø–ª–æ—è—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "SERVER_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ .env"

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ `SERVER_URL=https://post-ads.ru` –≤ `.env` –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

---

### –ü—Ä–æ–±–ª–µ–º–∞: "DEPLOY_TOKEN –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ .env"

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ `DEPLOY_TOKEN=your-token` –≤ `.env` –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `SERVER_URL` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–µ–∑ `/api/deploy`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `https://post-ads.ru`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: `curl https://post-ads.ru/api/deploy`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "SSL certificate problem: unable to get local issuer certificate"

**–†–µ—à–µ–Ω–∏–µ:**
–≠—Ç–æ –æ—à–∏–±–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é `--insecure` –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ SSL (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):

```bash
php artisan deploy --insecure
```

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--insecure` —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –µ—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π. –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.

–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ SSL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`APP_ENV=local`).

---

### –ü—Ä–æ–±–ª–µ–º–∞: "401 Unauthorized" –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `DEPLOY_TOKEN` –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-Deploy-Token`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

---

### –ü—Ä–æ–±–ª–µ–º–∞: "Git push failed"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** `DEPLOY_SYSTEM_PLAN.md`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `SERVER_SETUP.md`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:** `php artisan deploy --help`

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤, —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ø–ª–æ—è –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. 

–î–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ:

```bash
php artisan deploy
```

–ò –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–±—Ä–∞–Ω—ã
2. –ó–∞–∫–æ–º–º–∏—á–µ–Ω—ã
3. –û—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-29

